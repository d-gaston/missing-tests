<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ExtendedFieldElementAbstractTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_math4$All_in_commons_math4.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math4</a> &gt; <span class="el_source">ExtendedFieldElementAbstractTest.java</span></div><h1>ExtendedFieldElementAbstractTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.commons.math4;

import org.apache.commons.numbers.arrays.LinearCombination;
import org.apache.commons.rng.UniformRandomProvider;
import org.apache.commons.rng.simple.RandomSource;
import org.apache.commons.math4.RealFieldElement;
import org.apache.commons.math4.util.FastMath;
import org.apache.commons.math4.util.MathArrays;
import org.junit.Assert;
import org.junit.Test;

<span class="fc" id="L28">public abstract class ExtendedFieldElementAbstractTest&lt;T extends RealFieldElement&lt;T&gt;&gt; {</span>

    protected abstract T build(double x);

    @Test
    public void testAddField() {
<span class="fc bfc" id="L34" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L35" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L36">                checkRelative(x + y, build(x).add(build(y)));</span>
            }
        }
<span class="fc" id="L39">    }</span>

    @Test
    public void testAddDouble() {
<span class="fc bfc" id="L43" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L44" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L45">                checkRelative(x + y, build(x).add(y));</span>
            }
        }
<span class="fc" id="L48">    }</span>

    @Test
    public void testSubtractField() {
<span class="fc bfc" id="L52" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L53" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L54">                checkRelative(x - y, build(x).subtract(build(y)));</span>
            }
        }
<span class="fc" id="L57">    }</span>

    @Test
    public void testSubtractDouble() {
<span class="fc bfc" id="L61" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L63">                checkRelative(x - y, build(x).subtract(y));</span>
            }
        }
<span class="fc" id="L66">    }</span>

    @Test
    public void testMultiplyField() {
<span class="fc bfc" id="L70" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L71" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L72">                checkRelative(x * y, build(x).multiply(build(y)));</span>
            }
        }
<span class="fc" id="L75">    }</span>

    @Test
    public void testMultiplyDouble() {
<span class="fc bfc" id="L79" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L80" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L81">                checkRelative(x * y, build(x).multiply(y));</span>
            }
        }
<span class="fc" id="L84">    }</span>

    @Test
    public void testMultiplyInt() {
<span class="fc bfc" id="L88" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L89" title="All 2 branches covered.">            for (int y = -10; y &lt; 10; y += 1) {</span>
<span class="fc" id="L90">                checkRelative(x * y, build(x).multiply(y));</span>
            }
        }
<span class="fc" id="L93">    }</span>

    @Test
    public void testDivideField() {
<span class="fc bfc" id="L97" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L98" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L99">                checkRelative(x / y, build(x).divide(build(y)));</span>
            }
        }
<span class="fc" id="L102">    }</span>

    @Test
    public void testDivideDouble() {
<span class="fc bfc" id="L106" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L107" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L108">                    checkRelative(x / y, build(x).divide(y));</span>
            }
        }
<span class="fc" id="L111">    }</span>

    @Test
    public void testRemainderField() {
<span class="fc bfc" id="L115" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L117">                checkRelative(FastMath.IEEEremainder(x, y), build(x).remainder(build(y)));</span>
            }
        }
<span class="fc" id="L120">    }</span>

    @Test
    public void testRemainderDouble() {
<span class="fc bfc" id="L124" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L125" title="All 2 branches covered.">            for (double y = -3.2; y &lt; 3.2; y += 0.25) {</span>
<span class="fc" id="L126">                checkRelative(FastMath.IEEEremainder(x, y), build(x).remainder(y));</span>
            }
        }
<span class="fc" id="L129">    }</span>

    @Test
    public void testCos() {
<span class="fc bfc" id="L133" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L134">            checkRelative(FastMath.cos(x), build(x).cos());</span>
        }
<span class="fc" id="L136">    }</span>

    @Test
    public void testAcos() {
<span class="fc bfc" id="L140" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L141">            checkRelative(FastMath.acos(x), build(x).acos());</span>
        }
<span class="fc" id="L143">    }</span>

    @Test
    public void testSin() {
<span class="fc bfc" id="L147" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L148">            checkRelative(FastMath.sin(x), build(x).sin());</span>
        }
<span class="fc" id="L150">    }</span>

    @Test
    public void testAsin() {
<span class="fc bfc" id="L154" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L155">            checkRelative(FastMath.asin(x), build(x).asin());</span>
        }
<span class="fc" id="L157">    }</span>

    @Test
    public void testTan() {
<span class="fc bfc" id="L161" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L162">            checkRelative(FastMath.tan(x), build(x).tan());</span>
        }
<span class="fc" id="L164">    }</span>

    @Test
    public void testAtan() {
<span class="fc bfc" id="L168" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L169">            checkRelative(FastMath.atan(x), build(x).atan());</span>
        }
<span class="fc" id="L171">    }</span>

    @Test
    public void testAtan2() {
<span class="fc bfc" id="L175" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L176" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L177">                checkRelative(FastMath.atan2(x, y), build(x).atan2(build(y)));</span>
            }
        }
<span class="fc" id="L180">    }</span>

    @Test
    public void testCosh() {
<span class="fc bfc" id="L184" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L185">            checkRelative(FastMath.cosh(x), build(x).cosh());</span>
        }
<span class="fc" id="L187">    }</span>

    @Test
    public void testAcosh() {
<span class="fc bfc" id="L191" title="All 2 branches covered.">        for (double x = 1.1; x &lt; 5.0; x += 0.05) {</span>
<span class="fc" id="L192">            checkRelative(FastMath.acosh(x), build(x).acosh());</span>
        }
<span class="fc" id="L194">    }</span>

    @Test
    public void testSinh() {
<span class="fc bfc" id="L198" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L199">            checkRelative(FastMath.sinh(x), build(x).sinh());</span>
        }
<span class="fc" id="L201">    }</span>

    @Test
    public void testAsinh() {
<span class="fc bfc" id="L205" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L206">            checkRelative(FastMath.asinh(x), build(x).asinh());</span>
        }
<span class="fc" id="L208">    }</span>

    @Test
    public void testTanh() {
<span class="fc bfc" id="L212" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L213">            checkRelative(FastMath.tanh(x), build(x).tanh());</span>
        }
<span class="fc" id="L215">    }</span>

    @Test
    public void testAtanh() {
<span class="fc bfc" id="L219" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L220">            checkRelative(FastMath.atanh(x), build(x).atanh());</span>
        }
<span class="fc" id="L222">    }</span>

    @Test
    public void testSqrt() {
<span class="fc bfc" id="L226" title="All 2 branches covered.">        for (double x = 0.01; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L227">            checkRelative(FastMath.sqrt(x), build(x).sqrt());</span>
        }
<span class="fc" id="L229">    }</span>

    @Test
    public void testCbrt() {
<span class="fc bfc" id="L233" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L234">            checkRelative(FastMath.cbrt(x), build(x).cbrt());</span>
        }
<span class="fc" id="L236">    }</span>

    @Test
    public void testHypot() {
<span class="fc bfc" id="L240" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L241" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L242">                checkRelative(FastMath.hypot(x, y), build(x).hypot(build(y)));</span>
            }
        }
<span class="fc" id="L245">    }</span>

    @Test
    public void testRootN() {
<span class="fc bfc" id="L249" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc bfc" id="L250" title="All 2 branches covered.">            for (int n = 1; n &lt; 5; ++n) {</span>
<span class="fc bfc" id="L251" title="All 2 branches covered.">                if (x &lt; 0) {</span>
<span class="fc bfc" id="L252" title="All 2 branches covered.">                    if (n % 2 == 1) {</span>
<span class="fc" id="L253">                        checkRelative(-FastMath.pow(-x, 1.0 / n), build(x).rootN(n));</span>
                    }
                } else {
<span class="fc" id="L256">                    checkRelative(FastMath.pow(x, 1.0 / n), build(x).rootN(n));</span>
                }
            }
        }
<span class="fc" id="L260">    }</span>

    @Test
    public void testPowField() {
<span class="fc bfc" id="L264" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc bfc" id="L265" title="All 2 branches covered.">            for (double y = 0.1; y &lt; 4; y += 0.2) {</span>
<span class="fc" id="L266">                checkRelative(FastMath.pow(x, y), build(x).pow(build(y)));</span>
            }
        }
<span class="fc" id="L269">    }</span>

    @Test
    public void testPowDouble() {
<span class="fc bfc" id="L273" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc bfc" id="L274" title="All 2 branches covered.">            for (double y = 0.1; y &lt; 4; y += 0.2) {</span>
<span class="fc" id="L275">                checkRelative(FastMath.pow(x, y), build(x).pow(y));</span>
            }
        }
<span class="fc" id="L278">    }</span>

    @Test
    public void testPowInt() {
<span class="fc bfc" id="L282" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc bfc" id="L283" title="All 2 branches covered.">            for (int n = 0; n &lt; 5; ++n) {</span>
<span class="fc" id="L284">                checkRelative(FastMath.pow(x, n), build(x).pow(n));</span>
            }
        }
<span class="fc" id="L287">    }</span>

    @Test
    public void testExp() {
<span class="fc bfc" id="L291" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L292">            checkRelative(FastMath.exp(x), build(x).exp());</span>
        }
<span class="fc" id="L294">    }</span>

    @Test
    public void testExpm1() {
<span class="fc bfc" id="L298" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L299">            checkRelative(FastMath.expm1(x), build(x).expm1());</span>
        }
<span class="fc" id="L301">    }</span>

    @Test
    public void testLog() {
<span class="fc bfc" id="L305" title="All 2 branches covered.">        for (double x = 0.01; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L306">            checkRelative(FastMath.log(x), build(x).log());</span>
        }
<span class="fc" id="L308">    }</span>

    @Test
    public void testLog1p() {
<span class="fc bfc" id="L312" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L313">            checkRelative(FastMath.log1p(x), build(x).log1p());</span>
        }
<span class="fc" id="L315">    }</span>

//  TODO: add this test in 4.0, as it is not possible to do it in 3.2
//  due to incompatibility of the return type in the Dfp class
//    @Test
//    public void testLog10() {
//        for (double x = -0.9; x &lt; 0.9; x += 0.05) {
//            checkRelative(FastMath.log10(x), build(x).log10());
//        }
//    }

    @Test
    public void testAbs() {
<span class="fc bfc" id="L328" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L329">            checkRelative(FastMath.abs(x), build(x).abs());</span>
        }
<span class="fc" id="L331">    }</span>

    @Test
    public void testCeil() {
<span class="fc bfc" id="L335" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L336">            checkRelative(FastMath.ceil(x), build(x).ceil());</span>
        }
<span class="fc" id="L338">    }</span>

    @Test
    public void testFloor() {
<span class="fc bfc" id="L342" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L343">            checkRelative(FastMath.floor(x), build(x).floor());</span>
        }
<span class="fc" id="L345">    }</span>

    @Test
    public void testRint() {
<span class="fc bfc" id="L349" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L350">            checkRelative(FastMath.rint(x), build(x).rint());</span>
        }
<span class="fc" id="L352">    }</span>

    @Test
    public void testRound() {
<span class="fc bfc" id="L356" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L357">            Assert.assertEquals(FastMath.round(x), build(x).round());</span>
        }
<span class="fc" id="L359">    }</span>

    @Test
    public void testSignum() {
<span class="fc bfc" id="L363" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc" id="L364">            checkRelative(FastMath.signum(x), build(x).signum());</span>
        }
<span class="fc" id="L366">    }</span>

    @Test
    public void testCopySignField() {
<span class="fc bfc" id="L370" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L371" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L372">                checkRelative(FastMath.copySign(x, y), build(x).copySign(build(y)));</span>
            }
        }
<span class="fc" id="L375">    }</span>

    @Test
    public void testCopySignDouble() {
<span class="fc bfc" id="L379" title="All 2 branches covered.">        for (double x = -3; x &lt; 3; x += 0.2) {</span>
<span class="fc bfc" id="L380" title="All 2 branches covered.">            for (double y = -3; y &lt; 3; y += 0.2) {</span>
<span class="fc" id="L381">                checkRelative(FastMath.copySign(x, y), build(x).copySign(y));</span>
            }
        }
<span class="fc" id="L384">    }</span>

    @Test
    public void testScalb() {
<span class="fc bfc" id="L388" title="All 2 branches covered.">        for (double x = -0.9; x &lt; 0.9; x += 0.05) {</span>
<span class="fc bfc" id="L389" title="All 2 branches covered.">            for (int n = -100; n &lt; 100; ++n) {</span>
<span class="fc" id="L390">                checkRelative(FastMath.scalb(x, n), build(x).scalb(n));</span>
            }
        }
<span class="fc" id="L393">    }</span>

    @Test
    public void testLinearCombinationFaFa() {
<span class="fc" id="L397">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xfafal);</span>
<span class="fc bfc" id="L398" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L399">            double[] aD = generateDouble(r, 10);</span>
<span class="fc" id="L400">            double[] bD = generateDouble(r, 10);</span>
<span class="fc" id="L401">            T[] aF      = toFieldArray(aD);</span>
<span class="fc" id="L402">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L403">            checkRelative(LinearCombination.value(aD, bD),</span>
<span class="fc" id="L404">                          aF[0].linearCombination(aF, bF));</span>
        }
<span class="fc" id="L406">    }</span>

    @Test
    public void testLinearCombinationDaFa() {
<span class="fc" id="L410">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xdafal);</span>
<span class="fc bfc" id="L411" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L412">            double[] aD = generateDouble(r, 10);</span>
<span class="fc" id="L413">            double[] bD = generateDouble(r, 10);</span>
<span class="fc" id="L414">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L415">            checkRelative(LinearCombination.value(aD, bD),</span>
<span class="fc" id="L416">                          bF[0].linearCombination(aD, bF));</span>
        }
<span class="fc" id="L418">    }</span>

    @Test
    public void testLinearCombinationFF2() {
<span class="fc" id="L422">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xff2l);</span>
<span class="fc bfc" id="L423" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L424">            double[] aD = generateDouble(r, 2);</span>
<span class="fc" id="L425">            double[] bD = generateDouble(r, 2);</span>
<span class="fc" id="L426">            T[] aF      = toFieldArray(aD);</span>
<span class="fc" id="L427">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L428">            checkRelative(LinearCombination.value(aD[0], bD[0], aD[1], bD[1]),</span>
<span class="fc" id="L429">                          aF[0].linearCombination(aF[0], bF[0], aF[1], bF[1]));</span>
        }
<span class="fc" id="L431">    }</span>

    @Test
    public void testLinearCombinationDF2() {
<span class="fc" id="L435">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xdf2l);</span>
<span class="fc bfc" id="L436" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L437">            double[] aD = generateDouble(r, 2);</span>
<span class="fc" id="L438">            double[] bD = generateDouble(r, 2);</span>
<span class="fc" id="L439">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L440">            checkRelative(LinearCombination.value(aD[0], bD[0], aD[1], bD[1]),</span>
<span class="fc" id="L441">                          bF[0].linearCombination(aD[0], bF[0], aD[1], bF[1]));</span>
        }
<span class="fc" id="L443">    }</span>

    @Test
    public void testLinearCombinationFF3() {
<span class="fc" id="L447">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xff3l);</span>
<span class="fc bfc" id="L448" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L449">            double[] aD = generateDouble(r, 3);</span>
<span class="fc" id="L450">            double[] bD = generateDouble(r, 3);</span>
<span class="fc" id="L451">            T[] aF      = toFieldArray(aD);</span>
<span class="fc" id="L452">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L453">            checkRelative(LinearCombination.value(aD[0], bD[0], aD[1], bD[1], aD[2], bD[2]),</span>
<span class="fc" id="L454">                          aF[0].linearCombination(aF[0], bF[0], aF[1], bF[1], aF[2], bF[2]));</span>
        }
<span class="fc" id="L456">    }</span>

    @Test
    public void testLinearCombinationDF3() {
<span class="fc" id="L460">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xdf3l);</span>
<span class="fc bfc" id="L461" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L462">            double[] aD = generateDouble(r, 3);</span>
<span class="fc" id="L463">            double[] bD = generateDouble(r, 3);</span>
<span class="fc" id="L464">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L465">            checkRelative(LinearCombination.value(aD[0], bD[0], aD[1], bD[1], aD[2], bD[2]),</span>
<span class="fc" id="L466">                          bF[0].linearCombination(aD[0], bF[0], aD[1], bF[1], aD[2], bF[2]));</span>
        }
<span class="fc" id="L468">    }</span>

    @Test
    public void testLinearCombinationFF4() {
<span class="fc" id="L472">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xff4l);</span>
<span class="fc bfc" id="L473" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L474">            double[] aD = generateDouble(r, 4);</span>
<span class="fc" id="L475">            double[] bD = generateDouble(r, 4);</span>
<span class="fc" id="L476">            T[] aF      = toFieldArray(aD);</span>
<span class="fc" id="L477">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L478">            checkRelative(LinearCombination.value(aD[0], bD[0], aD[1], bD[1], aD[2], bD[2], aD[3], bD[3]),</span>
<span class="fc" id="L479">                          aF[0].linearCombination(aF[0], bF[0], aF[1], bF[1], aF[2], bF[2], aF[3], bF[3]));</span>
        }
<span class="fc" id="L481">    }</span>

    @Test
    public void testLinearCombinationDF4() {
<span class="fc" id="L485">        UniformRandomProvider r = RandomSource.create(RandomSource.WELL_1024_A, 0xdf4l);</span>
<span class="fc bfc" id="L486" title="All 2 branches covered.">        for (int i = 0; i &lt; 50; ++i) {</span>
<span class="fc" id="L487">            double[] aD = generateDouble(r, 4);</span>
<span class="fc" id="L488">            double[] bD = generateDouble(r, 4);</span>
<span class="fc" id="L489">            T[] bF      = toFieldArray(bD);</span>
<span class="fc" id="L490">            checkRelative(LinearCombination.value(aD[0], bD[0], aD[1], bD[1], aD[2], bD[2], aD[3], bD[3]),</span>
<span class="fc" id="L491">                          bF[0].linearCombination(aD[0], bF[0], aD[1], bF[1], aD[2], bF[2], aD[3], bF[3]));</span>
        }
<span class="fc" id="L493">    }</span>

    @Test
    public void testGetField() {
<span class="fc" id="L497">        checkRelative(1.0, build(-10).getField().getOne());</span>
<span class="fc" id="L498">        checkRelative(0.0, build(-10).getField().getZero());</span>
<span class="fc" id="L499">    }</span>

    private void checkRelative(double expected, T obtained) {
<span class="fc" id="L502">        Assert.assertEquals(expected, obtained.getReal(), 1.0e-15 * (1 + FastMath.abs(expected)));</span>
<span class="fc" id="L503">    }</span>

    @Test
    public void testEquals() {
<span class="fc" id="L507">        T t1a = build(1.0);</span>
<span class="fc" id="L508">        T t1b = build(1.0);</span>
<span class="fc" id="L509">        T t2  = build(2.0);</span>
<span class="fc" id="L510">        Assert.assertTrue(t1a.equals(t1a));</span>
<span class="fc" id="L511">        Assert.assertTrue(t1a.equals(t1b));</span>
<span class="fc" id="L512">        Assert.assertFalse(t1a.equals(t2));</span>
<span class="fc" id="L513">        Assert.assertFalse(t1a.equals(new Object()));</span>
<span class="fc" id="L514">    }</span>

    @Test
    public void testHash() {
<span class="fc" id="L518">        T t1a = build(1.0);</span>
<span class="fc" id="L519">        T t1b = build(1.0);</span>
<span class="fc" id="L520">        T t2  = build(2.0);</span>
<span class="fc" id="L521">        Assert.assertEquals(t1a.hashCode(), t1b.hashCode());</span>
<span class="pc bpc" id="L522" title="1 of 2 branches missed.">        Assert.assertTrue(t1a.hashCode() != t2.hashCode());</span>
<span class="fc" id="L523">    }</span>

    private double[] generateDouble (final UniformRandomProvider r, int n) {
<span class="fc" id="L526">        double[] a = new double[n];</span>
<span class="fc bfc" id="L527" title="All 2 branches covered.">        for (int i = 0; i &lt; n; ++i) {</span>
<span class="fc" id="L528">            a[i] = r.nextDouble();</span>
        }
<span class="fc" id="L530">        return a;</span>
    }

    private T[] toFieldArray (double[] a) {
<span class="fc" id="L534">        T[] f = MathArrays.buildArray(build(0).getField(), a.length);</span>
<span class="fc bfc" id="L535" title="All 2 branches covered.">        for (int i = 0; i &lt; a.length; ++i) {</span>
<span class="fc" id="L536">            f[i] = build(a[i]);</span>
        }
<span class="fc" id="L538">        return f;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>