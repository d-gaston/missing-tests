<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DfpTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_math4$All_in_commons_math4.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math4.dfp</a> &gt; <span class="el_source">DfpTest.java</span></div><h1>DfpTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.commons.math4.dfp;

import org.apache.commons.math4.ExtendedFieldElementAbstractTest;
import org.apache.commons.math4.dfp.Dfp;
import org.apache.commons.math4.dfp.DfpField;
import org.apache.commons.math4.util.FastMath;
import org.apache.commons.numbers.core.Precision;
import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

<span class="fc" id="L30">public class DfpTest extends ExtendedFieldElementAbstractTest&lt;Dfp&gt; {</span>

    @Override
    protected Dfp build(final double x) {
<span class="fc" id="L34">        return field.newDfp(x);</span>
    }

    private DfpField field;
    private Dfp pinf;
    private Dfp ninf;
    private Dfp nan;
    private Dfp snan;
    private Dfp qnan;

    @Before
    public void setUp() {
        // Some basic setup.  Define some constants and clear the status flags
<span class="fc" id="L47">        field = new DfpField(20);</span>
<span class="fc" id="L48">        pinf = field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;0&quot;));</span>
<span class="fc" id="L49">        ninf = field.newDfp(&quot;-1&quot;).divide(field.newDfp(&quot;0&quot;));</span>
<span class="fc" id="L50">        nan = field.newDfp(&quot;0&quot;).divide(field.newDfp(&quot;0&quot;));</span>
<span class="fc" id="L51">        snan = field.newDfp((byte)1, Dfp.SNAN);</span>
<span class="fc" id="L52">        qnan = field.newDfp((byte)1, Dfp.QNAN);</span>
<span class="fc" id="L53">        ninf.getField().clearIEEEFlags();</span>
<span class="fc" id="L54">    }</span>

    @After
    public void tearDown() {
<span class="fc" id="L58">        field = null;</span>
<span class="fc" id="L59">        pinf    = null;</span>
<span class="fc" id="L60">        ninf    = null;</span>
<span class="fc" id="L61">        nan     = null;</span>
<span class="fc" id="L62">        snan    = null;</span>
<span class="fc" id="L63">        qnan    = null;</span>
<span class="fc" id="L64">    }</span>

    // Generic test function.  Takes params x and y and tests them for
    // equality.  Then checks the status flags against the flags argument.
    // If the test fail, it prints the desc string
    private void test(Dfp x, Dfp y, int flags, String desc)
    {
<span class="fc" id="L71">        boolean b = x.equals(y);</span>

<span class="pc bpc" id="L73" title="1 of 4 branches missed.">        if (!x.equals(y) &amp;&amp; !x.unequal(y))  // NaNs involved</span>
<span class="fc" id="L74">            b = (x.toString().equals(y.toString()));</span>

<span class="fc bfc" id="L76" title="All 2 branches covered.">        if (x.equals(field.newDfp(&quot;0&quot;)))  // distinguish +/- zero</span>
<span class="pc bpc" id="L77" title="2 of 4 branches missed.">            b = (b &amp;&amp; (x.toString().equals(y.toString())));</span>

<span class="pc bpc" id="L79" title="2 of 4 branches missed.">        b = (b &amp;&amp; x.getField().getIEEEFlags() == flags);</span>

<span class="pc bpc" id="L81" title="1 of 2 branches missed.">        if (!b)</span>
<span class="nc" id="L82">            Assert.assertTrue(&quot;assersion failed &quot;+desc+&quot; x = &quot;+x.toString()+&quot; flags = &quot;+x.getField().getIEEEFlags(), b);</span>

<span class="fc" id="L84">        x.getField().clearIEEEFlags();</span>
<span class="fc" id="L85">    }</span>

    @Test
    public void testByteConstructor() {
<span class="fc" id="L89">        Assert.assertEquals(&quot;0.&quot;, new Dfp(field, (byte) 0).toString());</span>
<span class="fc" id="L90">        Assert.assertEquals(&quot;1.&quot;, new Dfp(field, (byte) 1).toString());</span>
<span class="fc" id="L91">        Assert.assertEquals(&quot;-1.&quot;, new Dfp(field, (byte) -1).toString());</span>
<span class="fc" id="L92">        Assert.assertEquals(&quot;-128.&quot;, new Dfp(field, Byte.MIN_VALUE).toString());</span>
<span class="fc" id="L93">        Assert.assertEquals(&quot;127.&quot;, new Dfp(field, Byte.MAX_VALUE).toString());</span>
<span class="fc" id="L94">    }</span>

    @Test
    public void testIntConstructor() {
<span class="fc" id="L98">        Assert.assertEquals(&quot;0.&quot;, new Dfp(field, 0).toString());</span>
<span class="fc" id="L99">        Assert.assertEquals(&quot;1.&quot;, new Dfp(field, 1).toString());</span>
<span class="fc" id="L100">        Assert.assertEquals(&quot;-1.&quot;, new Dfp(field, -1).toString());</span>
<span class="fc" id="L101">        Assert.assertEquals(&quot;1234567890.&quot;, new Dfp(field, 1234567890).toString());</span>
<span class="fc" id="L102">        Assert.assertEquals(&quot;-1234567890.&quot;, new Dfp(field, -1234567890).toString());</span>
<span class="fc" id="L103">        Assert.assertEquals(&quot;-2147483648.&quot;, new Dfp(field, Integer.MIN_VALUE).toString());</span>
<span class="fc" id="L104">        Assert.assertEquals(&quot;2147483647.&quot;, new Dfp(field, Integer.MAX_VALUE).toString());</span>
<span class="fc" id="L105">    }</span>

    @Test
    public void testLongConstructor() {
<span class="fc" id="L109">        Assert.assertEquals(&quot;0.&quot;, new Dfp(field, 0l).toString());</span>
<span class="fc" id="L110">        Assert.assertEquals(&quot;1.&quot;, new Dfp(field, 1l).toString());</span>
<span class="fc" id="L111">        Assert.assertEquals(&quot;-1.&quot;, new Dfp(field, -1l).toString());</span>
<span class="fc" id="L112">        Assert.assertEquals(&quot;1234567890.&quot;, new Dfp(field, 1234567890l).toString());</span>
<span class="fc" id="L113">        Assert.assertEquals(&quot;-1234567890.&quot;, new Dfp(field, -1234567890l).toString());</span>
<span class="fc" id="L114">        Assert.assertEquals(&quot;-9223372036854775808.&quot;, new Dfp(field, Long.MIN_VALUE).toString());</span>
<span class="fc" id="L115">        Assert.assertEquals(&quot;9223372036854775807.&quot;, new Dfp(field, Long.MAX_VALUE).toString());</span>
<span class="fc" id="L116">    }</span>

    /*
     *  Test addition
     */
    @Test
    public void testAdd()
    {
<span class="fc" id="L124">        test(field.newDfp(&quot;1&quot;).add(field.newDfp(&quot;1&quot;)),      // Basic tests   1+1 = 2</span>
<span class="fc" id="L125">             field.newDfp(&quot;2&quot;),</span>
             0, &quot;Add #1&quot;);

<span class="fc" id="L128">        test(field.newDfp(&quot;1&quot;).add(field.newDfp(&quot;-1&quot;)),     // 1 + (-1) = 0</span>
<span class="fc" id="L129">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #2&quot;);

<span class="fc" id="L132">        test(field.newDfp(&quot;-1&quot;).add(field.newDfp(&quot;1&quot;)),     // (-1) + 1 = 0</span>
<span class="fc" id="L133">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #3&quot;);

<span class="fc" id="L136">        test(field.newDfp(&quot;-1&quot;).add(field.newDfp(&quot;-1&quot;)),     // (-1) + (-1) = -2</span>
<span class="fc" id="L137">             field.newDfp(&quot;-2&quot;),</span>
             0, &quot;Add #4&quot;);

        // rounding mode is round half even

<span class="fc" id="L142">        test(field.newDfp(&quot;1&quot;).add(field.newDfp(&quot;1e-16&quot;)),     // rounding on add</span>
<span class="fc" id="L143">             field.newDfp(&quot;1.0000000000000001&quot;),</span>
             0, &quot;Add #5&quot;);

<span class="fc" id="L146">        test(field.newDfp(&quot;1&quot;).add(field.newDfp(&quot;1e-17&quot;)),     // rounding on add</span>
<span class="fc" id="L147">             field.newDfp(&quot;1&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #6&quot;);

<span class="fc" id="L150">        test(field.newDfp(&quot;0.90999999999999999999&quot;).add(field.newDfp(&quot;0.1&quot;)),     // rounding on add</span>
<span class="fc" id="L151">             field.newDfp(&quot;1.01&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #7&quot;);

<span class="fc" id="L154">        test(field.newDfp(&quot;.10000000000000005000&quot;).add(field.newDfp(&quot;.9&quot;)),     // rounding on add</span>
<span class="fc" id="L155">             field.newDfp(&quot;1.&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #8&quot;);

<span class="fc" id="L158">        test(field.newDfp(&quot;.10000000000000015000&quot;).add(field.newDfp(&quot;.9&quot;)),     // rounding on add</span>
<span class="fc" id="L159">             field.newDfp(&quot;1.0000000000000002&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #9&quot;);

<span class="fc" id="L162">        test(field.newDfp(&quot;.10000000000000014999&quot;).add(field.newDfp(&quot;.9&quot;)),     // rounding on add</span>
<span class="fc" id="L163">             field.newDfp(&quot;1.0000000000000001&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #10&quot;);

<span class="fc" id="L166">        test(field.newDfp(&quot;.10000000000000015001&quot;).add(field.newDfp(&quot;.9&quot;)),     // rounding on add</span>
<span class="fc" id="L167">             field.newDfp(&quot;1.0000000000000002&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #11&quot;);

<span class="fc" id="L170">        test(field.newDfp(&quot;.11111111111111111111&quot;).add(field.newDfp(&quot;11.1111111111111111&quot;)), // rounding on add</span>
<span class="fc" id="L171">             field.newDfp(&quot;11.22222222222222222222&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #12&quot;);

<span class="fc" id="L174">        test(field.newDfp(&quot;.11111111111111111111&quot;).add(field.newDfp(&quot;1111111111111111.1111&quot;)), // rounding on add</span>
<span class="fc" id="L175">             field.newDfp(&quot;1111111111111111.2222&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #13&quot;);

<span class="fc" id="L178">        test(field.newDfp(&quot;.11111111111111111111&quot;).add(field.newDfp(&quot;11111111111111111111&quot;)), // rounding on add</span>
<span class="fc" id="L179">             field.newDfp(&quot;11111111111111111111&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #14&quot;);

<span class="fc" id="L182">        test(field.newDfp(&quot;9.9999999999999999999e131071&quot;).add(field.newDfp(&quot;-1e131052&quot;)), // overflow on add</span>
<span class="fc" id="L183">             field.newDfp(&quot;9.9999999999999999998e131071&quot;),</span>
             0, &quot;Add #15&quot;);

<span class="fc" id="L186">        test(field.newDfp(&quot;9.9999999999999999999e131071&quot;).add(field.newDfp(&quot;1e131052&quot;)), // overflow on add</span>
             pinf,
             DfpField.FLAG_OVERFLOW, &quot;Add #16&quot;);

<span class="fc" id="L190">        test(field.newDfp(&quot;-9.9999999999999999999e131071&quot;).add(field.newDfp(&quot;-1e131052&quot;)), // overflow on add</span>
             ninf,
             DfpField.FLAG_OVERFLOW, &quot;Add #17&quot;);

<span class="fc" id="L194">        test(field.newDfp(&quot;-9.9999999999999999999e131071&quot;).add(field.newDfp(&quot;1e131052&quot;)), // overflow on add</span>
<span class="fc" id="L195">             field.newDfp(&quot;-9.9999999999999999998e131071&quot;),</span>
             0, &quot;Add #18&quot;);

<span class="fc" id="L198">        test(field.newDfp(&quot;1e-131072&quot;).add(field.newDfp(&quot;1e-131072&quot;)), // underflow on add</span>
<span class="fc" id="L199">             field.newDfp(&quot;2e-131072&quot;),</span>
             0, &quot;Add #19&quot;);

<span class="fc" id="L202">        test(field.newDfp(&quot;1.0000000000000001e-131057&quot;).add(field.newDfp(&quot;-1e-131057&quot;)), // underflow on add</span>
<span class="fc" id="L203">             field.newDfp(&quot;1e-131073&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;Add #20&quot;);

<span class="fc" id="L206">        test(field.newDfp(&quot;1.1e-131072&quot;).add(field.newDfp(&quot;-1e-131072&quot;)), // underflow on add</span>
<span class="fc" id="L207">             field.newDfp(&quot;1e-131073&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;Add #21&quot;);

<span class="fc" id="L210">        test(field.newDfp(&quot;1.0000000000000001e-131072&quot;).add(field.newDfp(&quot;-1e-131072&quot;)), // underflow on add</span>
<span class="fc" id="L211">             field.newDfp(&quot;1e-131088&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;Add #22&quot;);

<span class="fc" id="L214">        test(field.newDfp(&quot;1.0000000000000001e-131078&quot;).add(field.newDfp(&quot;-1e-131078&quot;)), // underflow on add</span>
<span class="fc" id="L215">             field.newDfp(&quot;0&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;Add #23&quot;);

<span class="fc" id="L218">        test(field.newDfp(&quot;1.0&quot;).add(field.newDfp(&quot;-1e-20&quot;)), // loss of precision on alignment?</span>
<span class="fc" id="L219">             field.newDfp(&quot;0.99999999999999999999&quot;),</span>
             0, &quot;Add #23.1&quot;);

<span class="fc" id="L222">        test(field.newDfp(&quot;-0.99999999999999999999&quot;).add(field.newDfp(&quot;1&quot;)), // proper normalization?</span>
<span class="fc" id="L223">             field.newDfp(&quot;0.00000000000000000001&quot;),</span>
             0, &quot;Add #23.2&quot;);

<span class="fc" id="L226">        test(field.newDfp(&quot;1&quot;).add(field.newDfp(&quot;0&quot;)), // adding zeros</span>
<span class="fc" id="L227">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Add #24&quot;);

<span class="fc" id="L230">        test(field.newDfp(&quot;0&quot;).add(field.newDfp(&quot;0&quot;)), // adding zeros</span>
<span class="fc" id="L231">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #25&quot;);

<span class="fc" id="L234">        test(field.newDfp(&quot;-0&quot;).add(field.newDfp(&quot;0&quot;)), // adding zeros</span>
<span class="fc" id="L235">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #26&quot;);

<span class="fc" id="L238">        test(field.newDfp(&quot;0&quot;).add(field.newDfp(&quot;-0&quot;)), // adding zeros</span>
<span class="fc" id="L239">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #27&quot;);

<span class="fc" id="L242">        test(field.newDfp(&quot;-0&quot;).add(field.newDfp(&quot;-0&quot;)), // adding zeros</span>
<span class="fc" id="L243">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Add #28&quot;);

<span class="fc" id="L246">        test(field.newDfp(&quot;1e-20&quot;).add(field.newDfp(&quot;0&quot;)), // adding zeros</span>
<span class="fc" id="L247">             field.newDfp(&quot;1e-20&quot;),</span>
             0, &quot;Add #29&quot;);

<span class="fc" id="L250">        test(field.newDfp(&quot;1e-40&quot;).add(field.newDfp(&quot;0&quot;)), // adding zeros</span>
<span class="fc" id="L251">             field.newDfp(&quot;1e-40&quot;),</span>
             0, &quot;Add #30&quot;);

<span class="fc" id="L254">        test(pinf.add(ninf), // adding infinities</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Add #31&quot;);

<span class="fc" id="L258">        test(ninf.add(pinf), // adding infinities</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Add #32&quot;);

<span class="fc" id="L262">        test(ninf.add(ninf), // adding infinities</span>
             ninf,
             0, &quot;Add #33&quot;);

<span class="fc" id="L266">        test(pinf.add(pinf), // adding infinities</span>
             pinf,
             0, &quot;Add #34&quot;);

<span class="fc" id="L270">        test(pinf.add(field.newDfp(&quot;0&quot;)), // adding infinities</span>
             pinf,
             0, &quot;Add #35&quot;);

<span class="fc" id="L274">        test(pinf.add(field.newDfp(&quot;-1e131071&quot;)), // adding infinities</span>
             pinf,
             0, &quot;Add #36&quot;);

<span class="fc" id="L278">        test(pinf.add(field.newDfp(&quot;1e131071&quot;)), // adding infinities</span>
             pinf,
             0, &quot;Add #37&quot;);

<span class="fc" id="L282">        test(field.newDfp(&quot;0&quot;).add(pinf), // adding infinities</span>
             pinf,
             0, &quot;Add #38&quot;);

<span class="fc" id="L286">        test(field.newDfp(&quot;-1e131071&quot;).add(pinf), // adding infinities</span>
             pinf,
             0, &quot;Add #39&quot;);

<span class="fc" id="L290">        test(field.newDfp(&quot;1e131071&quot;).add(pinf), // adding infinities</span>
             pinf,
             0, &quot;Add #40&quot;);

<span class="fc" id="L294">        test(ninf.add(field.newDfp(&quot;0&quot;)), // adding infinities</span>
             ninf,
             0, &quot;Add #41&quot;);

<span class="fc" id="L298">        test(ninf.add(field.newDfp(&quot;-1e131071&quot;)), // adding infinities</span>
             ninf,
             0, &quot;Add #42&quot;);

<span class="fc" id="L302">        test(ninf.add(field.newDfp(&quot;1e131071&quot;)), // adding infinities</span>
             ninf,
             0, &quot;Add #43&quot;);

<span class="fc" id="L306">        test(field.newDfp(&quot;0&quot;).add(ninf), // adding infinities</span>
             ninf,
             0, &quot;Add #44&quot;);

<span class="fc" id="L310">        test(field.newDfp(&quot;-1e131071&quot;).add(ninf), // adding infinities</span>
             ninf,
             0, &quot;Add #45&quot;);

<span class="fc" id="L314">        test(field.newDfp(&quot;1e131071&quot;).add(ninf), // adding infinities</span>
             ninf,
             0, &quot;Add #46&quot;);

<span class="fc" id="L318">        test(field.newDfp(&quot;9.9999999999999999999e131071&quot;).add(field.newDfp(&quot;5e131051&quot;)),  // overflow</span>
             pinf,
             DfpField.FLAG_OVERFLOW, &quot;Add #47&quot;);

<span class="fc" id="L322">        test(field.newDfp(&quot;9.9999999999999999999e131071&quot;).add(field.newDfp(&quot;4.9999999999999999999e131051&quot;)),  // overflow</span>
<span class="fc" id="L323">             field.newDfp(&quot;9.9999999999999999999e131071&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #48&quot;);

<span class="fc" id="L326">        test(nan.add(field.newDfp(&quot;1&quot;)),</span>
             nan,
             0, &quot;Add #49&quot;);

<span class="fc" id="L330">        test(field.newDfp(&quot;1&quot;).add(nan),</span>
             nan,
             0, &quot;Add #50&quot;);

<span class="fc" id="L334">        test(field.newDfp(&quot;12345678123456781234&quot;).add(field.newDfp(&quot;0.12345678123456781234&quot;)),</span>
<span class="fc" id="L335">             field.newDfp(&quot;12345678123456781234&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #51&quot;);

<span class="fc" id="L338">        test(field.newDfp(&quot;12345678123456781234&quot;).add(field.newDfp(&quot;123.45678123456781234&quot;)),</span>
<span class="fc" id="L339">             field.newDfp(&quot;12345678123456781357&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #52&quot;);

<span class="fc" id="L342">        test(field.newDfp(&quot;123.45678123456781234&quot;).add(field.newDfp(&quot;12345678123456781234&quot;)),</span>
<span class="fc" id="L343">             field.newDfp(&quot;12345678123456781357&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #53&quot;);

<span class="fc" id="L346">        test(field.newDfp(&quot;12345678123456781234&quot;).add(field.newDfp(&quot;.00001234567812345678&quot;)),</span>
<span class="fc" id="L347">             field.newDfp(&quot;12345678123456781234&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #54&quot;);

<span class="fc" id="L350">        test(field.newDfp(&quot;12345678123456781234&quot;).add(field.newDfp(&quot;.00000000123456781234&quot;)),</span>
<span class="fc" id="L351">             field.newDfp(&quot;12345678123456781234&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Add #55&quot;);

<span class="fc" id="L354">        test(field.newDfp(&quot;-0&quot;).add(field.newDfp(&quot;-0&quot;)),</span>
<span class="fc" id="L355">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Add #56&quot;);

<span class="fc" id="L358">        test(field.newDfp(&quot;0&quot;).add(field.newDfp(&quot;-0&quot;)),</span>
<span class="fc" id="L359">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #57&quot;);

<span class="fc" id="L362">        test(field.newDfp(&quot;-0&quot;).add(field.newDfp(&quot;0&quot;)),</span>
<span class="fc" id="L363">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #58&quot;);

<span class="fc" id="L366">        test(field.newDfp(&quot;0&quot;).add(field.newDfp(&quot;0&quot;)),</span>
<span class="fc" id="L367">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Add #59&quot;);
<span class="fc" id="L369">    }</span>

    ////////////////////////////////////////////////////////////////////////////////////////////////////////

    // Test comparisons

    // utility function to help test comparisons
    private void cmptst(Dfp a, Dfp b, String op, boolean result, double num)
    {
<span class="fc bfc" id="L378" title="All 2 branches covered.">        if (op == &quot;equal&quot;) {</span>
<span class="pc bpc" id="L379" title="1 of 2 branches missed.">            if (a.equals(b) != result) {</span>
<span class="nc" id="L380">                Assert.fail(&quot;assersion failed.  &quot;+op+&quot; compare #&quot;+num);</span>
            }
        }

<span class="fc bfc" id="L384" title="All 2 branches covered.">        if (op == &quot;unequal&quot;) {</span>
<span class="pc bpc" id="L385" title="1 of 2 branches missed.">            if (a.unequal(b) != result) {</span>
<span class="nc" id="L386">                Assert.fail(&quot;assersion failed.  &quot;+op+&quot; compare #&quot;+num);</span>
            }
        }

<span class="fc bfc" id="L390" title="All 2 branches covered.">        if (op == &quot;lessThan&quot;) {</span>
<span class="pc bpc" id="L391" title="1 of 2 branches missed.">            if (a.lessThan(b) != result) {</span>
<span class="nc" id="L392">                Assert.fail(&quot;assersion failed.  &quot;+op+&quot; compare #&quot;+num);</span>
            }
        }

<span class="fc bfc" id="L396" title="All 2 branches covered.">        if (op == &quot;greaterThan&quot;) {</span>
<span class="pc bpc" id="L397" title="1 of 2 branches missed.">            if (a.greaterThan(b) != result) {</span>
<span class="nc" id="L398">                Assert.fail(&quot;assersion failed.  &quot;+op+&quot; compare #&quot;+num);</span>
            }
        }
<span class="fc" id="L401">    }</span>

    @Test
    public void  testCompare()
    {
        // test equal() comparison
        // check zero vs. zero
<span class="fc" id="L408">        field.clearIEEEFlags();</span>

<span class="fc" id="L410">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;0&quot;), &quot;equal&quot;, true, 1);         // 0 == 0</span>
<span class="fc" id="L411">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-0&quot;), &quot;equal&quot;, true, 2);        // 0 == -0</span>
<span class="fc" id="L412">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;-0&quot;), &quot;equal&quot;, true, 3);       // -0 == -0</span>
<span class="fc" id="L413">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;0&quot;), &quot;equal&quot;, true, 4);        // -0 == 0</span>

        // check zero vs normal numbers

<span class="fc" id="L417">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1&quot;), &quot;equal&quot;, false, 5);         // 0 == 1</span>
<span class="fc" id="L418">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;0&quot;), &quot;equal&quot;, false, 6);         // 1 == 0</span>
<span class="fc" id="L419">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;0&quot;), &quot;equal&quot;, false, 7);        // -1 == 0</span>
<span class="fc" id="L420">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-1&quot;), &quot;equal&quot;, false, 8);        // 0 == -1</span>
<span class="fc" id="L421">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131072&quot;), &quot;equal&quot;, false, 9); // 0 == 1e-131072</span>
        // check flags
<span class="pc bpc" id="L423" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L424">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L427">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131078&quot;), &quot;equal&quot;, false, 10); // 0 == 1e-131078</span>

        // check flags  -- underflow should be set
<span class="pc bpc" id="L430" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != DfpField.FLAG_UNDERFLOW) {</span>
<span class="nc" id="L431">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L434">        field.clearIEEEFlags();</span>

<span class="fc" id="L436">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e+131071&quot;), &quot;equal&quot;, false, 11); // 0 == 1e+131071</span>

        // check zero vs infinities

<span class="fc" id="L440">        cmptst(field.newDfp(&quot;0&quot;), pinf, &quot;equal&quot;, false, 12);    // 0 == pinf</span>
<span class="fc" id="L441">        cmptst(field.newDfp(&quot;0&quot;), ninf, &quot;equal&quot;, false, 13);    // 0 == ninf</span>
<span class="fc" id="L442">        cmptst(field.newDfp(&quot;-0&quot;), pinf, &quot;equal&quot;, false, 14);   // -0 == pinf</span>
<span class="fc" id="L443">        cmptst(field.newDfp(&quot;-0&quot;), ninf, &quot;equal&quot;, false, 15);   // -0 == ninf</span>
<span class="fc" id="L444">        cmptst(pinf, field.newDfp(&quot;0&quot;), &quot;equal&quot;, false, 16);    // pinf == 0</span>
<span class="fc" id="L445">        cmptst(ninf, field.newDfp(&quot;0&quot;), &quot;equal&quot;, false, 17);    // ninf == 0</span>
<span class="fc" id="L446">        cmptst(pinf, field.newDfp(&quot;-0&quot;), &quot;equal&quot;, false, 18);   // pinf == -0</span>
<span class="fc" id="L447">        cmptst(ninf, field.newDfp(&quot;-0&quot;), &quot;equal&quot;, false, 19);   // ninf == -0</span>
<span class="fc" id="L448">        cmptst(ninf, pinf, &quot;equal&quot;, false, 19.10);     // ninf == pinf</span>
<span class="fc" id="L449">        cmptst(pinf, ninf, &quot;equal&quot;, false, 19.11);     // pinf == ninf</span>
<span class="fc" id="L450">        cmptst(pinf, pinf, &quot;equal&quot;, true, 19.12);     // pinf == pinf</span>
<span class="fc" id="L451">        cmptst(ninf, ninf, &quot;equal&quot;, true, 19.13);     // ninf == ninf</span>

        // check some normal numbers
<span class="fc" id="L454">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1&quot;), &quot;equal&quot;, true, 20);   // 1 == 1</span>
<span class="fc" id="L455">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;-1&quot;), &quot;equal&quot;, false, 21);   // 1 == -1</span>
<span class="fc" id="L456">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;-1&quot;), &quot;equal&quot;, true, 22);   // -1 == -1</span>
<span class="fc" id="L457">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;equal&quot;, false, 23);   // 1 == 1.0000000000000001</span>

        // The tests below checks to ensure that comparisons don't set FLAG_INEXACT
        // 100000 == 1.0000000000000001
<span class="fc" id="L461">        cmptst(field.newDfp(&quot;1e20&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;equal&quot;, false, 24);</span>
<span class="pc bpc" id="L462" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L463">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L466">        cmptst(field.newDfp(&quot;0.000001&quot;), field.newDfp(&quot;1e-6&quot;), &quot;equal&quot;, true, 25);</span>

        // check some nans -- nans shouldnt equal anything

<span class="fc" id="L470">        cmptst(snan, snan, &quot;equal&quot;, false, 27);</span>
<span class="fc" id="L471">        cmptst(qnan, qnan, &quot;equal&quot;, false, 28);</span>
<span class="fc" id="L472">        cmptst(snan, qnan, &quot;equal&quot;, false, 29);</span>
<span class="fc" id="L473">        cmptst(qnan, snan, &quot;equal&quot;, false, 30);</span>
<span class="fc" id="L474">        cmptst(qnan, field.newDfp(&quot;0&quot;), &quot;equal&quot;, false, 31);</span>
<span class="fc" id="L475">        cmptst(snan, field.newDfp(&quot;0&quot;), &quot;equal&quot;, false, 32);</span>
<span class="fc" id="L476">        cmptst(field.newDfp(&quot;0&quot;), snan, &quot;equal&quot;, false, 33);</span>
<span class="fc" id="L477">        cmptst(field.newDfp(&quot;0&quot;), qnan, &quot;equal&quot;, false, 34);</span>
<span class="fc" id="L478">        cmptst(qnan, pinf, &quot;equal&quot;, false, 35);</span>
<span class="fc" id="L479">        cmptst(snan, pinf, &quot;equal&quot;, false, 36);</span>
<span class="fc" id="L480">        cmptst(pinf, snan, &quot;equal&quot;, false, 37);</span>
<span class="fc" id="L481">        cmptst(pinf, qnan, &quot;equal&quot;, false, 38);</span>
<span class="fc" id="L482">        cmptst(qnan, ninf, &quot;equal&quot;, false, 39);</span>
<span class="fc" id="L483">        cmptst(snan, ninf, &quot;equal&quot;, false, 40);</span>
<span class="fc" id="L484">        cmptst(ninf, snan, &quot;equal&quot;, false, 41);</span>
<span class="fc" id="L485">        cmptst(ninf, qnan, &quot;equal&quot;, false, 42);</span>
<span class="fc" id="L486">        cmptst(qnan, field.newDfp(&quot;-1&quot;), &quot;equal&quot;, false, 43);</span>
<span class="fc" id="L487">        cmptst(snan, field.newDfp(&quot;-1&quot;), &quot;equal&quot;, false, 44);</span>
<span class="fc" id="L488">        cmptst(field.newDfp(&quot;-1&quot;), snan, &quot;equal&quot;, false, 45);</span>
<span class="fc" id="L489">        cmptst(field.newDfp(&quot;-1&quot;), qnan, &quot;equal&quot;, false, 46);</span>
<span class="fc" id="L490">        cmptst(qnan, field.newDfp(&quot;1&quot;), &quot;equal&quot;, false, 47);</span>
<span class="fc" id="L491">        cmptst(snan, field.newDfp(&quot;1&quot;), &quot;equal&quot;, false, 48);</span>
<span class="fc" id="L492">        cmptst(field.newDfp(&quot;1&quot;), snan, &quot;equal&quot;, false, 49);</span>
<span class="fc" id="L493">        cmptst(field.newDfp(&quot;1&quot;), qnan, &quot;equal&quot;, false, 50);</span>
<span class="fc" id="L494">        cmptst(snan.negate(), snan, &quot;equal&quot;, false, 51);</span>
<span class="fc" id="L495">        cmptst(qnan.negate(), qnan, &quot;equal&quot;, false, 52);</span>

        //
        // Tests for un equal  -- do it all over again
        //

<span class="fc" id="L501">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;0&quot;), &quot;unequal&quot;, false, 1);         // 0 == 0</span>
<span class="fc" id="L502">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-0&quot;), &quot;unequal&quot;, false, 2);        // 0 == -0</span>
<span class="fc" id="L503">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;-0&quot;), &quot;unequal&quot;, false, 3);       // -0 == -0</span>
<span class="fc" id="L504">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;0&quot;), &quot;unequal&quot;, false, 4);        // -0 == 0</span>

        // check zero vs normal numbers

<span class="fc" id="L508">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1&quot;), &quot;unequal&quot;, true, 5);         // 0 == 1</span>
<span class="fc" id="L509">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;0&quot;), &quot;unequal&quot;, true, 6);         // 1 == 0</span>
<span class="fc" id="L510">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;0&quot;), &quot;unequal&quot;, true, 7);        // -1 == 0</span>
<span class="fc" id="L511">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-1&quot;), &quot;unequal&quot;, true, 8);        // 0 == -1</span>
<span class="fc" id="L512">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131072&quot;), &quot;unequal&quot;, true, 9); // 0 == 1e-131072</span>
        // check flags
<span class="pc bpc" id="L514" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L515">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L518">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131078&quot;), &quot;unequal&quot;, true, 10); // 0 == 1e-131078</span>

        // check flags  -- underflow should be set
<span class="pc bpc" id="L521" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != DfpField.FLAG_UNDERFLOW) {</span>
<span class="nc" id="L522">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L525">        field.clearIEEEFlags();</span>

<span class="fc" id="L527">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e+131071&quot;), &quot;unequal&quot;, true, 11); // 0 == 1e+131071</span>

        // check zero vs infinities

<span class="fc" id="L531">        cmptst(field.newDfp(&quot;0&quot;), pinf, &quot;unequal&quot;, true, 12);    // 0 == pinf</span>
<span class="fc" id="L532">        cmptst(field.newDfp(&quot;0&quot;), ninf, &quot;unequal&quot;, true, 13);    // 0 == ninf</span>
<span class="fc" id="L533">        cmptst(field.newDfp(&quot;-0&quot;), pinf, &quot;unequal&quot;, true, 14);   // -0 == pinf</span>
<span class="fc" id="L534">        cmptst(field.newDfp(&quot;-0&quot;), ninf, &quot;unequal&quot;, true, 15);   // -0 == ninf</span>
<span class="fc" id="L535">        cmptst(pinf, field.newDfp(&quot;0&quot;), &quot;unequal&quot;, true, 16);    // pinf == 0</span>
<span class="fc" id="L536">        cmptst(ninf, field.newDfp(&quot;0&quot;), &quot;unequal&quot;, true, 17);    // ninf == 0</span>
<span class="fc" id="L537">        cmptst(pinf, field.newDfp(&quot;-0&quot;), &quot;unequal&quot;, true, 18);   // pinf == -0</span>
<span class="fc" id="L538">        cmptst(ninf, field.newDfp(&quot;-0&quot;), &quot;unequal&quot;, true, 19);   // ninf == -0</span>
<span class="fc" id="L539">        cmptst(ninf, pinf, &quot;unequal&quot;, true, 19.10);     // ninf == pinf</span>
<span class="fc" id="L540">        cmptst(pinf, ninf, &quot;unequal&quot;, true, 19.11);     // pinf == ninf</span>
<span class="fc" id="L541">        cmptst(pinf, pinf, &quot;unequal&quot;, false, 19.12);     // pinf == pinf</span>
<span class="fc" id="L542">        cmptst(ninf, ninf, &quot;unequal&quot;, false, 19.13);     // ninf == ninf</span>

        // check some normal numbers
<span class="fc" id="L545">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1&quot;), &quot;unequal&quot;, false, 20);   // 1 == 1</span>
<span class="fc" id="L546">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;-1&quot;), &quot;unequal&quot;, true, 21);   // 1 == -1</span>
<span class="fc" id="L547">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;-1&quot;), &quot;unequal&quot;, false, 22);   // -1 == -1</span>
<span class="fc" id="L548">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;unequal&quot;, true, 23);   // 1 == 1.0000000000000001</span>

        // The tests below checks to ensure that comparisons don't set FLAG_INEXACT
        // 100000 == 1.0000000000000001
<span class="fc" id="L552">        cmptst(field.newDfp(&quot;1e20&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;unequal&quot;, true, 24);</span>
<span class="pc bpc" id="L553" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L554">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L557">        cmptst(field.newDfp(&quot;0.000001&quot;), field.newDfp(&quot;1e-6&quot;), &quot;unequal&quot;, false, 25);</span>

        // check some nans -- nans shouldnt be unequal to anything

<span class="fc" id="L561">        cmptst(snan, snan, &quot;unequal&quot;, false, 27);</span>
<span class="fc" id="L562">        cmptst(qnan, qnan, &quot;unequal&quot;, false, 28);</span>
<span class="fc" id="L563">        cmptst(snan, qnan, &quot;unequal&quot;, false, 29);</span>
<span class="fc" id="L564">        cmptst(qnan, snan, &quot;unequal&quot;, false, 30);</span>
<span class="fc" id="L565">        cmptst(qnan, field.newDfp(&quot;0&quot;), &quot;unequal&quot;, false, 31);</span>
<span class="fc" id="L566">        cmptst(snan, field.newDfp(&quot;0&quot;), &quot;unequal&quot;, false, 32);</span>
<span class="fc" id="L567">        cmptst(field.newDfp(&quot;0&quot;), snan, &quot;unequal&quot;, false, 33);</span>
<span class="fc" id="L568">        cmptst(field.newDfp(&quot;0&quot;), qnan, &quot;unequal&quot;, false, 34);</span>
<span class="fc" id="L569">        cmptst(qnan, pinf, &quot;unequal&quot;, false, 35);</span>
<span class="fc" id="L570">        cmptst(snan, pinf, &quot;unequal&quot;, false, 36);</span>
<span class="fc" id="L571">        cmptst(pinf, snan, &quot;unequal&quot;, false, 37);</span>
<span class="fc" id="L572">        cmptst(pinf, qnan, &quot;unequal&quot;, false, 38);</span>
<span class="fc" id="L573">        cmptst(qnan, ninf, &quot;unequal&quot;, false, 39);</span>
<span class="fc" id="L574">        cmptst(snan, ninf, &quot;unequal&quot;, false, 40);</span>
<span class="fc" id="L575">        cmptst(ninf, snan, &quot;unequal&quot;, false, 41);</span>
<span class="fc" id="L576">        cmptst(ninf, qnan, &quot;unequal&quot;, false, 42);</span>
<span class="fc" id="L577">        cmptst(qnan, field.newDfp(&quot;-1&quot;), &quot;unequal&quot;, false, 43);</span>
<span class="fc" id="L578">        cmptst(snan, field.newDfp(&quot;-1&quot;), &quot;unequal&quot;, false, 44);</span>
<span class="fc" id="L579">        cmptst(field.newDfp(&quot;-1&quot;), snan, &quot;unequal&quot;, false, 45);</span>
<span class="fc" id="L580">        cmptst(field.newDfp(&quot;-1&quot;), qnan, &quot;unequal&quot;, false, 46);</span>
<span class="fc" id="L581">        cmptst(qnan, field.newDfp(&quot;1&quot;), &quot;unequal&quot;, false, 47);</span>
<span class="fc" id="L582">        cmptst(snan, field.newDfp(&quot;1&quot;), &quot;unequal&quot;, false, 48);</span>
<span class="fc" id="L583">        cmptst(field.newDfp(&quot;1&quot;), snan, &quot;unequal&quot;, false, 49);</span>
<span class="fc" id="L584">        cmptst(field.newDfp(&quot;1&quot;), qnan, &quot;unequal&quot;, false, 50);</span>
<span class="fc" id="L585">        cmptst(snan.negate(), snan, &quot;unequal&quot;, false, 51);</span>
<span class="fc" id="L586">        cmptst(qnan.negate(), qnan, &quot;unequal&quot;, false, 52);</span>

<span class="pc bpc" id="L588" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L589">            Assert.fail(&quot;assersion failed.  compare unequal flags = &quot;+field.getIEEEFlags());</span>
        }

        //
        // Tests for lessThan  -- do it all over again
        //

<span class="fc" id="L596">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, false, 1);         // 0 &lt; 0</span>
<span class="fc" id="L597">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-0&quot;), &quot;lessThan&quot;, false, 2);        // 0 &lt; -0</span>
<span class="fc" id="L598">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;-0&quot;), &quot;lessThan&quot;, false, 3);       // -0 &lt; -0</span>
<span class="fc" id="L599">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, false, 4);        // -0 &lt; 0</span>

        // check zero vs normal numbers

<span class="fc" id="L603">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1&quot;), &quot;lessThan&quot;, true, 5);         // 0 &lt; 1</span>
<span class="fc" id="L604">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, false, 6);         // 1 &lt; 0</span>
<span class="fc" id="L605">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, true, 7);        // -1 &lt; 0</span>
<span class="fc" id="L606">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-1&quot;), &quot;lessThan&quot;, false, 8);        // 0 &lt; -1</span>
<span class="fc" id="L607">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131072&quot;), &quot;lessThan&quot;, true, 9); // 0 &lt; 1e-131072</span>
        // check flags
<span class="pc bpc" id="L609" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L610">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L613">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131078&quot;), &quot;lessThan&quot;, true, 10); // 0 &lt; 1e-131078</span>

        // check flags  -- underflow should be set
<span class="pc bpc" id="L616" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != DfpField.FLAG_UNDERFLOW) {</span>
<span class="nc" id="L617">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }
<span class="fc" id="L619">        field.clearIEEEFlags();</span>

<span class="fc" id="L621">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e+131071&quot;), &quot;lessThan&quot;, true, 11); // 0 &lt; 1e+131071</span>

        // check zero vs infinities

<span class="fc" id="L625">        cmptst(field.newDfp(&quot;0&quot;), pinf, &quot;lessThan&quot;, true, 12);    // 0 &lt; pinf</span>
<span class="fc" id="L626">        cmptst(field.newDfp(&quot;0&quot;), ninf, &quot;lessThan&quot;, false, 13);    // 0 &lt; ninf</span>
<span class="fc" id="L627">        cmptst(field.newDfp(&quot;-0&quot;), pinf, &quot;lessThan&quot;, true, 14);   // -0 &lt; pinf</span>
<span class="fc" id="L628">        cmptst(field.newDfp(&quot;-0&quot;), ninf, &quot;lessThan&quot;, false, 15);   // -0 &lt; ninf</span>
<span class="fc" id="L629">        cmptst(pinf, field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, false, 16);    // pinf &lt; 0</span>
<span class="fc" id="L630">        cmptst(ninf, field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, true, 17);    // ninf &lt; 0</span>
<span class="fc" id="L631">        cmptst(pinf, field.newDfp(&quot;-0&quot;), &quot;lessThan&quot;, false, 18);   // pinf &lt; -0</span>
<span class="fc" id="L632">        cmptst(ninf, field.newDfp(&quot;-0&quot;), &quot;lessThan&quot;, true, 19);   // ninf &lt; -0</span>
<span class="fc" id="L633">        cmptst(ninf, pinf, &quot;lessThan&quot;, true, 19.10);     // ninf &lt; pinf</span>
<span class="fc" id="L634">        cmptst(pinf, ninf, &quot;lessThan&quot;, false, 19.11);     // pinf &lt; ninf</span>
<span class="fc" id="L635">        cmptst(pinf, pinf, &quot;lessThan&quot;, false, 19.12);     // pinf &lt; pinf</span>
<span class="fc" id="L636">        cmptst(ninf, ninf, &quot;lessThan&quot;, false, 19.13);     // ninf &lt; ninf</span>

        // check some normal numbers
<span class="fc" id="L639">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1&quot;), &quot;lessThan&quot;, false, 20);   // 1 &lt; 1</span>
<span class="fc" id="L640">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;-1&quot;), &quot;lessThan&quot;, false, 21);   // 1 &lt; -1</span>
<span class="fc" id="L641">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;-1&quot;), &quot;lessThan&quot;, false, 22);   // -1 &lt; -1</span>
<span class="fc" id="L642">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;lessThan&quot;, true, 23);   // 1 &lt; 1.0000000000000001</span>

        // The tests below checks to ensure that comparisons don't set FLAG_INEXACT
        // 100000 &lt; 1.0000000000000001
<span class="fc" id="L646">        cmptst(field.newDfp(&quot;1e20&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;lessThan&quot;, false, 24);</span>
<span class="pc bpc" id="L647" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L648">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L651">        cmptst(field.newDfp(&quot;0.000001&quot;), field.newDfp(&quot;1e-6&quot;), &quot;lessThan&quot;, false, 25);</span>

        // check some nans -- nans shouldnt be lessThan to anything
<span class="fc" id="L654">        cmptst(snan, snan, &quot;lessThan&quot;, false, 27);</span>
<span class="fc" id="L655">        cmptst(qnan, qnan, &quot;lessThan&quot;, false, 28);</span>
<span class="fc" id="L656">        cmptst(snan, qnan, &quot;lessThan&quot;, false, 29);</span>
<span class="fc" id="L657">        cmptst(qnan, snan, &quot;lessThan&quot;, false, 30);</span>
<span class="fc" id="L658">        cmptst(qnan, field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, false, 31);</span>
<span class="fc" id="L659">        cmptst(snan, field.newDfp(&quot;0&quot;), &quot;lessThan&quot;, false, 32);</span>
<span class="fc" id="L660">        cmptst(field.newDfp(&quot;0&quot;), snan, &quot;lessThan&quot;, false, 33);</span>
<span class="fc" id="L661">        cmptst(field.newDfp(&quot;0&quot;), qnan, &quot;lessThan&quot;, false, 34);</span>
<span class="fc" id="L662">        cmptst(qnan, pinf, &quot;lessThan&quot;, false, 35);</span>
<span class="fc" id="L663">        cmptst(snan, pinf, &quot;lessThan&quot;, false, 36);</span>
<span class="fc" id="L664">        cmptst(pinf, snan, &quot;lessThan&quot;, false, 37);</span>
<span class="fc" id="L665">        cmptst(pinf, qnan, &quot;lessThan&quot;, false, 38);</span>
<span class="fc" id="L666">        cmptst(qnan, ninf, &quot;lessThan&quot;, false, 39);</span>
<span class="fc" id="L667">        cmptst(snan, ninf, &quot;lessThan&quot;, false, 40);</span>
<span class="fc" id="L668">        cmptst(ninf, snan, &quot;lessThan&quot;, false, 41);</span>
<span class="fc" id="L669">        cmptst(ninf, qnan, &quot;lessThan&quot;, false, 42);</span>
<span class="fc" id="L670">        cmptst(qnan, field.newDfp(&quot;-1&quot;), &quot;lessThan&quot;, false, 43);</span>
<span class="fc" id="L671">        cmptst(snan, field.newDfp(&quot;-1&quot;), &quot;lessThan&quot;, false, 44);</span>
<span class="fc" id="L672">        cmptst(field.newDfp(&quot;-1&quot;), snan, &quot;lessThan&quot;, false, 45);</span>
<span class="fc" id="L673">        cmptst(field.newDfp(&quot;-1&quot;), qnan, &quot;lessThan&quot;, false, 46);</span>
<span class="fc" id="L674">        cmptst(qnan, field.newDfp(&quot;1&quot;), &quot;lessThan&quot;, false, 47);</span>
<span class="fc" id="L675">        cmptst(snan, field.newDfp(&quot;1&quot;), &quot;lessThan&quot;, false, 48);</span>
<span class="fc" id="L676">        cmptst(field.newDfp(&quot;1&quot;), snan, &quot;lessThan&quot;, false, 49);</span>
<span class="fc" id="L677">        cmptst(field.newDfp(&quot;1&quot;), qnan, &quot;lessThan&quot;, false, 50);</span>
<span class="fc" id="L678">        cmptst(snan.negate(), snan, &quot;lessThan&quot;, false, 51);</span>
<span class="fc" id="L679">        cmptst(qnan.negate(), qnan, &quot;lessThan&quot;, false, 52);</span>

        //lessThan compares with nans should raise FLAG_INVALID
<span class="pc bpc" id="L682" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != DfpField.FLAG_INVALID) {</span>
<span class="nc" id="L683">            Assert.fail(&quot;assersion failed.  compare lessThan flags = &quot;+field.getIEEEFlags());</span>
        }
<span class="fc" id="L685">        field.clearIEEEFlags();</span>

        //
        // Tests for greaterThan  -- do it all over again
        //

<span class="fc" id="L691">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, false, 1);         // 0 &gt; 0</span>
<span class="fc" id="L692">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-0&quot;), &quot;greaterThan&quot;, false, 2);        // 0 &gt; -0</span>
<span class="fc" id="L693">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;-0&quot;), &quot;greaterThan&quot;, false, 3);       // -0 &gt; -0</span>
<span class="fc" id="L694">        cmptst(field.newDfp(&quot;-0&quot;), field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, false, 4);        // -0 &gt; 0</span>

        // check zero vs normal numbers

<span class="fc" id="L698">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1&quot;), &quot;greaterThan&quot;, false, 5);         // 0 &gt; 1</span>
<span class="fc" id="L699">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, true, 6);         // 1 &gt; 0</span>
<span class="fc" id="L700">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, false, 7);        // -1 &gt; 0</span>
<span class="fc" id="L701">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;-1&quot;), &quot;greaterThan&quot;, true, 8);        // 0 &gt; -1</span>
<span class="fc" id="L702">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131072&quot;), &quot;greaterThan&quot;, false, 9); // 0 &gt; 1e-131072</span>
        // check flags
<span class="pc bpc" id="L704" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L705">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L708">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e-131078&quot;), &quot;greaterThan&quot;, false, 10); // 0 &gt; 1e-131078</span>

        // check flags  -- underflow should be set
<span class="pc bpc" id="L711" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != DfpField.FLAG_UNDERFLOW) {</span>
<span class="nc" id="L712">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }
<span class="fc" id="L714">        field.clearIEEEFlags();</span>

<span class="fc" id="L716">        cmptst(field.newDfp(&quot;0&quot;), field.newDfp(&quot;1e+131071&quot;), &quot;greaterThan&quot;, false, 11); // 0 &gt; 1e+131071</span>

        // check zero vs infinities

<span class="fc" id="L720">        cmptst(field.newDfp(&quot;0&quot;), pinf, &quot;greaterThan&quot;, false, 12);    // 0 &gt; pinf</span>
<span class="fc" id="L721">        cmptst(field.newDfp(&quot;0&quot;), ninf, &quot;greaterThan&quot;, true, 13);    // 0 &gt; ninf</span>
<span class="fc" id="L722">        cmptst(field.newDfp(&quot;-0&quot;), pinf, &quot;greaterThan&quot;, false, 14);   // -0 &gt; pinf</span>
<span class="fc" id="L723">        cmptst(field.newDfp(&quot;-0&quot;), ninf, &quot;greaterThan&quot;, true, 15);   // -0 &gt; ninf</span>
<span class="fc" id="L724">        cmptst(pinf, field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, true, 16);    // pinf &gt; 0</span>
<span class="fc" id="L725">        cmptst(ninf, field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, false, 17);    // ninf &gt; 0</span>
<span class="fc" id="L726">        cmptst(pinf, field.newDfp(&quot;-0&quot;), &quot;greaterThan&quot;, true, 18);   // pinf &gt; -0</span>
<span class="fc" id="L727">        cmptst(ninf, field.newDfp(&quot;-0&quot;), &quot;greaterThan&quot;, false, 19);   // ninf &gt; -0</span>
<span class="fc" id="L728">        cmptst(ninf, pinf, &quot;greaterThan&quot;, false, 19.10);     // ninf &gt; pinf</span>
<span class="fc" id="L729">        cmptst(pinf, ninf, &quot;greaterThan&quot;, true, 19.11);     // pinf &gt; ninf</span>
<span class="fc" id="L730">        cmptst(pinf, pinf, &quot;greaterThan&quot;, false, 19.12);     // pinf &gt; pinf</span>
<span class="fc" id="L731">        cmptst(ninf, ninf, &quot;greaterThan&quot;, false, 19.13);     // ninf &gt; ninf</span>

        // check some normal numbers
<span class="fc" id="L734">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1&quot;), &quot;greaterThan&quot;, false, 20);   // 1 &gt; 1</span>
<span class="fc" id="L735">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;-1&quot;), &quot;greaterThan&quot;, true, 21);   // 1 &gt; -1</span>
<span class="fc" id="L736">        cmptst(field.newDfp(&quot;-1&quot;), field.newDfp(&quot;-1&quot;), &quot;greaterThan&quot;, false, 22);   // -1 &gt; -1</span>
<span class="fc" id="L737">        cmptst(field.newDfp(&quot;1&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;greaterThan&quot;, false, 23);   // 1 &gt; 1.0000000000000001</span>

        // The tests below checks to ensure that comparisons don't set FLAG_INEXACT
        // 100000 &gt; 1.0000000000000001
<span class="fc" id="L741">        cmptst(field.newDfp(&quot;1e20&quot;), field.newDfp(&quot;1.0000000000000001&quot;), &quot;greaterThan&quot;, true, 24);</span>
<span class="pc bpc" id="L742" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != 0) {</span>
<span class="nc" id="L743">            Assert.fail(&quot;assersion failed.  compare flags = &quot;+field.getIEEEFlags());</span>
        }

<span class="fc" id="L746">        cmptst(field.newDfp(&quot;0.000001&quot;), field.newDfp(&quot;1e-6&quot;), &quot;greaterThan&quot;, false, 25);</span>

        // check some nans -- nans shouldnt be greaterThan to anything
<span class="fc" id="L749">        cmptst(snan, snan, &quot;greaterThan&quot;, false, 27);</span>
<span class="fc" id="L750">        cmptst(qnan, qnan, &quot;greaterThan&quot;, false, 28);</span>
<span class="fc" id="L751">        cmptst(snan, qnan, &quot;greaterThan&quot;, false, 29);</span>
<span class="fc" id="L752">        cmptst(qnan, snan, &quot;greaterThan&quot;, false, 30);</span>
<span class="fc" id="L753">        cmptst(qnan, field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, false, 31);</span>
<span class="fc" id="L754">        cmptst(snan, field.newDfp(&quot;0&quot;), &quot;greaterThan&quot;, false, 32);</span>
<span class="fc" id="L755">        cmptst(field.newDfp(&quot;0&quot;), snan, &quot;greaterThan&quot;, false, 33);</span>
<span class="fc" id="L756">        cmptst(field.newDfp(&quot;0&quot;), qnan, &quot;greaterThan&quot;, false, 34);</span>
<span class="fc" id="L757">        cmptst(qnan, pinf, &quot;greaterThan&quot;, false, 35);</span>
<span class="fc" id="L758">        cmptst(snan, pinf, &quot;greaterThan&quot;, false, 36);</span>
<span class="fc" id="L759">        cmptst(pinf, snan, &quot;greaterThan&quot;, false, 37);</span>
<span class="fc" id="L760">        cmptst(pinf, qnan, &quot;greaterThan&quot;, false, 38);</span>
<span class="fc" id="L761">        cmptst(qnan, ninf, &quot;greaterThan&quot;, false, 39);</span>
<span class="fc" id="L762">        cmptst(snan, ninf, &quot;greaterThan&quot;, false, 40);</span>
<span class="fc" id="L763">        cmptst(ninf, snan, &quot;greaterThan&quot;, false, 41);</span>
<span class="fc" id="L764">        cmptst(ninf, qnan, &quot;greaterThan&quot;, false, 42);</span>
<span class="fc" id="L765">        cmptst(qnan, field.newDfp(&quot;-1&quot;), &quot;greaterThan&quot;, false, 43);</span>
<span class="fc" id="L766">        cmptst(snan, field.newDfp(&quot;-1&quot;), &quot;greaterThan&quot;, false, 44);</span>
<span class="fc" id="L767">        cmptst(field.newDfp(&quot;-1&quot;), snan, &quot;greaterThan&quot;, false, 45);</span>
<span class="fc" id="L768">        cmptst(field.newDfp(&quot;-1&quot;), qnan, &quot;greaterThan&quot;, false, 46);</span>
<span class="fc" id="L769">        cmptst(qnan, field.newDfp(&quot;1&quot;), &quot;greaterThan&quot;, false, 47);</span>
<span class="fc" id="L770">        cmptst(snan, field.newDfp(&quot;1&quot;), &quot;greaterThan&quot;, false, 48);</span>
<span class="fc" id="L771">        cmptst(field.newDfp(&quot;1&quot;), snan, &quot;greaterThan&quot;, false, 49);</span>
<span class="fc" id="L772">        cmptst(field.newDfp(&quot;1&quot;), qnan, &quot;greaterThan&quot;, false, 50);</span>
<span class="fc" id="L773">        cmptst(snan.negate(), snan, &quot;greaterThan&quot;, false, 51);</span>
<span class="fc" id="L774">        cmptst(qnan.negate(), qnan, &quot;greaterThan&quot;, false, 52);</span>

        //greaterThan compares with nans should raise FLAG_INVALID
<span class="pc bpc" id="L777" title="1 of 2 branches missed.">        if (field.getIEEEFlags() != DfpField.FLAG_INVALID) {</span>
<span class="nc" id="L778">            Assert.fail(&quot;assersion failed.  compare greaterThan flags = &quot;+field.getIEEEFlags());</span>
        }
<span class="fc" id="L780">        field.clearIEEEFlags();</span>
<span class="fc" id="L781">    }</span>

    //
    // Test multiplication
    //
    @Test
    public void testMultiply()
    {
<span class="fc" id="L789">        test(field.newDfp(&quot;1&quot;).multiply(field.newDfp(&quot;1&quot;)),      // Basic tests   1*1 = 1</span>
<span class="fc" id="L790">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Multiply #1&quot;);

<span class="fc" id="L793">        test(field.newDfp(&quot;1&quot;).multiply(1),             // Basic tests   1*1 = 1</span>
<span class="fc" id="L794">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Multiply #2&quot;);

<span class="fc" id="L797">        test(field.newDfp(&quot;-1&quot;).multiply(field.newDfp(&quot;1&quot;)),     // Basic tests   -1*1 = -1</span>
<span class="fc" id="L798">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;Multiply #3&quot;);

<span class="fc" id="L801">        test(field.newDfp(&quot;-1&quot;).multiply(1),            // Basic tests   -1*1 = -1</span>
<span class="fc" id="L802">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;Multiply #4&quot;);

        // basic tests with integers
<span class="fc" id="L806">        test(field.newDfp(&quot;2&quot;).multiply(field.newDfp(&quot;3&quot;)),</span>
<span class="fc" id="L807">             field.newDfp(&quot;6&quot;),</span>
             0, &quot;Multiply #5&quot;);

<span class="fc" id="L810">        test(field.newDfp(&quot;2&quot;).multiply(3),</span>
<span class="fc" id="L811">             field.newDfp(&quot;6&quot;),</span>
             0, &quot;Multiply #6&quot;);

<span class="fc" id="L814">        test(field.newDfp(&quot;-2&quot;).multiply(field.newDfp(&quot;3&quot;)),</span>
<span class="fc" id="L815">             field.newDfp(&quot;-6&quot;),</span>
             0, &quot;Multiply #7&quot;);

<span class="fc" id="L818">        test(field.newDfp(&quot;-2&quot;).multiply(3),</span>
<span class="fc" id="L819">             field.newDfp(&quot;-6&quot;),</span>
             0, &quot;Multiply #8&quot;);

<span class="fc" id="L822">        test(field.newDfp(&quot;2&quot;).multiply(field.newDfp(&quot;-3&quot;)),</span>
<span class="fc" id="L823">             field.newDfp(&quot;-6&quot;),</span>
             0, &quot;Multiply #9&quot;);

<span class="fc" id="L826">        test(field.newDfp(&quot;-2&quot;).multiply(field.newDfp(&quot;-3&quot;)),</span>
<span class="fc" id="L827">             field.newDfp(&quot;6&quot;),</span>
             0, &quot;Multiply #10&quot;);

        //multiply by zero

<span class="fc" id="L832">        test(field.newDfp(&quot;-2&quot;).multiply(field.newDfp(&quot;0&quot;)),</span>
<span class="fc" id="L833">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Multiply #11&quot;);

<span class="fc" id="L836">        test(field.newDfp(&quot;-2&quot;).multiply(0),</span>
<span class="fc" id="L837">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Multiply #12&quot;);

<span class="fc" id="L840">        test(field.newDfp(&quot;2&quot;).multiply(field.newDfp(&quot;0&quot;)),</span>
<span class="fc" id="L841">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Multiply #13&quot;);

<span class="fc" id="L844">        test(field.newDfp(&quot;2&quot;).multiply(0),</span>
<span class="fc" id="L845">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Multiply #14&quot;);

<span class="fc" id="L848">        test(field.newDfp(&quot;2&quot;).multiply(pinf),</span>
             pinf,
             0, &quot;Multiply #15&quot;);

<span class="fc" id="L852">        test(field.newDfp(&quot;2&quot;).multiply(ninf),</span>
             ninf,
             0, &quot;Multiply #16&quot;);

<span class="fc" id="L856">        test(field.newDfp(&quot;-2&quot;).multiply(pinf),</span>
             ninf,
             0, &quot;Multiply #17&quot;);

<span class="fc" id="L860">        test(field.newDfp(&quot;-2&quot;).multiply(ninf),</span>
             pinf,
             0, &quot;Multiply #18&quot;);

<span class="fc" id="L864">        test(ninf.multiply(field.newDfp(&quot;-2&quot;)),</span>
             pinf,
             0, &quot;Multiply #18.1&quot;);

<span class="fc" id="L868">        test(field.newDfp(&quot;5e131071&quot;).multiply(2),</span>
             pinf,
             DfpField.FLAG_OVERFLOW, &quot;Multiply #19&quot;);

<span class="fc" id="L872">        test(field.newDfp(&quot;5e131071&quot;).multiply(field.newDfp(&quot;1.999999999999999&quot;)),</span>
<span class="fc" id="L873">             field.newDfp(&quot;9.9999999999999950000e131071&quot;),</span>
             0, &quot;Multiply #20&quot;);

<span class="fc" id="L876">        test(field.newDfp(&quot;-5e131071&quot;).multiply(2),</span>
             ninf,
             DfpField.FLAG_OVERFLOW, &quot;Multiply #22&quot;);

<span class="fc" id="L880">        test(field.newDfp(&quot;-5e131071&quot;).multiply(field.newDfp(&quot;1.999999999999999&quot;)),</span>
<span class="fc" id="L881">             field.newDfp(&quot;-9.9999999999999950000e131071&quot;),</span>
             0, &quot;Multiply #23&quot;);

<span class="fc" id="L884">        test(field.newDfp(&quot;1e-65539&quot;).multiply(field.newDfp(&quot;1e-65539&quot;)),</span>
<span class="fc" id="L885">             field.newDfp(&quot;1e-131078&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;Multiply #24&quot;);

<span class="fc" id="L888">        test(field.newDfp(&quot;1&quot;).multiply(nan),</span>
             nan,
             0, &quot;Multiply #25&quot;);

<span class="fc" id="L892">        test(nan.multiply(field.newDfp(&quot;1&quot;)),</span>
             nan,
             0, &quot;Multiply #26&quot;);

<span class="fc" id="L896">        test(nan.multiply(pinf),</span>
             nan,
             0, &quot;Multiply #27&quot;);

<span class="fc" id="L900">        test(pinf.multiply(nan),</span>
             nan,
             0, &quot;Multiply #27&quot;);

<span class="fc" id="L904">        test(pinf.multiply(field.newDfp(&quot;0&quot;)),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Multiply #28&quot;);

<span class="fc" id="L908">        test(field.newDfp(&quot;0&quot;).multiply(pinf),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Multiply #29&quot;);

<span class="fc" id="L912">        test(pinf.multiply(pinf),</span>
             pinf,
             0, &quot;Multiply #30&quot;);

<span class="fc" id="L916">        test(ninf.multiply(pinf),</span>
             ninf,
             0, &quot;Multiply #31&quot;);

<span class="fc" id="L920">        test(pinf.multiply(ninf),</span>
             ninf,
             0, &quot;Multiply #32&quot;);

<span class="fc" id="L924">        test(ninf.multiply(ninf),</span>
             pinf,
             0, &quot;Multiply #33&quot;);

<span class="fc" id="L928">        test(pinf.multiply(1),</span>
             pinf,
             0, &quot;Multiply #34&quot;);

<span class="fc" id="L932">        test(pinf.multiply(0),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Multiply #35&quot;);

<span class="fc" id="L936">        test(nan.multiply(1),</span>
             nan,
             0, &quot;Multiply #36&quot;);

<span class="fc" id="L940">        test(field.newDfp(&quot;1&quot;).multiply(10000),</span>
<span class="fc" id="L941">             field.newDfp(&quot;10000&quot;),</span>
             0, &quot;Multiply #37&quot;);

<span class="fc" id="L944">        test(field.newDfp(&quot;2&quot;).multiply(1000000),</span>
<span class="fc" id="L945">             field.newDfp(&quot;2000000&quot;),</span>
             0, &quot;Multiply #38&quot;);

<span class="fc" id="L948">        test(field.newDfp(&quot;1&quot;).multiply(-1),</span>
<span class="fc" id="L949">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;Multiply #39&quot;);
<span class="fc" id="L951">    }</span>

    @Test
    public void testDivide()
    {
<span class="fc" id="L956">        test(field.newDfp(&quot;1&quot;).divide(nan),      // divide by NaN = NaN</span>
             nan,
             0, &quot;Divide #1&quot;);

<span class="fc" id="L960">        test(nan.divide(field.newDfp(&quot;1&quot;)),      // NaN / number = NaN</span>
             nan,
             0, &quot;Divide #2&quot;);

<span class="fc" id="L964">        test(pinf.divide(field.newDfp(&quot;1&quot;)),</span>
             pinf,
             0, &quot;Divide #3&quot;);

<span class="fc" id="L968">        test(pinf.divide(field.newDfp(&quot;-1&quot;)),</span>
             ninf,
             0, &quot;Divide #4&quot;);

<span class="fc" id="L972">        test(pinf.divide(pinf),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Divide #5&quot;);

<span class="fc" id="L976">        test(ninf.divide(pinf),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Divide #6&quot;);

<span class="fc" id="L980">        test(pinf.divide(ninf),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Divide #7&quot;);

<span class="fc" id="L984">        test(ninf.divide(ninf),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Divide #8&quot;);

<span class="fc" id="L988">        test(field.newDfp(&quot;0&quot;).divide(field.newDfp(&quot;0&quot;)),</span>
             nan,
             DfpField.FLAG_DIV_ZERO, &quot;Divide #9&quot;);

<span class="fc" id="L992">        test(field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;0&quot;)),</span>
             pinf,
             DfpField.FLAG_DIV_ZERO, &quot;Divide #10&quot;);

<span class="fc" id="L996">        test(field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;-0&quot;)),</span>
             ninf,
             DfpField.FLAG_DIV_ZERO, &quot;Divide #11&quot;);

<span class="fc" id="L1000">        test(field.newDfp(&quot;-1&quot;).divide(field.newDfp(&quot;0&quot;)),</span>
             ninf,
             DfpField.FLAG_DIV_ZERO, &quot;Divide #12&quot;);

<span class="fc" id="L1004">        test(field.newDfp(&quot;-1&quot;).divide(field.newDfp(&quot;-0&quot;)),</span>
             pinf,
             DfpField.FLAG_DIV_ZERO, &quot;Divide #13&quot;);

<span class="fc" id="L1008">        test(field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;3&quot;)),</span>
<span class="fc" id="L1009">             field.newDfp(&quot;0.33333333333333333333&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #14&quot;);

<span class="fc" id="L1012">        test(field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;6&quot;)),</span>
<span class="fc" id="L1013">             field.newDfp(&quot;0.16666666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #15&quot;);

<span class="fc" id="L1016">        test(field.newDfp(&quot;10&quot;).divide(field.newDfp(&quot;6&quot;)),</span>
<span class="fc" id="L1017">             field.newDfp(&quot;1.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #16&quot;);

<span class="fc" id="L1020">        test(field.newDfp(&quot;100&quot;).divide(field.newDfp(&quot;6&quot;)),</span>
<span class="fc" id="L1021">             field.newDfp(&quot;16.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #17&quot;);

<span class="fc" id="L1024">        test(field.newDfp(&quot;1000&quot;).divide(field.newDfp(&quot;6&quot;)),</span>
<span class="fc" id="L1025">             field.newDfp(&quot;166.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #18&quot;);

<span class="fc" id="L1028">        test(field.newDfp(&quot;10000&quot;).divide(field.newDfp(&quot;6&quot;)),</span>
<span class="fc" id="L1029">             field.newDfp(&quot;1666.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #19&quot;);

<span class="fc" id="L1032">        test(field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;1&quot;)),</span>
<span class="fc" id="L1033">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Divide #20&quot;);

<span class="fc" id="L1036">        test(field.newDfp(&quot;1&quot;).divide(field.newDfp(&quot;-1&quot;)),</span>
<span class="fc" id="L1037">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;Divide #21&quot;);

<span class="fc" id="L1040">        test(field.newDfp(&quot;-1&quot;).divide(field.newDfp(&quot;1&quot;)),</span>
<span class="fc" id="L1041">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;Divide #22&quot;);

<span class="fc" id="L1044">        test(field.newDfp(&quot;-1&quot;).divide(field.newDfp(&quot;-1&quot;)),</span>
<span class="fc" id="L1045">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Divide #23&quot;);

<span class="fc" id="L1048">        test(field.newDfp(&quot;1e-65539&quot;).divide(field.newDfp(&quot;1e65539&quot;)),</span>
<span class="fc" id="L1049">             field.newDfp(&quot;1e-131078&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;Divide #24&quot;);

<span class="fc" id="L1052">        test(field.newDfp(&quot;1e65539&quot;).divide(field.newDfp(&quot;1e-65539&quot;)),</span>
             pinf,
             DfpField.FLAG_OVERFLOW, &quot;Divide #24&quot;);

<span class="fc" id="L1056">        test(field.newDfp(&quot;2&quot;).divide(field.newDfp(&quot;1.5&quot;)),     // test trial-divisor too high</span>
<span class="fc" id="L1057">             field.newDfp(&quot;1.3333333333333333&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Divide #25&quot;);

<span class="fc" id="L1060">        test(field.newDfp(&quot;2&quot;).divide(pinf),</span>
<span class="fc" id="L1061">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Divide #26&quot;);

<span class="fc" id="L1064">        test(field.newDfp(&quot;2&quot;).divide(ninf),</span>
<span class="fc" id="L1065">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Divide #27&quot;);

<span class="fc" id="L1068">        test(field.newDfp(&quot;0&quot;).divide(field.newDfp(&quot;1&quot;)),</span>
<span class="fc" id="L1069">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Divide #28&quot;);
<span class="fc" id="L1071">    }</span>

    @Test
    public void testReciprocal()
    {
<span class="fc" id="L1076">        test(nan.reciprocal(),</span>
             nan,
             0, &quot;Reciprocal #1&quot;);

<span class="fc" id="L1080">        test(field.newDfp(&quot;0&quot;).reciprocal(),</span>
             pinf,
             DfpField.FLAG_DIV_ZERO, &quot;Reciprocal #2&quot;);

<span class="fc" id="L1084">        test(field.newDfp(&quot;-0&quot;).reciprocal(),</span>
             ninf,
             DfpField.FLAG_DIV_ZERO, &quot;Reciprocal #3&quot;);

<span class="fc" id="L1088">        test(field.newDfp(&quot;3&quot;).reciprocal(),</span>
<span class="fc" id="L1089">             field.newDfp(&quot;0.33333333333333333333&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Reciprocal #4&quot;);

<span class="fc" id="L1092">        test(field.newDfp(&quot;6&quot;).reciprocal(),</span>
<span class="fc" id="L1093">             field.newDfp(&quot;0.16666666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Reciprocal #5&quot;);

<span class="fc" id="L1096">        test(field.newDfp(&quot;1&quot;).reciprocal(),</span>
<span class="fc" id="L1097">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Reciprocal #6&quot;);

<span class="fc" id="L1100">        test(field.newDfp(&quot;-1&quot;).reciprocal(),</span>
<span class="fc" id="L1101">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;Reciprocal #7&quot;);

<span class="fc" id="L1104">        test(pinf.reciprocal(),</span>
<span class="fc" id="L1105">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Reciprocal #8&quot;);

<span class="fc" id="L1108">        test(ninf.reciprocal(),</span>
<span class="fc" id="L1109">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Reciprocal #9&quot;);
<span class="fc" id="L1111">    }</span>

    @Test
    public void testDivideInt()
    {
<span class="fc" id="L1116">        test(nan.divide(1),      // NaN / number = NaN</span>
             nan,
             0, &quot;DivideInt #1&quot;);

<span class="fc" id="L1120">        test(pinf.divide(1),</span>
             pinf,
             0, &quot;DivideInt #2&quot;);

<span class="fc" id="L1124">        test(field.newDfp(&quot;0&quot;).divide(0),</span>
             nan,
             DfpField.FLAG_DIV_ZERO, &quot;DivideInt #3&quot;);

<span class="fc" id="L1128">        test(field.newDfp(&quot;1&quot;).divide(0),</span>
             pinf,
             DfpField.FLAG_DIV_ZERO, &quot;DivideInt #4&quot;);

<span class="fc" id="L1132">        test(field.newDfp(&quot;-1&quot;).divide(0),</span>
             ninf,
             DfpField.FLAG_DIV_ZERO, &quot;DivideInt #5&quot;);

<span class="fc" id="L1136">        test(field.newDfp(&quot;1&quot;).divide(3),</span>
<span class="fc" id="L1137">             field.newDfp(&quot;0.33333333333333333333&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;DivideInt #6&quot;);

<span class="fc" id="L1140">        test(field.newDfp(&quot;1&quot;).divide(6),</span>
<span class="fc" id="L1141">             field.newDfp(&quot;0.16666666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;DivideInt #7&quot;);

<span class="fc" id="L1144">        test(field.newDfp(&quot;10&quot;).divide(6),</span>
<span class="fc" id="L1145">             field.newDfp(&quot;1.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;DivideInt #8&quot;);

<span class="fc" id="L1148">        test(field.newDfp(&quot;100&quot;).divide(6),</span>
<span class="fc" id="L1149">             field.newDfp(&quot;16.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;DivideInt #9&quot;);

<span class="fc" id="L1152">        test(field.newDfp(&quot;1000&quot;).divide(6),</span>
<span class="fc" id="L1153">             field.newDfp(&quot;166.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;DivideInt #10&quot;);

<span class="fc" id="L1156">        test(field.newDfp(&quot;10000&quot;).divide(6),</span>
<span class="fc" id="L1157">             field.newDfp(&quot;1666.6666666666666667&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;DivideInt #20&quot;);

<span class="fc" id="L1160">        test(field.newDfp(&quot;1&quot;).divide(1),</span>
<span class="fc" id="L1161">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;DivideInt #21&quot;);

<span class="fc" id="L1164">        test(field.newDfp(&quot;1e-131077&quot;).divide(10),</span>
<span class="fc" id="L1165">             field.newDfp(&quot;1e-131078&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;DivideInt #22&quot;);

<span class="fc" id="L1168">        test(field.newDfp(&quot;0&quot;).divide(1),</span>
<span class="fc" id="L1169">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;DivideInt #23&quot;);

<span class="fc" id="L1172">        test(field.newDfp(&quot;1&quot;).divide(10000),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;DivideInt #24&quot;);

<span class="fc" id="L1176">        test(field.newDfp(&quot;1&quot;).divide(-1),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;DivideInt #25&quot;);
<span class="fc" id="L1179">    }</span>

    @Test
    public void testNextAfter()
    {
<span class="fc" id="L1184">        test(field.newDfp(&quot;1&quot;).nextAfter(pinf),</span>
<span class="fc" id="L1185">             field.newDfp(&quot;1.0000000000000001&quot;),</span>
             0, &quot;NextAfter #1&quot;);

<span class="fc" id="L1188">        test(field.newDfp(&quot;1.0000000000000001&quot;).nextAfter(ninf),</span>
<span class="fc" id="L1189">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;NextAfter #1.5&quot;);

<span class="fc" id="L1192">        test(field.newDfp(&quot;1&quot;).nextAfter(ninf),</span>
<span class="fc" id="L1193">             field.newDfp(&quot;0.99999999999999999999&quot;),</span>
             0, &quot;NextAfter #2&quot;);

<span class="fc" id="L1196">        test(field.newDfp(&quot;0.99999999999999999999&quot;).nextAfter(field.newDfp(&quot;2&quot;)),</span>
<span class="fc" id="L1197">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;NextAfter #3&quot;);

<span class="fc" id="L1200">        test(field.newDfp(&quot;-1&quot;).nextAfter(ninf),</span>
<span class="fc" id="L1201">             field.newDfp(&quot;-1.0000000000000001&quot;),</span>
             0, &quot;NextAfter #4&quot;);

<span class="fc" id="L1204">        test(field.newDfp(&quot;-1&quot;).nextAfter(pinf),</span>
<span class="fc" id="L1205">             field.newDfp(&quot;-0.99999999999999999999&quot;),</span>
             0, &quot;NextAfter #5&quot;);

<span class="fc" id="L1208">        test(field.newDfp(&quot;-0.99999999999999999999&quot;).nextAfter(field.newDfp(&quot;-2&quot;)),</span>
<span class="fc" id="L1209">             field.newDfp(&quot;-1&quot;),</span>
             0, &quot;NextAfter #6&quot;);

<span class="fc" id="L1212">        test(field.newDfp(&quot;2&quot;).nextAfter(field.newDfp(&quot;2&quot;)),</span>
<span class="fc" id="L1213">             field.newDfp(&quot;2&quot;),</span>
             0, &quot;NextAfter #7&quot;);

<span class="fc" id="L1216">        test(field.newDfp(&quot;0&quot;).nextAfter(field.newDfp(&quot;0&quot;)),</span>
<span class="fc" id="L1217">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;NextAfter #8&quot;);

<span class="fc" id="L1220">        test(field.newDfp(&quot;-2&quot;).nextAfter(field.newDfp(&quot;-2&quot;)),</span>
<span class="fc" id="L1221">             field.newDfp(&quot;-2&quot;),</span>
             0, &quot;NextAfter #9&quot;);

<span class="fc" id="L1224">        test(field.newDfp(&quot;0&quot;).nextAfter(field.newDfp(&quot;1&quot;)),</span>
<span class="fc" id="L1225">             field.newDfp(&quot;1e-131092&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;NextAfter #10&quot;);

<span class="fc" id="L1228">        test(field.newDfp(&quot;0&quot;).nextAfter(field.newDfp(&quot;-1&quot;)),</span>
<span class="fc" id="L1229">             field.newDfp(&quot;-1e-131092&quot;),</span>
             DfpField.FLAG_UNDERFLOW, &quot;NextAfter #11&quot;);

<span class="fc" id="L1232">        test(field.newDfp(&quot;-1e-131092&quot;).nextAfter(pinf),</span>
<span class="fc" id="L1233">             field.newDfp(&quot;-0&quot;),</span>
             DfpField.FLAG_UNDERFLOW|DfpField.FLAG_INEXACT, &quot;Next After #12&quot;);

<span class="fc" id="L1236">        test(field.newDfp(&quot;1e-131092&quot;).nextAfter(ninf),</span>
<span class="fc" id="L1237">             field.newDfp(&quot;0&quot;),</span>
             DfpField.FLAG_UNDERFLOW|DfpField.FLAG_INEXACT, &quot;Next After #13&quot;);

<span class="fc" id="L1240">        test(field.newDfp(&quot;9.9999999999999999999e131078&quot;).nextAfter(pinf),</span>
             pinf,
             DfpField.FLAG_OVERFLOW|DfpField.FLAG_INEXACT, &quot;Next After #14&quot;);
<span class="fc" id="L1243">    }</span>

    @Test
    public void testToString()
    {
<span class="fc" id="L1248">        Assert.assertEquals(&quot;toString #1&quot;, &quot;Infinity&quot;, pinf.toString());</span>
<span class="fc" id="L1249">        Assert.assertEquals(&quot;toString #2&quot;, &quot;-Infinity&quot;, ninf.toString());</span>
<span class="fc" id="L1250">        Assert.assertEquals(&quot;toString #3&quot;, &quot;NaN&quot;, nan.toString());</span>
<span class="fc" id="L1251">        Assert.assertEquals(&quot;toString #4&quot;, &quot;NaN&quot;, field.newDfp((byte) 1, Dfp.QNAN).toString());</span>
<span class="fc" id="L1252">        Assert.assertEquals(&quot;toString #5&quot;, &quot;NaN&quot;, field.newDfp((byte) 1, Dfp.SNAN).toString());</span>
<span class="fc" id="L1253">        Assert.assertEquals(&quot;toString #6&quot;, &quot;1.2300000000000000e100&quot;, field.newDfp(&quot;1.23e100&quot;).toString());</span>
<span class="fc" id="L1254">        Assert.assertEquals(&quot;toString #7&quot;, &quot;-1.2300000000000000e100&quot;, field.newDfp(&quot;-1.23e100&quot;).toString());</span>
<span class="fc" id="L1255">        Assert.assertEquals(&quot;toString #8&quot;, &quot;12345678.1234&quot;, field.newDfp(&quot;12345678.1234&quot;).toString());</span>
<span class="fc" id="L1256">        Assert.assertEquals(&quot;toString #9&quot;, &quot;0.00001234&quot;, field.newDfp(&quot;0.00001234&quot;).toString());</span>
<span class="fc" id="L1257">    }</span>

    @Override
    @Test
    public void testRound()
    {
<span class="fc" id="L1263">        field.setRoundingMode(DfpField.RoundingMode.ROUND_DOWN);</span>

        // Round down
<span class="fc" id="L1266">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.9&quot;)),</span>
<span class="fc" id="L1267">             field.newDfp(&quot;12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #1&quot;);

<span class="fc" id="L1270">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.99999999&quot;)),</span>
<span class="fc" id="L1271">             field.newDfp(&quot;12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #2&quot;);

<span class="fc" id="L1274">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.99999999&quot;)),</span>
<span class="fc" id="L1275">             field.newDfp(&quot;-12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #3&quot;);

<span class="fc" id="L1278">        field.setRoundingMode(DfpField.RoundingMode.ROUND_UP);</span>

        // Round up
<span class="fc" id="L1281">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.1&quot;)),</span>
<span class="fc" id="L1282">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #4&quot;);

<span class="fc" id="L1285">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.0001&quot;)),</span>
<span class="fc" id="L1286">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #5&quot;);

<span class="fc" id="L1289">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.1&quot;)),</span>
<span class="fc" id="L1290">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #6&quot;);

<span class="fc" id="L1293">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.0001&quot;)),</span>
<span class="fc" id="L1294">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #7&quot;);

<span class="fc" id="L1297">        field.setRoundingMode(DfpField.RoundingMode.ROUND_HALF_UP);</span>

        // Round half up
<span class="fc" id="L1300">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.4999&quot;)),</span>
<span class="fc" id="L1301">             field.newDfp(&quot;12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #8&quot;);

<span class="fc" id="L1304">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.5000&quot;)),</span>
<span class="fc" id="L1305">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #9&quot;);

<span class="fc" id="L1308">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.4999&quot;)),</span>
<span class="fc" id="L1309">             field.newDfp(&quot;-12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #10&quot;);

<span class="fc" id="L1312">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.5000&quot;)),</span>
<span class="fc" id="L1313">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #11&quot;);

<span class="fc" id="L1316">        field.setRoundingMode(DfpField.RoundingMode.ROUND_HALF_DOWN);</span>

        // Round half down
<span class="fc" id="L1319">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.5001&quot;)),</span>
<span class="fc" id="L1320">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #12&quot;);

<span class="fc" id="L1323">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.5000&quot;)),</span>
<span class="fc" id="L1324">             field.newDfp(&quot;12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #13&quot;);

<span class="fc" id="L1327">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.5001&quot;)),</span>
<span class="fc" id="L1328">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #14&quot;);

<span class="fc" id="L1331">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.5000&quot;)),</span>
<span class="fc" id="L1332">             field.newDfp(&quot;-12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #15&quot;);

<span class="fc" id="L1335">        field.setRoundingMode(DfpField.RoundingMode.ROUND_HALF_ODD);</span>

        // Round half odd
<span class="fc" id="L1338">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.5000&quot;)),</span>
<span class="fc" id="L1339">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #16&quot;);

<span class="fc" id="L1342">        test(field.newDfp(&quot;12345678901234567891&quot;).add(field.newDfp(&quot;0.5000&quot;)),</span>
<span class="fc" id="L1343">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #17&quot;);

<span class="fc" id="L1346">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.5000&quot;)),</span>
<span class="fc" id="L1347">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #18&quot;);

<span class="fc" id="L1350">        test(field.newDfp(&quot;-12345678901234567891&quot;).add(field.newDfp(&quot;-0.5000&quot;)),</span>
<span class="fc" id="L1351">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #19&quot;);

<span class="fc" id="L1354">        field.setRoundingMode(DfpField.RoundingMode.ROUND_CEIL);</span>

        // Round ceil
<span class="fc" id="L1357">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.0001&quot;)),</span>
<span class="fc" id="L1358">             field.newDfp(&quot;12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #20&quot;);

<span class="fc" id="L1361">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.9999&quot;)),</span>
<span class="fc" id="L1362">             field.newDfp(&quot;-12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #21&quot;);

<span class="fc" id="L1365">        field.setRoundingMode(DfpField.RoundingMode.ROUND_FLOOR);</span>

        // Round floor
<span class="fc" id="L1368">        test(field.newDfp(&quot;12345678901234567890&quot;).add(field.newDfp(&quot;0.9999&quot;)),</span>
<span class="fc" id="L1369">             field.newDfp(&quot;12345678901234567890&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #22&quot;);

<span class="fc" id="L1372">        test(field.newDfp(&quot;-12345678901234567890&quot;).add(field.newDfp(&quot;-0.0001&quot;)),</span>
<span class="fc" id="L1373">             field.newDfp(&quot;-12345678901234567891&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Round #23&quot;);

<span class="fc" id="L1376">        field.setRoundingMode(DfpField.RoundingMode.ROUND_HALF_EVEN);  // reset</span>
<span class="fc" id="L1377">    }</span>

    @Override
    @Test
    public void testCeil()
    {
<span class="fc" id="L1383">        test(field.newDfp(&quot;1234.0000000000000001&quot;).ceil(),</span>
<span class="fc" id="L1384">             field.newDfp(&quot;1235&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Ceil #1&quot;);
<span class="fc" id="L1386">    }</span>

    @Override
    @Test
    public void testFloor()
    {
<span class="fc" id="L1392">        test(field.newDfp(&quot;1234.9999999999999999&quot;).floor(),</span>
<span class="fc" id="L1393">             field.newDfp(&quot;1234&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Floor #1&quot;);
<span class="fc" id="L1395">    }</span>

    @Override
    @Test
    public void testRint()
    {
<span class="fc" id="L1401">        test(field.newDfp(&quot;1234.50000000001&quot;).rint(),</span>
<span class="fc" id="L1402">             field.newDfp(&quot;1235&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Rint #1&quot;);

<span class="fc" id="L1405">        test(field.newDfp(&quot;1234.5000&quot;).rint(),</span>
<span class="fc" id="L1406">             field.newDfp(&quot;1234&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Rint #2&quot;);

<span class="fc" id="L1409">        test(field.newDfp(&quot;1235.5000&quot;).rint(),</span>
<span class="fc" id="L1410">             field.newDfp(&quot;1236&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Rint #3&quot;);
<span class="fc" id="L1412">    }</span>

    @Test
    public void testCopySign()
    {
<span class="fc" id="L1417">        test(Dfp.copysign(field.newDfp(&quot;1234.&quot;), field.newDfp(&quot;-1&quot;)),</span>
<span class="fc" id="L1418">             field.newDfp(&quot;-1234&quot;),</span>
             0, &quot;CopySign #1&quot;);

<span class="fc" id="L1421">        test(Dfp.copysign(field.newDfp(&quot;-1234.&quot;), field.newDfp(&quot;-1&quot;)),</span>
<span class="fc" id="L1422">             field.newDfp(&quot;-1234&quot;),</span>
             0, &quot;CopySign #2&quot;);

<span class="fc" id="L1425">        test(Dfp.copysign(field.newDfp(&quot;-1234.&quot;), field.newDfp(&quot;1&quot;)),</span>
<span class="fc" id="L1426">             field.newDfp(&quot;1234&quot;),</span>
             0, &quot;CopySign #3&quot;);

<span class="fc" id="L1429">        test(Dfp.copysign(field.newDfp(&quot;1234.&quot;), field.newDfp(&quot;1&quot;)),</span>
<span class="fc" id="L1430">             field.newDfp(&quot;1234&quot;),</span>
             0, &quot;CopySign #4&quot;);
<span class="fc" id="L1432">    }</span>

    @Test
    public void testIntValue()
    {
<span class="fc" id="L1437">        Assert.assertEquals(&quot;intValue #1&quot;, 1234, field.newDfp(&quot;1234&quot;).intValue());</span>
<span class="fc" id="L1438">        Assert.assertEquals(&quot;intValue #2&quot;, -1234, field.newDfp(&quot;-1234&quot;).intValue());</span>
<span class="fc" id="L1439">        Assert.assertEquals(&quot;intValue #3&quot;, 1234, field.newDfp(&quot;1234.5&quot;).intValue());</span>
<span class="fc" id="L1440">        Assert.assertEquals(&quot;intValue #4&quot;, 1235, field.newDfp(&quot;1234.500001&quot;).intValue());</span>
<span class="fc" id="L1441">        Assert.assertEquals(&quot;intValue #5&quot;, 2147483647, field.newDfp(&quot;1e1000&quot;).intValue());</span>
<span class="fc" id="L1442">        Assert.assertEquals(&quot;intValue #6&quot;, -2147483648, field.newDfp(&quot;-1e1000&quot;).intValue());</span>
<span class="fc" id="L1443">    }</span>

    @Test
    public void testLog10K()
    {
<span class="fc" id="L1448">        Assert.assertEquals(&quot;log10K #1&quot;, 1, field.newDfp(&quot;123456&quot;).log10K());</span>
<span class="fc" id="L1449">        Assert.assertEquals(&quot;log10K #2&quot;, 2, field.newDfp(&quot;123456789&quot;).log10K());</span>
<span class="fc" id="L1450">        Assert.assertEquals(&quot;log10K #3&quot;, 0, field.newDfp(&quot;2&quot;).log10K());</span>
<span class="fc" id="L1451">        Assert.assertEquals(&quot;log10K #3&quot;, 0, field.newDfp(&quot;1&quot;).log10K());</span>
<span class="fc" id="L1452">        Assert.assertEquals(&quot;log10K #4&quot;, -1, field.newDfp(&quot;0.1&quot;).log10K());</span>
<span class="fc" id="L1453">    }</span>

    @Test
    public void testPower10K()
    {
<span class="fc" id="L1458">        Dfp d = field.newDfp();</span>

<span class="fc" id="L1460">        test(d.power10K(0), field.newDfp(&quot;1&quot;), 0, &quot;Power10 #1&quot;);</span>
<span class="fc" id="L1461">        test(d.power10K(1), field.newDfp(&quot;10000&quot;), 0, &quot;Power10 #2&quot;);</span>
<span class="fc" id="L1462">        test(d.power10K(2), field.newDfp(&quot;100000000&quot;), 0, &quot;Power10 #3&quot;);</span>

<span class="fc" id="L1464">        test(d.power10K(-1), field.newDfp(&quot;0.0001&quot;), 0, &quot;Power10 #4&quot;);</span>
<span class="fc" id="L1465">        test(d.power10K(-2), field.newDfp(&quot;0.00000001&quot;), 0, &quot;Power10 #5&quot;);</span>
<span class="fc" id="L1466">        test(d.power10K(-3), field.newDfp(&quot;0.000000000001&quot;), 0, &quot;Power10 #6&quot;);</span>
<span class="fc" id="L1467">    }</span>

    @Test
    public void testLog10()
    {

<span class="fc" id="L1473">        Assert.assertEquals(&quot;log10 #1&quot;, 1, field.newDfp(&quot;12&quot;).intLog10());</span>
<span class="fc" id="L1474">        Assert.assertEquals(&quot;log10 #2&quot;, 2, field.newDfp(&quot;123&quot;).intLog10());</span>
<span class="fc" id="L1475">        Assert.assertEquals(&quot;log10 #3&quot;, 3, field.newDfp(&quot;1234&quot;).intLog10());</span>
<span class="fc" id="L1476">        Assert.assertEquals(&quot;log10 #4&quot;, 4, field.newDfp(&quot;12345&quot;).intLog10());</span>
<span class="fc" id="L1477">        Assert.assertEquals(&quot;log10 #5&quot;, 5, field.newDfp(&quot;123456&quot;).intLog10());</span>
<span class="fc" id="L1478">        Assert.assertEquals(&quot;log10 #6&quot;, 6, field.newDfp(&quot;1234567&quot;).intLog10());</span>
<span class="fc" id="L1479">        Assert.assertEquals(&quot;log10 #6&quot;, 7, field.newDfp(&quot;12345678&quot;).intLog10());</span>
<span class="fc" id="L1480">        Assert.assertEquals(&quot;log10 #7&quot;, 8, field.newDfp(&quot;123456789&quot;).intLog10());</span>
<span class="fc" id="L1481">        Assert.assertEquals(&quot;log10 #8&quot;, 9, field.newDfp(&quot;1234567890&quot;).intLog10());</span>
<span class="fc" id="L1482">        Assert.assertEquals(&quot;log10 #9&quot;, 10, field.newDfp(&quot;12345678901&quot;).intLog10());</span>
<span class="fc" id="L1483">        Assert.assertEquals(&quot;log10 #10&quot;, 11, field.newDfp(&quot;123456789012&quot;).intLog10());</span>
<span class="fc" id="L1484">        Assert.assertEquals(&quot;log10 #11&quot;, 12, field.newDfp(&quot;1234567890123&quot;).intLog10());</span>

<span class="fc" id="L1486">        Assert.assertEquals(&quot;log10 #12&quot;, 0, field.newDfp(&quot;2&quot;).intLog10());</span>
<span class="fc" id="L1487">        Assert.assertEquals(&quot;log10 #13&quot;, 0, field.newDfp(&quot;1&quot;).intLog10());</span>
<span class="fc" id="L1488">        Assert.assertEquals(&quot;log10 #14&quot;, -1, field.newDfp(&quot;0.12&quot;).intLog10());</span>
<span class="fc" id="L1489">        Assert.assertEquals(&quot;log10 #15&quot;, -2, field.newDfp(&quot;0.012&quot;).intLog10());</span>
<span class="fc" id="L1490">    }</span>

    @Test
    public void testPower10()
    {
<span class="fc" id="L1495">        Dfp d = field.newDfp();</span>

<span class="fc" id="L1497">        test(d.power10(0), field.newDfp(&quot;1&quot;), 0, &quot;Power10 #1&quot;);</span>
<span class="fc" id="L1498">        test(d.power10(1), field.newDfp(&quot;10&quot;), 0, &quot;Power10 #2&quot;);</span>
<span class="fc" id="L1499">        test(d.power10(2), field.newDfp(&quot;100&quot;), 0, &quot;Power10 #3&quot;);</span>
<span class="fc" id="L1500">        test(d.power10(3), field.newDfp(&quot;1000&quot;), 0, &quot;Power10 #4&quot;);</span>
<span class="fc" id="L1501">        test(d.power10(4), field.newDfp(&quot;10000&quot;), 0, &quot;Power10 #5&quot;);</span>
<span class="fc" id="L1502">        test(d.power10(5), field.newDfp(&quot;100000&quot;), 0, &quot;Power10 #6&quot;);</span>
<span class="fc" id="L1503">        test(d.power10(6), field.newDfp(&quot;1000000&quot;), 0, &quot;Power10 #7&quot;);</span>
<span class="fc" id="L1504">        test(d.power10(7), field.newDfp(&quot;10000000&quot;), 0, &quot;Power10 #8&quot;);</span>
<span class="fc" id="L1505">        test(d.power10(8), field.newDfp(&quot;100000000&quot;), 0, &quot;Power10 #9&quot;);</span>
<span class="fc" id="L1506">        test(d.power10(9), field.newDfp(&quot;1000000000&quot;), 0, &quot;Power10 #10&quot;);</span>

<span class="fc" id="L1508">        test(d.power10(-1), field.newDfp(&quot;.1&quot;), 0, &quot;Power10 #11&quot;);</span>
<span class="fc" id="L1509">        test(d.power10(-2), field.newDfp(&quot;.01&quot;), 0, &quot;Power10 #12&quot;);</span>
<span class="fc" id="L1510">        test(d.power10(-3), field.newDfp(&quot;.001&quot;), 0, &quot;Power10 #13&quot;);</span>
<span class="fc" id="L1511">        test(d.power10(-4), field.newDfp(&quot;.0001&quot;), 0, &quot;Power10 #14&quot;);</span>
<span class="fc" id="L1512">        test(d.power10(-5), field.newDfp(&quot;.00001&quot;), 0, &quot;Power10 #15&quot;);</span>
<span class="fc" id="L1513">        test(d.power10(-6), field.newDfp(&quot;.000001&quot;), 0, &quot;Power10 #16&quot;);</span>
<span class="fc" id="L1514">        test(d.power10(-7), field.newDfp(&quot;.0000001&quot;), 0, &quot;Power10 #17&quot;);</span>
<span class="fc" id="L1515">        test(d.power10(-8), field.newDfp(&quot;.00000001&quot;), 0, &quot;Power10 #18&quot;);</span>
<span class="fc" id="L1516">        test(d.power10(-9), field.newDfp(&quot;.000000001&quot;), 0, &quot;Power10 #19&quot;);</span>
<span class="fc" id="L1517">        test(d.power10(-10), field.newDfp(&quot;.0000000001&quot;), 0, &quot;Power10 #20&quot;);</span>
<span class="fc" id="L1518">    }</span>

    @Test
    public void testRemainder()
    {
<span class="fc" id="L1523">        test(field.newDfp(&quot;10&quot;).remainder(field.newDfp(&quot;3&quot;)),</span>
<span class="fc" id="L1524">             field.newDfp(&quot;1&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Remainder #1&quot;);

<span class="fc" id="L1527">        test(field.newDfp(&quot;9&quot;).remainder(field.newDfp(&quot;3&quot;)),</span>
<span class="fc" id="L1528">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Remainder #2&quot;);

<span class="fc" id="L1531">        test(field.newDfp(&quot;-9&quot;).remainder(field.newDfp(&quot;3&quot;)),</span>
<span class="fc" id="L1532">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Remainder #3&quot;);
<span class="fc" id="L1534">    }</span>

    @Override
    @Test
    public void testSqrt()
    {
<span class="fc" id="L1540">        test(field.newDfp(&quot;0&quot;).sqrt(),</span>
<span class="fc" id="L1541">             field.newDfp(&quot;0&quot;),</span>
             0, &quot;Sqrt #1&quot;);

<span class="fc" id="L1544">        test(field.newDfp(&quot;-0&quot;).sqrt(),</span>
<span class="fc" id="L1545">             field.newDfp(&quot;-0&quot;),</span>
             0, &quot;Sqrt #2&quot;);

<span class="fc" id="L1548">        test(field.newDfp(&quot;1&quot;).sqrt(),</span>
<span class="fc" id="L1549">             field.newDfp(&quot;1&quot;),</span>
             0, &quot;Sqrt #3&quot;);

<span class="fc" id="L1552">        test(field.newDfp(&quot;2&quot;).sqrt(),</span>
<span class="fc" id="L1553">             field.newDfp(&quot;1.4142135623730950&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Sqrt #4&quot;);

<span class="fc" id="L1556">        test(field.newDfp(&quot;3&quot;).sqrt(),</span>
<span class="fc" id="L1557">             field.newDfp(&quot;1.7320508075688773&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Sqrt #5&quot;);

<span class="fc" id="L1560">        test(field.newDfp(&quot;5&quot;).sqrt(),</span>
<span class="fc" id="L1561">             field.newDfp(&quot;2.2360679774997897&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Sqrt #6&quot;);

<span class="fc" id="L1564">        test(field.newDfp(&quot;500&quot;).sqrt(),</span>
<span class="fc" id="L1565">             field.newDfp(&quot;22.3606797749978970&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Sqrt #6.2&quot;);

<span class="fc" id="L1568">        test(field.newDfp(&quot;50000&quot;).sqrt(),</span>
<span class="fc" id="L1569">             field.newDfp(&quot;223.6067977499789696&quot;),</span>
             DfpField.FLAG_INEXACT, &quot;Sqrt #6.3&quot;);

<span class="fc" id="L1572">        test(field.newDfp(&quot;-1&quot;).sqrt(),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Sqrt #7&quot;);

<span class="fc" id="L1576">        test(pinf.sqrt(),</span>
             pinf,
             0, &quot;Sqrt #8&quot;);

<span class="fc" id="L1580">        test(field.newDfp((byte) 1, Dfp.QNAN).sqrt(),</span>
             nan,
             0, &quot;Sqrt #9&quot;);

<span class="fc" id="L1584">        test(field.newDfp((byte) 1, Dfp.SNAN).sqrt(),</span>
             nan,
             DfpField.FLAG_INVALID, &quot;Sqrt #9&quot;);
<span class="fc" id="L1587">    }</span>

    @Test
    public void testIssue567() {
<span class="fc" id="L1591">        DfpField field = new DfpField(100);</span>
<span class="fc" id="L1592">        Assert.assertEquals(0.0, field.getZero().toDouble(), Precision.SAFE_MIN);</span>
<span class="fc" id="L1593">        Assert.assertEquals(0.0, field.newDfp(0.0).toDouble(), Precision.SAFE_MIN);</span>
<span class="fc" id="L1594">        Assert.assertEquals(-1, FastMath.copySign(1, field.newDfp(-0.0).toDouble()), Precision.EPSILON);</span>
<span class="fc" id="L1595">        Assert.assertEquals(+1, FastMath.copySign(1, field.newDfp(+0.0).toDouble()), Precision.EPSILON);</span>
<span class="fc" id="L1596">    }</span>

    @Test
    public void testIsZero() {
<span class="fc" id="L1600">        Assert.assertTrue(field.getZero().isZero());</span>
<span class="fc" id="L1601">        Assert.assertTrue(field.getZero().negate().isZero());</span>
<span class="fc" id="L1602">        Assert.assertTrue(field.newDfp(+0.0).isZero());</span>
<span class="fc" id="L1603">        Assert.assertTrue(field.newDfp(-0.0).isZero());</span>
<span class="fc" id="L1604">        Assert.assertFalse(field.newDfp(1.0e-90).isZero());</span>
<span class="fc" id="L1605">        Assert.assertFalse(nan.isZero());</span>
<span class="fc" id="L1606">        Assert.assertFalse(nan.negate().isZero());</span>
<span class="fc" id="L1607">        Assert.assertFalse(pinf.isZero());</span>
<span class="fc" id="L1608">        Assert.assertFalse(pinf.negate().isZero());</span>
<span class="fc" id="L1609">        Assert.assertFalse(ninf.isZero());</span>
<span class="fc" id="L1610">        Assert.assertFalse(ninf.negate().isZero());</span>
<span class="fc" id="L1611">    }</span>

    @Test
    public void testSignPredicates() {

<span class="fc" id="L1616">        Assert.assertTrue(field.getZero().negativeOrNull());</span>
<span class="fc" id="L1617">        Assert.assertTrue(field.getZero().positiveOrNull());</span>
<span class="fc" id="L1618">        Assert.assertFalse(field.getZero().strictlyNegative());</span>
<span class="fc" id="L1619">        Assert.assertFalse(field.getZero().strictlyPositive());</span>

<span class="fc" id="L1621">        Assert.assertTrue(field.getZero().negate().negativeOrNull());</span>
<span class="fc" id="L1622">        Assert.assertTrue(field.getZero().negate().positiveOrNull());</span>
<span class="fc" id="L1623">        Assert.assertFalse(field.getZero().negate().strictlyNegative());</span>
<span class="fc" id="L1624">        Assert.assertFalse(field.getZero().negate().strictlyPositive());</span>

<span class="fc" id="L1626">        Assert.assertFalse(field.getOne().negativeOrNull());</span>
<span class="fc" id="L1627">        Assert.assertTrue(field.getOne().positiveOrNull());</span>
<span class="fc" id="L1628">        Assert.assertFalse(field.getOne().strictlyNegative());</span>
<span class="fc" id="L1629">        Assert.assertTrue(field.getOne().strictlyPositive());</span>

<span class="fc" id="L1631">        Assert.assertTrue(field.getOne().negate().negativeOrNull());</span>
<span class="fc" id="L1632">        Assert.assertFalse(field.getOne().negate().positiveOrNull());</span>
<span class="fc" id="L1633">        Assert.assertTrue(field.getOne().negate().strictlyNegative());</span>
<span class="fc" id="L1634">        Assert.assertFalse(field.getOne().negate().strictlyPositive());</span>

<span class="fc" id="L1636">        Assert.assertFalse(nan.negativeOrNull());</span>
<span class="fc" id="L1637">        Assert.assertFalse(nan.positiveOrNull());</span>
<span class="fc" id="L1638">        Assert.assertFalse(nan.strictlyNegative());</span>
<span class="fc" id="L1639">        Assert.assertFalse(nan.strictlyPositive());</span>

<span class="fc" id="L1641">        Assert.assertFalse(nan.negate().negativeOrNull());</span>
<span class="fc" id="L1642">        Assert.assertFalse(nan.negate().positiveOrNull());</span>
<span class="fc" id="L1643">        Assert.assertFalse(nan.negate().strictlyNegative());</span>
<span class="fc" id="L1644">        Assert.assertFalse(nan.negate().strictlyPositive());</span>

<span class="fc" id="L1646">        Assert.assertFalse(pinf.negativeOrNull());</span>
<span class="fc" id="L1647">        Assert.assertTrue(pinf.positiveOrNull());</span>
<span class="fc" id="L1648">        Assert.assertFalse(pinf.strictlyNegative());</span>
<span class="fc" id="L1649">        Assert.assertTrue(pinf.strictlyPositive());</span>

<span class="fc" id="L1651">        Assert.assertTrue(pinf.negate().negativeOrNull());</span>
<span class="fc" id="L1652">        Assert.assertFalse(pinf.negate().positiveOrNull());</span>
<span class="fc" id="L1653">        Assert.assertTrue(pinf.negate().strictlyNegative());</span>
<span class="fc" id="L1654">        Assert.assertFalse(pinf.negate().strictlyPositive());</span>

<span class="fc" id="L1656">        Assert.assertTrue(ninf.negativeOrNull());</span>
<span class="fc" id="L1657">        Assert.assertFalse(ninf.positiveOrNull());</span>
<span class="fc" id="L1658">        Assert.assertTrue(ninf.strictlyNegative());</span>
<span class="fc" id="L1659">        Assert.assertFalse(ninf.strictlyPositive());</span>

<span class="fc" id="L1661">        Assert.assertFalse(ninf.negate().negativeOrNull());</span>
<span class="fc" id="L1662">        Assert.assertTrue(ninf.negate().positiveOrNull());</span>
<span class="fc" id="L1663">        Assert.assertFalse(ninf.negate().strictlyNegative());</span>
<span class="fc" id="L1664">        Assert.assertTrue(ninf.negate().strictlyPositive());</span>

<span class="fc" id="L1666">    }</span>

    @Test
    public void testSpecialConstructors() {
<span class="fc" id="L1670">        Assert.assertEquals(ninf, field.newDfp(Double.NEGATIVE_INFINITY));</span>
<span class="fc" id="L1671">        Assert.assertEquals(ninf, field.newDfp(&quot;-Infinity&quot;));</span>
<span class="fc" id="L1672">        Assert.assertEquals(pinf, field.newDfp(Double.POSITIVE_INFINITY));</span>
<span class="fc" id="L1673">        Assert.assertEquals(pinf, field.newDfp(&quot;Infinity&quot;));</span>
<span class="fc" id="L1674">        Assert.assertTrue(field.newDfp(Double.NaN).isNaN());</span>
<span class="fc" id="L1675">        Assert.assertTrue(field.newDfp(&quot;NaN&quot;).isNaN());</span>
<span class="fc" id="L1676">    }</span>

    @Test
    public void testEqualsHashcodeContract() {
<span class="fc" id="L1680">        DfpField var1 = new DfpField(1);</span>
<span class="fc" id="L1681">        Dfp var6 = var1.newDfp(-0.0d);</span>
<span class="fc" id="L1682">        Dfp var5 = var1.newDfp(0L);</span>

        // Checks the contract:  equals-hashcode on var5 and var6
<span class="pc bpc" id="L1685" title="2 of 4 branches missed.">        Assert.assertTrue(var5.equals(var6) ? var5.hashCode() == var6.hashCode() : true);</span>
<span class="fc" id="L1686">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>