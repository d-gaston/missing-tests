<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UnivariateDifferentiableFunctionTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_math4$All_in_commons_math4.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math4.analysis.function</a> &gt; <span class="el_source">UnivariateDifferentiableFunctionTest.java</span></div><h1>UnivariateDifferentiableFunctionTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.commons.math4.analysis.function;

import org.apache.commons.math4.analysis.differentiation.DerivativeStructure;
import org.apache.commons.math4.util.FastMath;
import org.junit.Assert;
import org.junit.Test;

/**
 * Test for all classes in org.apache.commons.math4.analysis.function that implement UnivariateDifferentiableFunction explicitly.
 */
<span class="fc" id="L28">public class UnivariateDifferentiableFunctionTest {</span>

<span class="fc" id="L30">    private static final double EPS = Math.ulp(1d);</span>

    @Test
    public void testAcos() {
<span class="fc" id="L34">        Acos acos = new Acos();</span>
<span class="fc" id="L35">        Assert.assertEquals(FastMath.PI/3, acos.value(0.5), EPS);</span>
<span class="fc" id="L36">        Assert.assertEquals(FastMath.PI/4, acos.value(Double.valueOf(1/FastMath.sqrt(2))), EPS);</span>
<span class="fc" id="L37">        double a = 0.5;</span>
<span class="fc" id="L38">        Assert.assertEquals(-1/FastMath.sqrt(1-FastMath.pow(a,2)), acos.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L39">    }</span>

    @Test
    public void testAcosh() {
<span class="fc" id="L43">        Acosh acosh = new Acosh();</span>
<span class="fc" id="L44">        Assert.assertEquals(0,acosh.value(1), EPS);</span>
<span class="fc" id="L45">        double a = 1.2345;</span>
<span class="fc" id="L46">        Assert.assertEquals(a,acosh.value(FastMath.cosh(a)), EPS);</span>
<span class="fc" id="L47">        Assert.assertEquals(1/(FastMath.sqrt(a-1)*FastMath.sqrt(a+1)),acosh.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L48">    }</span>

    @Test
    public void testAsin() {
<span class="fc" id="L52">        Asin asin = new Asin();</span>
<span class="fc" id="L53">        double a = 1.2345;</span>
<span class="fc" id="L54">        Assert.assertEquals(a, asin.value(FastMath.sin(a)), EPS);</span>
<span class="fc" id="L55">        Assert.assertEquals(1/FastMath.sqrt(1 - FastMath.pow(a,2)), asin.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L56">    }</span>

    @Test
    public void testAsinh() {
<span class="fc" id="L60">        Asinh asinh = new Asinh();</span>
<span class="fc" id="L61">        double a = 1.2345;</span>
<span class="fc" id="L62">        Assert.assertEquals(a, asinh.value(FastMath.sinh(a)), EPS);</span>
<span class="fc" id="L63">        Assert.assertEquals(1/FastMath.sqrt(FastMath.pow(a,2.0) + 1), asinh.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L64">    }</span>

    @Test
    public void testAtan() {
<span class="fc" id="L68">        Atan atan = new Atan();</span>
<span class="fc" id="L69">        double a = 1.2345;</span>
<span class="fc" id="L70">        Assert.assertEquals(a, atan.value(FastMath.tan(a)), EPS);</span>
<span class="fc" id="L71">        Assert.assertEquals(1/(FastMath.pow(a,2.0) + 1), atan.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L72">    }</span>

    @Test
    public void testAtanh() {
<span class="fc" id="L76">        Atanh atanh = new Atanh();</span>
<span class="fc" id="L77">        double a = 1.2345;</span>
<span class="fc" id="L78">        Assert.assertEquals(a, atanh.value(FastMath.tanh(a)), EPS);</span>
<span class="fc" id="L79">        Assert.assertEquals(1/(1 - FastMath.pow(a,2.0)), atanh.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L80">    }</span>

    @Test
    public void testCbrt() {
<span class="fc" id="L84">        Cbrt cbrt = new Cbrt();</span>
<span class="fc" id="L85">        double a = 1.2345;</span>
<span class="fc" id="L86">        Assert.assertEquals(a, cbrt.value(FastMath.pow(a,3)), EPS);</span>
<span class="fc" id="L87">        Assert.assertEquals(1.0/(3.0*FastMath.pow(a, 2.0/3.0)), cbrt.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L88">    }</span>

    @Test
    public void testConstant() {
<span class="fc" id="L92">        double a = 123.456;</span>
<span class="fc" id="L93">        Constant constantNeg1 = new Constant(-1);</span>
<span class="fc" id="L94">        Constant constant0 = new Constant(0);</span>
<span class="fc" id="L95">        Constant constant5 = new Constant(5);</span>
<span class="fc" id="L96">        Assert.assertEquals(-1, constantNeg1.value(a), EPS);</span>
<span class="fc" id="L97">        Assert.assertEquals(0, constant0.value(a), EPS);</span>
<span class="fc" id="L98">        Assert.assertEquals(5, constant5.value(a), EPS);</span>
<span class="fc" id="L99">        Assert.assertEquals(0, constantNeg1.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L100">        Assert.assertEquals(0, constant0.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L101">        Assert.assertEquals(0, constant5.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L102">    }</span>

    @Test
    public void testCos() {
<span class="fc" id="L106">        Cos cos = new Cos();</span>
<span class="fc" id="L107">        double a = 0.987;</span>
<span class="fc" id="L108">        Assert.assertEquals(a, cos.value(FastMath.acos(a)), EPS);</span>
<span class="fc" id="L109">        Assert.assertEquals(-FastMath.sin(a), cos.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L110">    }</span>

    @Test
    public void testCosh() {
<span class="fc" id="L114">        Cosh cosh = new Cosh();</span>
<span class="fc" id="L115">        double a = 1.2345;</span>
<span class="fc" id="L116">        Assert.assertEquals(a, cosh.value(FastMath.acosh(a)), EPS);</span>
<span class="fc" id="L117">        Assert.assertEquals(FastMath.sinh(a), cosh.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L118">    }</span>

    @Test
    public void testExp() {
<span class="fc" id="L122">        Exp exp= new Exp();</span>
<span class="fc" id="L123">        double a = 1.2345;</span>
<span class="fc" id="L124">        Assert.assertEquals(a, exp.value(FastMath.log(a)), EPS);</span>
<span class="fc" id="L125">        Assert.assertEquals(exp.value(a), exp.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L126">    }</span>

    @Test
    public void testExpm1() {
<span class="fc" id="L130">        Expm1 expm1 = new Expm1();</span>
<span class="fc" id="L131">        double a = 1.2345;</span>
<span class="fc" id="L132">        Assert.assertEquals(a-1, expm1.value(FastMath.log(a)), EPS);</span>
<span class="fc" id="L133">        Assert.assertEquals(FastMath.exp(a), expm1.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L134">    }</span>

    @Test
    public void testIdentity() {
<span class="fc" id="L138">        Identity identity = new Identity();</span>
<span class="fc" id="L139">        double a = 123.456;</span>
<span class="fc" id="L140">        Assert.assertEquals(a, identity.value(a), EPS);</span>
<span class="fc" id="L141">        Assert.assertEquals(1, identity.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L142">    }</span>

    @Test
    public void testInverse() {
<span class="fc" id="L146">        Inverse inverse = new Inverse();</span>
<span class="fc" id="L147">        double a = 123.456;</span>
<span class="fc" id="L148">        Assert.assertEquals(1/a, inverse.value(a), EPS);</span>
<span class="fc" id="L149">        Assert.assertEquals(-1/FastMath.pow(a,2), inverse.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L150">    }</span>

    @Test
    public void testLog() {
<span class="fc" id="L154">        double a = 123.456;</span>
<span class="fc" id="L155">        Log log = new Log();</span>
<span class="fc" id="L156">        Assert.assertEquals(Math.log(a), log.value(a), EPS);</span>
<span class="fc" id="L157">        Assert.assertEquals(1/a,log.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L158">    }</span>

    @Test
    public void testLog10() {
<span class="fc" id="L162">        Log10 log10 = new Log10();</span>
<span class="fc" id="L163">        double a =1.2345;</span>
<span class="fc" id="L164">        Assert.assertEquals(a, log10.value(FastMath.pow(10, a)), EPS);</span>
<span class="fc" id="L165">        Assert.assertEquals(1/(a*FastMath.log(10)), log10.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L166">    }</span>

    @Test
    public void testLog1p() {
<span class="fc" id="L170">        Log1p log1p = new Log1p();</span>
<span class="fc" id="L171">        double a = 1.2345;</span>
<span class="fc" id="L172">        Assert.assertEquals(a+1,FastMath.exp(log1p.value(a)), EPS);</span>
<span class="fc" id="L173">        Assert.assertEquals(1/(1+a), log1p.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L174">    }</span>

    @Test
    public void testMinus() {
<span class="fc" id="L178">        Minus minus = new Minus();</span>
<span class="fc" id="L179">        double a = 123.456;</span>
<span class="fc" id="L180">        Assert.assertEquals(-a, minus.value(a), EPS);</span>
<span class="fc" id="L181">        Assert.assertEquals(-1, minus.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L182">    }</span>

    @Test
    public void testPower() {
<span class="fc" id="L186">        Power squared = new Power(2);</span>
<span class="fc" id="L187">        Power power2_5 = new Power(2.5);</span>
<span class="fc" id="L188">        double a = 123.456;</span>
<span class="fc" id="L189">        Assert.assertEquals(FastMath.pow(a,2), squared.value(a), EPS);</span>
<span class="fc" id="L190">        Assert.assertEquals(FastMath.pow(a, 2.5), power2_5.value(a), EPS);</span>
<span class="fc" id="L191">        Assert.assertEquals(2*a, squared.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L192">        Assert.assertEquals(2.5*FastMath.pow(a,1.5), power2_5.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L193">    }</span>

    @Test
    public void testSin() {
<span class="fc" id="L197">        Sin sin = new Sin();</span>
<span class="fc" id="L198">        double a = 0.987;</span>
<span class="fc" id="L199">        Assert.assertEquals(a, sin.value(FastMath.asin(a)), EPS);</span>
<span class="fc" id="L200">        Assert.assertEquals(FastMath.cos(a), sin.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L201">    }</span>

    @Test
    public void testSinh() {
<span class="fc" id="L205">        Sinh sinh = new Sinh();</span>
<span class="fc" id="L206">        double a = 1.2345;</span>
<span class="fc" id="L207">        Assert.assertEquals(a, sinh.value(FastMath.asinh(a)), EPS);</span>
<span class="fc" id="L208">        Assert.assertEquals(FastMath.cosh(a), sinh.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L209">    }</span>

    @Test
    public void testTan() {
<span class="fc" id="L213">        Tan tan = new Tan();</span>
<span class="fc" id="L214">        double a = 0.987;</span>
<span class="fc" id="L215">        Assert.assertEquals(a, tan.value(FastMath.atan(a)), EPS);</span>
<span class="fc" id="L216">        Assert.assertEquals(1/(FastMath.pow(FastMath.cos(a),2)), tan.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L217">    }</span>

    @Test
    public void testTanh() {
<span class="fc" id="L221">        Tanh tanh = new Tanh();</span>
<span class="fc" id="L222">        double a = 0.987;</span>
<span class="fc" id="L223">        Assert.assertEquals(a, tanh.value(FastMath.atanh(a)), EPS);</span>
<span class="fc" id="L224">        Assert.assertEquals(1/FastMath.pow(FastMath.cosh(a),2), tanh.value(new DerivativeStructure(1,1,0,a)).getPartialDerivative(1), EPS);</span>
<span class="fc" id="L225">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>