<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SimpleRegressionTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_math4$All_in_commons_math4.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math4.stat.regression</a> &gt; <span class="el_source">SimpleRegressionTest.java</span></div><h1>SimpleRegressionTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.commons.math4.stat.regression;

import java.util.Random;

import org.apache.commons.math4.exception.MathIllegalArgumentException;
import org.apache.commons.math4.exception.OutOfRangeException;
import org.apache.commons.rng.UniformRandomProvider;
import org.apache.commons.rng.simple.RandomSource;
import org.apache.commons.math4.stat.regression.ModelSpecificationException;
import org.apache.commons.math4.stat.regression.RegressionResults;
import org.apache.commons.math4.stat.regression.SimpleRegression;
import org.apache.commons.math4.stat.regression.UpdatingMultipleLinearRegression;
import org.apache.commons.math4.util.FastMath;
import org.junit.Assert;
import org.junit.Test;


/**
 * Test cases for the TestStatistic class.
 *
 */

<span class="fc" id="L39">public final class SimpleRegressionTest {</span>

    /*
     * NIST &quot;Norris&quot; refernce data set from
     * http://www.itl.nist.gov/div898/strd/lls/data/LINKS/DATA/Norris.dat
     * Strangely, order is {y,x}
     */
<span class="fc" id="L46">    private double[][] data = { { 0.1, 0.2 }, {338.8, 337.4 }, {118.1, 118.2 },</span>
            {888.0, 884.6 }, {9.2, 10.1 }, {228.1, 226.5 }, {668.5, 666.3 }, {998.5, 996.3 },
            {449.1, 448.6 }, {778.9, 777.0 }, {559.2, 558.2 }, {0.3, 0.4 }, {0.1, 0.6 }, {778.1, 775.5 },
            {668.8, 666.9 }, {339.3, 338.0 }, {448.9, 447.5 }, {10.8, 11.6 }, {557.7, 556.0 },
            {228.3, 228.1 }, {998.0, 995.8 }, {888.8, 887.6 }, {119.6, 120.2 }, {0.3, 0.3 },
            {0.6, 0.3 }, {557.6, 556.8 }, {339.3, 339.1 }, {888.0, 887.2 }, {998.5, 999.0 },
            {778.9, 779.0 }, {10.2, 11.1 }, {117.6, 118.3 }, {228.9, 229.2 }, {668.4, 669.1 },
            {449.2, 448.9 }, {0.2, 0.5 }
    };

    /*
     * Correlation example from
     * http://www.xycoon.com/correlation.htm
     */
<span class="fc" id="L60">    private double[][] corrData = { { 101.0, 99.2 }, {100.1, 99.0 }, {100.0, 100.0 },</span>
            {90.6, 111.6 }, {86.5, 122.2 }, {89.7, 117.6 }, {90.6, 121.1 }, {82.8, 136.0 },
            {70.1, 154.2 }, {65.4, 153.6 }, {61.3, 158.5 }, {62.5, 140.6 }, {63.6, 136.2 },
            {52.6, 168.0 }, {59.7, 154.3 }, {59.5, 149.0 }, {61.3, 165.5 }
    };

    /*
     * From Moore and Mcabe, &quot;Introduction to the Practice of Statistics&quot;
     * Example 10.3
     */
<span class="fc" id="L70">    private double[][] infData = { { 15.6, 5.2 }, {26.8, 6.1 }, {37.8, 8.7 }, {36.4, 8.5 },</span>
            {35.5, 8.8 }, {18.6, 4.9 }, {15.3, 4.5 }, {7.9, 2.5 }, {0.0, 1.1 }
    };

    /*
     * Points to remove in the remove tests
     */
<span class="fc" id="L77">    private double[][] removeSingle = {infData[1]};</span>
<span class="fc" id="L78">    private double[][] removeMultiple = { infData[1], infData[2] };</span>
<span class="fc" id="L79">    private double removeX = infData[0][0];</span>
<span class="fc" id="L80">    private double removeY = infData[0][1];</span>


    /*
     * Data with bad linear fit
     */
<span class="fc" id="L86">    private double[][] infData2 = { { 1, 1 }, {2, 0 }, {3, 5 }, {4, 2 },</span>
            {5, -1 }, {6, 12 }
    };


    /*
     * Data from NIST NOINT1
     */
<span class="fc" id="L94">    private double[][] noint1 = {</span>
        {130.0,60.0},
        {131.0,61.0},
        {132.0,62.0},
        {133.0,63.0},
        {134.0,64.0},
        {135.0,65.0},
        {136.0,66.0},
        {137.0,67.0},
        {138.0,68.0},
        {139.0,69.0},
        {140.0,70.0}
    };

    /*
     * Data from NIST NOINT2
     *
     */
<span class="fc" id="L112">    private double[][] noint2 = {</span>
        {3.0,4},
        {4,5},
        {4,6}
    };


    /**
     * Test that the SimpleRegression objects generated from combining two
     * SimpleRegression objects created from subsets of data are identical to
     * SimpleRegression objects created from the combined data.
     */
    @Test
    public void testAppend() {
<span class="fc" id="L126">        check(false);</span>
<span class="fc" id="L127">        check(true);</span>
<span class="fc" id="L128">    }</span>

    /**
     * Checks that adding data to a single model gives the same result
     * as adding &quot;parts&quot; of the dataset to smaller models and using append
     * to aggregate the smaller models.
     *
     * @param includeIntercept
     */
    private void check(boolean includeIntercept) {
<span class="fc" id="L138">        final int sets = 2;</span>
<span class="fc" id="L139">        final UniformRandomProvider rand = RandomSource.create(RandomSource.ISAAC, 10L);// Seed can be changed</span>
<span class="fc" id="L140">        final SimpleRegression whole = new SimpleRegression(includeIntercept);// regression of the whole set</span>
<span class="fc" id="L141">        final SimpleRegression parts = new SimpleRegression(includeIntercept);// regression with parts.</span>

<span class="fc bfc" id="L143" title="All 2 branches covered.">        for (int s = 0; s &lt; sets; s++) {// loop through each subset of data.</span>
<span class="fc" id="L144">            final double coef = rand.nextDouble();</span>
<span class="fc" id="L145">            final SimpleRegression sub = new SimpleRegression(includeIntercept);// sub regression</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">            for (int i = 0; i &lt; 5; i++) { // loop through individual samlpes.</span>
<span class="fc" id="L147">                final double x = rand.nextDouble();</span>
<span class="fc" id="L148">                final double y = x * coef + rand.nextDouble();// some noise</span>
<span class="fc" id="L149">                sub.addData(x, y);</span>
<span class="fc" id="L150">                whole.addData(x, y);</span>
            }
<span class="fc" id="L152">            parts.append(sub);</span>
<span class="fc" id="L153">            Assert.assertTrue(equals(parts, whole, 1E-6));</span>
        }
<span class="fc" id="L155">    }</span>

    /**
     * Returns true iff the statistics reported by model1 are all within tol of
     * those reported by model2.
     *
     * @param model1 first model
     * @param model2 second model
     * @param tol tolerance
     * @return true if the two models report the same regression stats
     */
    private boolean equals(SimpleRegression model1, SimpleRegression model2, double tol) {
<span class="pc bpc" id="L167" title="1 of 2 branches missed.">        if (model1.getN() != model2.getN()) {</span>
<span class="nc" id="L168">            return false;</span>
        }
<span class="pc bpc" id="L170" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getIntercept() - model2.getIntercept()) &gt; tol) {</span>
<span class="nc" id="L171">            return false;</span>
        }
<span class="pc bpc" id="L173" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getInterceptStdErr() - model2.getInterceptStdErr()) &gt; tol) {</span>
<span class="nc" id="L174">            return false;</span>
        }
<span class="pc bpc" id="L176" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getMeanSquareError() - model2.getMeanSquareError()) &gt; tol) {</span>
<span class="nc" id="L177">            return false;</span>
        }
<span class="pc bpc" id="L179" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getR() - model2.getR()) &gt; tol) {</span>
<span class="nc" id="L180">            return false;</span>
        }
<span class="pc bpc" id="L182" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getRegressionSumSquares() - model2.getRegressionSumSquares()) &gt; tol) {</span>
<span class="nc" id="L183">            return false;</span>
        }
<span class="pc bpc" id="L185" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getRSquare() - model2.getRSquare()) &gt; tol) {</span>
<span class="nc" id="L186">            return false;</span>
        }
<span class="pc bpc" id="L188" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getSignificance() - model2.getSignificance()) &gt; tol) {</span>
<span class="nc" id="L189">            return false;</span>
        }
<span class="pc bpc" id="L191" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getSlope() - model2.getSlope()) &gt; tol) {</span>
<span class="nc" id="L192">            return false;</span>
        }
<span class="pc bpc" id="L194" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getSlopeConfidenceInterval() - model2.getSlopeConfidenceInterval()) &gt; tol) {</span>
<span class="nc" id="L195">            return false;</span>
        }
<span class="pc bpc" id="L197" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getSlopeStdErr() - model2.getSlopeStdErr()) &gt; tol) {</span>
<span class="nc" id="L198">            return false;</span>
        }
<span class="pc bpc" id="L200" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getSumOfCrossProducts() - model2.getSumOfCrossProducts()) &gt; tol) {</span>
<span class="nc" id="L201">            return false;</span>
        }
<span class="pc bpc" id="L203" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getSumSquaredErrors() - model2.getSumSquaredErrors()) &gt; tol) {</span>
<span class="nc" id="L204">            return false;</span>
        }
<span class="pc bpc" id="L206" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getTotalSumSquares() - model2.getTotalSumSquares()) &gt; tol) {</span>
<span class="nc" id="L207">            return false;</span>
        }
<span class="pc bpc" id="L209" title="1 of 2 branches missed.">        if (FastMath.abs(model1.getXSumSquares() - model2.getXSumSquares()) &gt; tol) {</span>
<span class="nc" id="L210">            return false;</span>
        }
<span class="fc" id="L212">        return true;</span>
    }

    @Test
    public void testRegressIfaceMethod(){
<span class="fc" id="L217">        final SimpleRegression regression = new SimpleRegression(true);</span>
<span class="fc" id="L218">        final UpdatingMultipleLinearRegression iface = regression;</span>
<span class="fc" id="L219">        final SimpleRegression regressionNoint = new SimpleRegression( false );</span>
<span class="fc" id="L220">        final SimpleRegression regressionIntOnly= new SimpleRegression( false );</span>
<span class="fc bfc" id="L221" title="All 2 branches covered.">        for (int i = 0; i &lt; data.length; i++) {</span>
<span class="fc" id="L222">            iface.addObservation( new double[]{data[i][1]}, data[i][0]);</span>
<span class="fc" id="L223">            regressionNoint.addData(data[i][1], data[i][0]);</span>
<span class="fc" id="L224">            regressionIntOnly.addData(1.0, data[i][0]);</span>
        }

        //should not be null
<span class="fc" id="L228">        final RegressionResults fullReg = iface.regress( );</span>
<span class="fc" id="L229">        Assert.assertNotNull(fullReg);</span>
<span class="fc" id="L230">        Assert.assertEquals(&quot;intercept&quot;, regression.getIntercept(), fullReg.getParameterEstimate(0), 1.0e-16);</span>
<span class="fc" id="L231">        Assert.assertEquals(&quot;intercept std err&quot;,regression.getInterceptStdErr(), fullReg.getStdErrorOfEstimate(0),1.0E-16);</span>
<span class="fc" id="L232">        Assert.assertEquals(&quot;slope&quot;, regression.getSlope(), fullReg.getParameterEstimate(1), 1.0e-16);</span>
<span class="fc" id="L233">        Assert.assertEquals(&quot;slope std err&quot;,regression.getSlopeStdErr(), fullReg.getStdErrorOfEstimate(1),1.0E-16);</span>
<span class="fc" id="L234">        Assert.assertEquals(&quot;number of observations&quot;,regression.getN(), fullReg.getN());</span>
<span class="fc" id="L235">        Assert.assertEquals(&quot;r-square&quot;,regression.getRSquare(), fullReg.getRSquared(), 1.0E-16);</span>
<span class="fc" id="L236">        Assert.assertEquals(&quot;SSR&quot;, regression.getRegressionSumSquares(), fullReg.getRegressionSumSquares() ,1.0E-16);</span>
<span class="fc" id="L237">        Assert.assertEquals(&quot;MSE&quot;, regression.getMeanSquareError(), fullReg.getMeanSquareError() ,1.0E-16);</span>
<span class="fc" id="L238">        Assert.assertEquals(&quot;SSE&quot;, regression.getSumSquaredErrors(), fullReg.getErrorSumSquares() ,1.0E-16);</span>


<span class="fc" id="L241">        final RegressionResults noInt   = iface.regress( new int[]{1} );</span>
<span class="fc" id="L242">        Assert.assertNotNull(noInt);</span>
<span class="fc" id="L243">        Assert.assertEquals(&quot;slope&quot;, regressionNoint.getSlope(), noInt.getParameterEstimate(0), 1.0e-12);</span>
<span class="fc" id="L244">        Assert.assertEquals(&quot;slope std err&quot;,regressionNoint.getSlopeStdErr(), noInt.getStdErrorOfEstimate(0),1.0E-16);</span>
<span class="fc" id="L245">        Assert.assertEquals(&quot;number of observations&quot;,regressionNoint.getN(), noInt.getN());</span>
<span class="fc" id="L246">        Assert.assertEquals(&quot;r-square&quot;,regressionNoint.getRSquare(), noInt.getRSquared(), 1.0E-16);</span>
<span class="fc" id="L247">        Assert.assertEquals(&quot;SSR&quot;, regressionNoint.getRegressionSumSquares(), noInt.getRegressionSumSquares() ,1.0E-8);</span>
<span class="fc" id="L248">        Assert.assertEquals(&quot;MSE&quot;, regressionNoint.getMeanSquareError(), noInt.getMeanSquareError() ,1.0E-16);</span>
<span class="fc" id="L249">        Assert.assertEquals(&quot;SSE&quot;, regressionNoint.getSumSquaredErrors(), noInt.getErrorSumSquares() ,1.0E-16);</span>

<span class="fc" id="L251">        final RegressionResults onlyInt = iface.regress( new int[]{0} );</span>
<span class="fc" id="L252">        Assert.assertNotNull(onlyInt);</span>
<span class="fc" id="L253">        Assert.assertEquals(&quot;slope&quot;, regressionIntOnly.getSlope(), onlyInt.getParameterEstimate(0), 1.0e-12);</span>
<span class="fc" id="L254">        Assert.assertEquals(&quot;slope std err&quot;,regressionIntOnly.getSlopeStdErr(), onlyInt.getStdErrorOfEstimate(0),1.0E-12);</span>
<span class="fc" id="L255">        Assert.assertEquals(&quot;number of observations&quot;,regressionIntOnly.getN(), onlyInt.getN());</span>
<span class="fc" id="L256">        Assert.assertEquals(&quot;r-square&quot;,regressionIntOnly.getRSquare(), onlyInt.getRSquared(), 1.0E-14);</span>
<span class="fc" id="L257">        Assert.assertEquals(&quot;SSE&quot;, regressionIntOnly.getSumSquaredErrors(), onlyInt.getErrorSumSquares() ,1.0E-8);</span>
<span class="fc" id="L258">        Assert.assertEquals(&quot;SSR&quot;, regressionIntOnly.getRegressionSumSquares(), onlyInt.getRegressionSumSquares() ,1.0E-8);</span>
<span class="fc" id="L259">        Assert.assertEquals(&quot;MSE&quot;, regressionIntOnly.getMeanSquareError(), onlyInt.getMeanSquareError() ,1.0E-8);</span>

<span class="fc" id="L261">    }</span>

    /**
     * Verify that regress generates exceptions as advertised for bad model specifications.
     */
    @Test
    public void testRegressExceptions() {
        // No intercept
<span class="fc" id="L269">        final SimpleRegression noIntRegression = new SimpleRegression(false);</span>
<span class="fc" id="L270">        noIntRegression.addData(noint2[0][1], noint2[0][0]);</span>
<span class="fc" id="L271">        noIntRegression.addData(noint2[1][1], noint2[1][0]);</span>
<span class="fc" id="L272">        noIntRegression.addData(noint2[2][1], noint2[2][0]);</span>
        try { // null array
<span class="nc" id="L274">            noIntRegression.regress(null);</span>
<span class="nc" id="L275">            Assert.fail(&quot;Expecting MathIllegalArgumentException for null array&quot;);</span>
<span class="fc" id="L276">        } catch (MathIllegalArgumentException ex) {</span>
            // Expected
<span class="nc" id="L278">        }</span>
        try { // empty array
<span class="nc" id="L280">            noIntRegression.regress(new int[] {});</span>
<span class="nc" id="L281">            Assert.fail(&quot;Expecting MathIllegalArgumentException for empty array&quot;);</span>
<span class="fc" id="L282">        } catch (MathIllegalArgumentException ex) {</span>
            // Expected
<span class="nc" id="L284">        }</span>
        try { // more than 1 regressor
<span class="nc" id="L286">            noIntRegression.regress(new int[] {0, 1});</span>
<span class="nc" id="L287">            Assert.fail(&quot;Expecting ModelSpecificationException - too many regressors&quot;);</span>
<span class="fc" id="L288">        } catch (ModelSpecificationException ex) {</span>
            // Expected
<span class="nc" id="L290">        }</span>
        try { // invalid regressor
<span class="nc" id="L292">            noIntRegression.regress(new int[] {1});</span>
<span class="nc" id="L293">            Assert.fail(&quot;Expecting OutOfRangeException - invalid regression&quot;);</span>
<span class="fc" id="L294">        } catch (OutOfRangeException ex) {</span>
            // Expected
<span class="nc" id="L296">        }</span>

        // With intercept
<span class="fc" id="L299">        final SimpleRegression regression = new SimpleRegression(true);</span>
<span class="fc" id="L300">        regression.addData(noint2[0][1], noint2[0][0]);</span>
<span class="fc" id="L301">        regression.addData(noint2[1][1], noint2[1][0]);</span>
<span class="fc" id="L302">        regression.addData(noint2[2][1], noint2[2][0]);</span>
        try { // null array
<span class="nc" id="L304">            regression.regress(null);</span>
<span class="nc" id="L305">            Assert.fail(&quot;Expecting MathIllegalArgumentException for null array&quot;);</span>
<span class="fc" id="L306">        } catch (MathIllegalArgumentException ex) {</span>
            // Expected
<span class="nc" id="L308">        }</span>
        try { // empty array
<span class="nc" id="L310">            regression.regress(new int[] {});</span>
<span class="nc" id="L311">            Assert.fail(&quot;Expecting MathIllegalArgumentException for empty array&quot;);</span>
<span class="fc" id="L312">        } catch (MathIllegalArgumentException ex) {</span>
            // Expected
<span class="nc" id="L314">        }</span>
        try { // more than 2 regressors
<span class="nc" id="L316">            regression.regress(new int[] {0, 1, 2});</span>
<span class="nc" id="L317">            Assert.fail(&quot;Expecting ModelSpecificationException - too many regressors&quot;);</span>
<span class="fc" id="L318">        } catch (ModelSpecificationException ex) {</span>
            // Expected
<span class="nc" id="L320">        }</span>
        try { // wrong order
<span class="nc" id="L322">            regression.regress(new int[] {1,0});</span>
<span class="nc" id="L323">            Assert.fail(&quot;Expecting ModelSpecificationException - invalid regression&quot;);</span>
<span class="fc" id="L324">        } catch (ModelSpecificationException ex) {</span>
            // Expected
<span class="nc" id="L326">        }</span>
        try { // out of range
<span class="nc" id="L328">            regression.regress(new int[] {3,4});</span>
<span class="nc" id="L329">            Assert.fail(&quot;Expecting OutOfRangeException&quot;);</span>
<span class="fc" id="L330">        } catch (OutOfRangeException ex) {</span>
            // Expected
<span class="nc" id="L332">        }</span>
        try { // out of range
<span class="nc" id="L334">            regression.regress(new int[] {0,2});</span>
<span class="nc" id="L335">            Assert.fail(&quot;Expecting OutOfRangeException&quot;);</span>
<span class="fc" id="L336">        } catch (OutOfRangeException ex) {</span>
            // Expected
<span class="nc" id="L338">        }</span>
        try { // out of range
<span class="nc" id="L340">            regression.regress(new int[] {2});</span>
<span class="nc" id="L341">            Assert.fail(&quot;Expecting OutOfRangeException&quot;);</span>
<span class="fc" id="L342">        } catch (OutOfRangeException ex) {</span>
            // Expected
<span class="nc" id="L344">        }</span>
<span class="fc" id="L345">    }</span>

    @Test
    public void testNoInterceot_noint2(){
<span class="fc" id="L349">         SimpleRegression regression = new SimpleRegression(false);</span>
<span class="fc" id="L350">         regression.addData(noint2[0][1], noint2[0][0]);</span>
<span class="fc" id="L351">         regression.addData(noint2[1][1], noint2[1][0]);</span>
<span class="fc" id="L352">         regression.addData(noint2[2][1], noint2[2][0]);</span>
<span class="fc" id="L353">         Assert.assertEquals(&quot;intercept&quot;, 0, regression.getIntercept(), 0);</span>
<span class="fc" id="L354">         Assert.assertEquals(&quot;slope&quot;, 0.727272727272727,</span>
<span class="fc" id="L355">                 regression.getSlope(), 10E-12);</span>
<span class="fc" id="L356">         Assert.assertEquals(&quot;slope std err&quot;, 0.420827318078432E-01,</span>
<span class="fc" id="L357">                regression.getSlopeStdErr(),10E-12);</span>
<span class="fc" id="L358">        Assert.assertEquals(&quot;number of observations&quot;, 3, regression.getN());</span>
<span class="fc" id="L359">        Assert.assertEquals(&quot;r-square&quot;, 0.993348115299335,</span>
<span class="fc" id="L360">            regression.getRSquare(), 10E-12);</span>
<span class="fc" id="L361">        Assert.assertEquals(&quot;SSR&quot;, 40.7272727272727,</span>
<span class="fc" id="L362">            regression.getRegressionSumSquares(), 10E-9);</span>
<span class="fc" id="L363">        Assert.assertEquals(&quot;MSE&quot;, 0.136363636363636,</span>
<span class="fc" id="L364">            regression.getMeanSquareError(), 10E-10);</span>
<span class="fc" id="L365">        Assert.assertEquals(&quot;SSE&quot;, 0.272727272727273,</span>
<span class="fc" id="L366">            regression.getSumSquaredErrors(),10E-9);</span>
<span class="fc" id="L367">    }</span>

    @Test
    public void testNoIntercept_noint1(){
<span class="fc" id="L371">        SimpleRegression regression = new SimpleRegression(false);</span>
<span class="fc bfc" id="L372" title="All 2 branches covered.">        for (int i = 0; i &lt; noint1.length; i++) {</span>
<span class="fc" id="L373">            regression.addData(noint1[i][1], noint1[i][0]);</span>
        }
<span class="fc" id="L375">        Assert.assertEquals(&quot;intercept&quot;, 0, regression.getIntercept(), 0);</span>
<span class="fc" id="L376">        Assert.assertEquals(&quot;slope&quot;, 2.07438016528926, regression.getSlope(), 10E-12);</span>
<span class="fc" id="L377">        Assert.assertEquals(&quot;slope std err&quot;, 0.165289256198347E-01,</span>
<span class="fc" id="L378">                regression.getSlopeStdErr(),10E-12);</span>
<span class="fc" id="L379">        Assert.assertEquals(&quot;number of observations&quot;, 11, regression.getN());</span>
<span class="fc" id="L380">        Assert.assertEquals(&quot;r-square&quot;, 0.999365492298663,</span>
<span class="fc" id="L381">            regression.getRSquare(), 10E-12);</span>
<span class="fc" id="L382">        Assert.assertEquals(&quot;SSR&quot;, 200457.727272727,</span>
<span class="fc" id="L383">            regression.getRegressionSumSquares(), 10E-9);</span>
<span class="fc" id="L384">        Assert.assertEquals(&quot;MSE&quot;, 12.7272727272727,</span>
<span class="fc" id="L385">            regression.getMeanSquareError(), 10E-10);</span>
<span class="fc" id="L386">        Assert.assertEquals(&quot;SSE&quot;, 127.272727272727,</span>
<span class="fc" id="L387">            regression.getSumSquaredErrors(),10E-9);</span>

<span class="fc" id="L389">    }</span>

    @Test
    public void testNorris() {
<span class="fc" id="L393">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc bfc" id="L394" title="All 2 branches covered.">        for (int i = 0; i &lt; data.length; i++) {</span>
<span class="fc" id="L395">            regression.addData(data[i][1], data[i][0]);</span>
        }
        // Tests against certified values from
        // http://www.itl.nist.gov/div898/strd/lls/data/LINKS/DATA/Norris.dat
<span class="fc" id="L399">        Assert.assertEquals(&quot;slope&quot;, 1.00211681802045, regression.getSlope(), 10E-12);</span>
<span class="fc" id="L400">        Assert.assertEquals(&quot;slope std err&quot;, 0.429796848199937E-03,</span>
<span class="fc" id="L401">                regression.getSlopeStdErr(),10E-12);</span>
<span class="fc" id="L402">        Assert.assertEquals(&quot;number of observations&quot;, 36, regression.getN());</span>
<span class="fc" id="L403">        Assert.assertEquals( &quot;intercept&quot;, -0.262323073774029,</span>
<span class="fc" id="L404">            regression.getIntercept(),10E-12);</span>
<span class="fc" id="L405">        Assert.assertEquals(&quot;std err intercept&quot;, 0.232818234301152,</span>
<span class="fc" id="L406">            regression.getInterceptStdErr(),10E-12);</span>
<span class="fc" id="L407">        Assert.assertEquals(&quot;r-square&quot;, 0.999993745883712,</span>
<span class="fc" id="L408">            regression.getRSquare(), 10E-12);</span>
<span class="fc" id="L409">        Assert.assertEquals(&quot;SSR&quot;, 4255954.13232369,</span>
<span class="fc" id="L410">            regression.getRegressionSumSquares(), 10E-9);</span>
<span class="fc" id="L411">        Assert.assertEquals(&quot;MSE&quot;, 0.782864662630069,</span>
<span class="fc" id="L412">            regression.getMeanSquareError(), 10E-10);</span>
<span class="fc" id="L413">        Assert.assertEquals(&quot;SSE&quot;, 26.6173985294224,</span>
<span class="fc" id="L414">            regression.getSumSquaredErrors(),10E-9);</span>
        // ------------  End certified data tests

<span class="fc" id="L417">        Assert.assertEquals( &quot;predict(0)&quot;,  -0.262323073774029,</span>
<span class="fc" id="L418">            regression.predict(0), 10E-12);</span>
<span class="fc" id="L419">        Assert.assertEquals(&quot;predict(1)&quot;, 1.00211681802045 - 0.262323073774029,</span>
<span class="fc" id="L420">            regression.predict(1), 10E-12);</span>
<span class="fc" id="L421">    }</span>

    @Test
    public void testCorr() {
<span class="fc" id="L425">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L426">        regression.addData(corrData);</span>
<span class="fc" id="L427">        Assert.assertEquals(&quot;number of observations&quot;, 17, regression.getN());</span>
<span class="fc" id="L428">        Assert.assertEquals(&quot;r-square&quot;, .896123, regression.getRSquare(), 10E-6);</span>
<span class="fc" id="L429">        Assert.assertEquals(&quot;r&quot;, -0.94663767742, regression.getR(), 1E-10);</span>
<span class="fc" id="L430">    }</span>

    @Test
    public void testNaNs() {
<span class="fc" id="L434">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L435">        Assert.assertTrue(&quot;intercept not NaN&quot;, Double.isNaN(regression.getIntercept()));</span>
<span class="fc" id="L436">        Assert.assertTrue(&quot;slope not NaN&quot;, Double.isNaN(regression.getSlope()));</span>
<span class="fc" id="L437">        Assert.assertTrue(&quot;slope std err not NaN&quot;, Double.isNaN(regression.getSlopeStdErr()));</span>
<span class="fc" id="L438">        Assert.assertTrue(&quot;intercept std err not NaN&quot;, Double.isNaN(regression.getInterceptStdErr()));</span>
<span class="fc" id="L439">        Assert.assertTrue(&quot;MSE not NaN&quot;, Double.isNaN(regression.getMeanSquareError()));</span>
<span class="fc" id="L440">        Assert.assertTrue(&quot;e not NaN&quot;, Double.isNaN(regression.getR()));</span>
<span class="fc" id="L441">        Assert.assertTrue(&quot;r-square not NaN&quot;, Double.isNaN(regression.getRSquare()));</span>
<span class="fc" id="L442">        Assert.assertTrue( &quot;RSS not NaN&quot;, Double.isNaN(regression.getRegressionSumSquares()));</span>
<span class="fc" id="L443">        Assert.assertTrue(&quot;SSE not NaN&quot;,Double.isNaN(regression.getSumSquaredErrors()));</span>
<span class="fc" id="L444">        Assert.assertTrue(&quot;SSTO not NaN&quot;, Double.isNaN(regression.getTotalSumSquares()));</span>
<span class="fc" id="L445">        Assert.assertTrue(&quot;predict not NaN&quot;, Double.isNaN(regression.predict(0)));</span>

<span class="fc" id="L447">        regression.addData(1, 2);</span>
<span class="fc" id="L448">        regression.addData(1, 3);</span>

        // No x variation, so these should still blow...
<span class="fc" id="L451">        Assert.assertTrue(&quot;intercept not NaN&quot;, Double.isNaN(regression.getIntercept()));</span>
<span class="fc" id="L452">        Assert.assertTrue(&quot;slope not NaN&quot;, Double.isNaN(regression.getSlope()));</span>
<span class="fc" id="L453">        Assert.assertTrue(&quot;slope std err not NaN&quot;, Double.isNaN(regression.getSlopeStdErr()));</span>
<span class="fc" id="L454">        Assert.assertTrue(&quot;intercept std err not NaN&quot;, Double.isNaN(regression.getInterceptStdErr()));</span>
<span class="fc" id="L455">        Assert.assertTrue(&quot;MSE not NaN&quot;, Double.isNaN(regression.getMeanSquareError()));</span>
<span class="fc" id="L456">        Assert.assertTrue(&quot;e not NaN&quot;, Double.isNaN(regression.getR()));</span>
<span class="fc" id="L457">        Assert.assertTrue(&quot;r-square not NaN&quot;, Double.isNaN(regression.getRSquare()));</span>
<span class="fc" id="L458">        Assert.assertTrue(&quot;RSS not NaN&quot;, Double.isNaN(regression.getRegressionSumSquares()));</span>
<span class="fc" id="L459">        Assert.assertTrue(&quot;SSE not NaN&quot;, Double.isNaN(regression.getSumSquaredErrors()));</span>
<span class="fc" id="L460">        Assert.assertTrue(&quot;predict not NaN&quot;, Double.isNaN(regression.predict(0)));</span>

        // but SSTO should be OK
<span class="pc bpc" id="L463" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;SSTO NaN&quot;, !Double.isNaN(regression.getTotalSumSquares()));</span>

<span class="fc" id="L465">        regression = new SimpleRegression();</span>

<span class="fc" id="L467">        regression.addData(1, 2);</span>
<span class="fc" id="L468">        regression.addData(3, 3);</span>

        // All should be OK except MSE, s(b0), s(b1) which need one more df
<span class="pc bpc" id="L471" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;interceptNaN&quot;, !Double.isNaN(regression.getIntercept()));</span>
<span class="pc bpc" id="L472" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;slope NaN&quot;, !Double.isNaN(regression.getSlope()));</span>
<span class="fc" id="L473">        Assert.assertTrue(&quot;slope std err not NaN&quot;, Double.isNaN(regression.getSlopeStdErr()));</span>
<span class="fc" id="L474">        Assert.assertTrue(&quot;intercept std err not NaN&quot;, Double.isNaN(regression.getInterceptStdErr()));</span>
<span class="fc" id="L475">        Assert.assertTrue(&quot;MSE not NaN&quot;, Double.isNaN(regression.getMeanSquareError()));</span>
<span class="pc bpc" id="L476" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;r NaN&quot;, !Double.isNaN(regression.getR()));</span>
<span class="pc bpc" id="L477" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;r-square NaN&quot;, !Double.isNaN(regression.getRSquare()));</span>
<span class="pc bpc" id="L478" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;RSS NaN&quot;, !Double.isNaN(regression.getRegressionSumSquares()));</span>
<span class="pc bpc" id="L479" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;SSE NaN&quot;, !Double.isNaN(regression.getSumSquaredErrors()));</span>
<span class="pc bpc" id="L480" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;SSTO NaN&quot;, !Double.isNaN(regression.getTotalSumSquares()));</span>
<span class="pc bpc" id="L481" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;predict NaN&quot;, !Double.isNaN(regression.predict(0)));</span>

<span class="fc" id="L483">        regression.addData(1, 4);</span>

        // MSE, MSE, s(b0), s(b1) should all be OK now
<span class="pc bpc" id="L486" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;MSE NaN&quot;, !Double.isNaN(regression.getMeanSquareError()));</span>
<span class="pc bpc" id="L487" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;slope std err NaN&quot;, !Double.isNaN(regression.getSlopeStdErr()));</span>
<span class="pc bpc" id="L488" title="1 of 2 branches missed.">        Assert.assertTrue(&quot;intercept std err NaN&quot;, !Double.isNaN(regression.getInterceptStdErr()));</span>
<span class="fc" id="L489">    }</span>

    @Test
    public void testClear() {
<span class="fc" id="L493">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L494">        regression.addData(corrData);</span>
<span class="fc" id="L495">        Assert.assertEquals(&quot;number of observations&quot;, 17, regression.getN());</span>
<span class="fc" id="L496">        regression.clear();</span>
<span class="fc" id="L497">        Assert.assertEquals(&quot;number of observations&quot;, 0, regression.getN());</span>
<span class="fc" id="L498">        regression.addData(corrData);</span>
<span class="fc" id="L499">        Assert.assertEquals(&quot;r-square&quot;, .896123, regression.getRSquare(), 10E-6);</span>
<span class="fc" id="L500">        regression.addData(data);</span>
<span class="fc" id="L501">        Assert.assertEquals(&quot;number of observations&quot;, 53, regression.getN());</span>
<span class="fc" id="L502">    }</span>

    @Test
    public void testInference() {
        //----------  verified against R, version 1.8.1 -----
        // infData
<span class="fc" id="L508">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L509">        regression.addData(infData);</span>
<span class="fc" id="L510">        Assert.assertEquals(&quot;slope std err&quot;, 0.011448491,</span>
<span class="fc" id="L511">                regression.getSlopeStdErr(), 1E-10);</span>
<span class="fc" id="L512">        Assert.assertEquals(&quot;std err intercept&quot;, 0.286036932,</span>
<span class="fc" id="L513">                regression.getInterceptStdErr(),1E-8);</span>
<span class="fc" id="L514">        Assert.assertEquals(&quot;significance&quot;, 4.596e-07,</span>
<span class="fc" id="L515">                regression.getSignificance(),1E-8);</span>
<span class="fc" id="L516">        Assert.assertEquals(&quot;slope conf interval half-width&quot;, 0.0270713794287,</span>
<span class="fc" id="L517">                regression.getSlopeConfidenceInterval(),1E-8);</span>
        // infData2
<span class="fc" id="L519">        regression = new SimpleRegression();</span>
<span class="fc" id="L520">        regression.addData(infData2);</span>
<span class="fc" id="L521">        Assert.assertEquals(&quot;slope std err&quot;, 1.07260253,</span>
<span class="fc" id="L522">                regression.getSlopeStdErr(), 1E-8);</span>
<span class="fc" id="L523">        Assert.assertEquals(&quot;std err intercept&quot;,4.17718672,</span>
<span class="fc" id="L524">                regression.getInterceptStdErr(),1E-8);</span>
<span class="fc" id="L525">        Assert.assertEquals(&quot;significance&quot;, 0.261829133982,</span>
<span class="fc" id="L526">                regression.getSignificance(),1E-11);</span>
<span class="fc" id="L527">        Assert.assertEquals(&quot;slope conf interval half-width&quot;, 2.97802204827,</span>
<span class="fc" id="L528">                regression.getSlopeConfidenceInterval(),1E-8);</span>
        //------------- End R-verified tests -------------------------------

        //FIXME: get a real example to test against with alpha = .01
<span class="fc" id="L532">        Assert.assertTrue(&quot;tighter means wider&quot;,</span>
<span class="pc bpc" id="L533" title="1 of 2 branches missed.">                regression.getSlopeConfidenceInterval() &lt; regression.getSlopeConfidenceInterval(0.01));</span>

        try {
<span class="nc" id="L536">            regression.getSlopeConfidenceInterval(1);</span>
<span class="nc" id="L537">            Assert.fail(&quot;expecting MathIllegalArgumentException for alpha = 1&quot;);</span>
<span class="fc" id="L538">        } catch (MathIllegalArgumentException ex) {</span>
            // ignored
<span class="nc" id="L540">        }</span>

<span class="fc" id="L542">    }</span>

    @Test
    public void testPerfect() {
<span class="fc" id="L546">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L547">        int n = 100;</span>
<span class="fc bfc" id="L548" title="All 2 branches covered.">        for (int i = 0; i &lt; n; i++) {</span>
<span class="fc" id="L549">            regression.addData(((double) i) / (n - 1), i);</span>
        }
<span class="fc" id="L551">        Assert.assertEquals(0.0, regression.getSignificance(), 1.0e-5);</span>
<span class="pc bpc" id="L552" title="1 of 2 branches missed.">        Assert.assertTrue(regression.getSlope() &gt; 0.0);</span>
<span class="pc bpc" id="L553" title="1 of 2 branches missed.">        Assert.assertTrue(regression.getSumSquaredErrors() &gt;= 0.0);</span>
<span class="fc" id="L554">    }</span>

    @Test
    public void testPerfect2() {
<span class="fc" id="L558">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L559">        regression.addData(0, 0);</span>
<span class="fc" id="L560">        regression.addData(1, 1);</span>
<span class="fc" id="L561">        regression.addData(2, 2);</span>
<span class="fc" id="L562">        Assert.assertEquals(0.0, regression.getSlopeStdErr(), 0.0);</span>
<span class="fc" id="L563">        Assert.assertEquals(0.0, regression.getSignificance(), Double.MIN_VALUE);</span>
<span class="fc" id="L564">        Assert.assertEquals(1, regression.getRSquare(), Double.MIN_VALUE);</span>
<span class="fc" id="L565">    }</span>

    @Test
    public void testPerfectNegative() {
<span class="fc" id="L569">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L570">        int n = 100;</span>
<span class="fc bfc" id="L571" title="All 2 branches covered.">        for (int i = 0; i &lt; n; i++) {</span>
<span class="fc" id="L572">            regression.addData(- ((double) i) / (n - 1), i);</span>
        }

<span class="fc" id="L575">        Assert.assertEquals(0.0, regression.getSignificance(), 1.0e-5);</span>
<span class="pc bpc" id="L576" title="1 of 2 branches missed.">        Assert.assertTrue(regression.getSlope() &lt; 0.0);</span>
<span class="fc" id="L577">    }</span>

    @Test
    public void testRandom() {
<span class="fc" id="L581">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L582">        Random random = new Random(1);</span>
<span class="fc" id="L583">        int n = 100;</span>
<span class="fc bfc" id="L584" title="All 2 branches covered.">        for (int i = 0; i &lt; n; i++) {</span>
<span class="fc" id="L585">            regression.addData(((double) i) / (n - 1), random.nextDouble());</span>
        }

<span class="pc bpc" id="L588" title="1 of 2 branches missed.">        Assert.assertTrue( 0.0 &lt; regression.getSignificance()</span>
<span class="pc bpc" id="L589" title="1 of 2 branches missed.">                    &amp;&amp; regression.getSignificance() &lt; 1.0);</span>
<span class="fc" id="L590">    }</span>


    // Jira MATH-85 = Bugzilla 39432
    @Test
    public void testSSENonNegative() {
<span class="fc" id="L596">        double[] y = { 8915.102, 8919.302, 8923.502 };</span>
<span class="fc" id="L597">        double[] x = { 1.107178495E2, 1.107264895E2, 1.107351295E2 };</span>
<span class="fc" id="L598">        SimpleRegression reg = new SimpleRegression();</span>
<span class="fc bfc" id="L599" title="All 2 branches covered.">        for (int i = 0; i &lt; x.length; i++) {</span>
<span class="fc" id="L600">            reg.addData(x[i], y[i]);</span>
        }
<span class="pc bpc" id="L602" title="1 of 2 branches missed.">        Assert.assertTrue(reg.getSumSquaredErrors() &gt;= 0.0);</span>
<span class="fc" id="L603">    }</span>

    // Test remove X,Y (single observation)
    @Test
    public void testRemoveXY() {
        // Create regression with inference data then remove to test
<span class="fc" id="L609">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L610">        regression.addData(infData);</span>
<span class="fc" id="L611">        regression.removeData(removeX, removeY);</span>
<span class="fc" id="L612">        regression.addData(removeX, removeY);</span>
        // Use the inference assertions to make sure that everything worked
<span class="fc" id="L614">        Assert.assertEquals(&quot;slope std err&quot;, 0.011448491,</span>
<span class="fc" id="L615">                regression.getSlopeStdErr(), 1E-10);</span>
<span class="fc" id="L616">        Assert.assertEquals(&quot;std err intercept&quot;, 0.286036932,</span>
<span class="fc" id="L617">                regression.getInterceptStdErr(),1E-8);</span>
<span class="fc" id="L618">        Assert.assertEquals(&quot;significance&quot;, 4.596e-07,</span>
<span class="fc" id="L619">                regression.getSignificance(),1E-8);</span>
<span class="fc" id="L620">        Assert.assertEquals(&quot;slope conf interval half-width&quot;, 0.0270713794287,</span>
<span class="fc" id="L621">                regression.getSlopeConfidenceInterval(),1E-8);</span>
<span class="fc" id="L622">     }</span>


    // Test remove single observation in array
    @Test
    public void testRemoveSingle() {
        // Create regression with inference data then remove to test
<span class="fc" id="L629">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L630">        regression.addData(infData);</span>
<span class="fc" id="L631">        regression.removeData(removeSingle);</span>
<span class="fc" id="L632">        regression.addData(removeSingle);</span>
        // Use the inference assertions to make sure that everything worked
<span class="fc" id="L634">        Assert.assertEquals(&quot;slope std err&quot;, 0.011448491,</span>
<span class="fc" id="L635">                regression.getSlopeStdErr(), 1E-10);</span>
<span class="fc" id="L636">        Assert.assertEquals(&quot;std err intercept&quot;, 0.286036932,</span>
<span class="fc" id="L637">                regression.getInterceptStdErr(),1E-8);</span>
<span class="fc" id="L638">        Assert.assertEquals(&quot;significance&quot;, 4.596e-07,</span>
<span class="fc" id="L639">                regression.getSignificance(),1E-8);</span>
<span class="fc" id="L640">        Assert.assertEquals(&quot;slope conf interval half-width&quot;, 0.0270713794287,</span>
<span class="fc" id="L641">                regression.getSlopeConfidenceInterval(),1E-8);</span>
<span class="fc" id="L642">     }</span>

    // Test remove multiple observations
    @Test
    public void testRemoveMultiple() {
        // Create regression with inference data then remove to test
<span class="fc" id="L648">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L649">        regression.addData(infData);</span>
<span class="fc" id="L650">        regression.removeData(removeMultiple);</span>
<span class="fc" id="L651">        regression.addData(removeMultiple);</span>
        // Use the inference assertions to make sure that everything worked
<span class="fc" id="L653">        Assert.assertEquals(&quot;slope std err&quot;, 0.011448491,</span>
<span class="fc" id="L654">                regression.getSlopeStdErr(), 1E-10);</span>
<span class="fc" id="L655">        Assert.assertEquals(&quot;std err intercept&quot;, 0.286036932,</span>
<span class="fc" id="L656">                regression.getInterceptStdErr(),1E-8);</span>
<span class="fc" id="L657">        Assert.assertEquals(&quot;significance&quot;, 4.596e-07,</span>
<span class="fc" id="L658">                regression.getSignificance(),1E-8);</span>
<span class="fc" id="L659">        Assert.assertEquals(&quot;slope conf interval half-width&quot;, 0.0270713794287,</span>
<span class="fc" id="L660">                regression.getSlopeConfidenceInterval(),1E-8);</span>
<span class="fc" id="L661">     }</span>

    // Remove observation when empty
    @Test
    public void testRemoveObsFromEmpty() {
<span class="fc" id="L666">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L667">        regression.removeData(removeX, removeY);</span>
<span class="fc" id="L668">        Assert.assertEquals(regression.getN(), 0);</span>
<span class="fc" id="L669">    }</span>

    // Remove single observation to empty
    @Test
    public void testRemoveObsFromSingle() {
<span class="fc" id="L674">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L675">        regression.addData(removeX, removeY);</span>
<span class="fc" id="L676">        regression.removeData(removeX, removeY);</span>
<span class="fc" id="L677">        Assert.assertEquals(regression.getN(), 0);</span>
<span class="fc" id="L678">    }</span>

    // Remove multiple observations to empty
    @Test
    public void testRemoveMultipleToEmpty() {
<span class="fc" id="L683">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L684">        regression.addData(removeMultiple);</span>
<span class="fc" id="L685">        regression.removeData(removeMultiple);</span>
<span class="fc" id="L686">        Assert.assertEquals(regression.getN(), 0);</span>
<span class="fc" id="L687">    }</span>

    // Remove multiple observations past empty (i.e. size of array &gt; n)
    @Test
    public void testRemoveMultiplePastEmpty() {
<span class="fc" id="L692">        SimpleRegression regression = new SimpleRegression();</span>
<span class="fc" id="L693">        regression.addData(removeX, removeY);</span>
<span class="fc" id="L694">        regression.removeData(removeMultiple);</span>
<span class="fc" id="L695">        Assert.assertEquals(regression.getN(), 0);</span>
<span class="fc" id="L696">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>