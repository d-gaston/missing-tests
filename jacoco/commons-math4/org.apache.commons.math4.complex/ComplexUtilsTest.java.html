<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ComplexUtilsTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_math4$All_in_commons_math4.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math4.complex</a> &gt; <span class="el_source">ComplexUtilsTest.java</span></div><h1>ComplexUtilsTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.commons.math4.complex;

import org.apache.commons.numbers.complex.Complex;
import org.apache.commons.math4.TestUtils;
import org.apache.commons.math4.exception.MathIllegalArgumentException;
import org.apache.commons.math4.util.FastMath;
import org.apache.commons.math4.util.IntegerSequence;
import org.apache.commons.math4.util.IntegerSequence.Range;
import org.junit.Assert;
import org.junit.Test;

/**
 */
<span class="fc" id="L31">public class ComplexUtilsTest {</span>

<span class="fc" id="L33">    private final double inf = Double.POSITIVE_INFINITY;</span>
<span class="fc" id="L34">    private final double negInf = Double.NEGATIVE_INFINITY;</span>
<span class="fc" id="L35">    private final double nan = Double.NaN;</span>
<span class="fc" id="L36">    private final double pi = FastMath.PI;</span>

<span class="fc" id="L38">    private final Complex negInfInf = Complex.ofCartesian(negInf, inf);</span>
<span class="fc" id="L39">    private final Complex infNegInf = Complex.ofCartesian(inf, negInf);</span>
<span class="fc" id="L40">    private final Complex infInf = Complex.ofCartesian(inf, inf);</span>
<span class="fc" id="L41">    private final Complex negInfNegInf = Complex.ofCartesian(negInf, negInf);</span>
<span class="fc" id="L42">    private final Complex infNaN = Complex.ofCartesian(inf, nan);</span>

    private static Complex c[]; // complex array with real values even and imag
                                // values odd
    private static Complex cr[]; // complex array with real values consecutive
    private static Complex ci[]; // complex array with imag values consecutive
    private static double d[]; // real array with consecutive vals
    private static double di[]; // real array with consecutive vals,
                                // 'interleaved' length
    private static float f[]; // real array with consecutive vals
    private static float fi[]; // real array with consec vals, interleaved
                               // length
    private static double sr[]; // real component of split array, evens
    private static double si[]; // imag component of split array, odds
    private static float sfr[]; // real component of split array, float, evens
    private static float sfi[]; // imag component of split array, float, odds
    static Complex ans1, ans2; // answers to single value extraction methods
    static Range range1, range2; // ranges used to test with
                                             // IntegerRange
    static Complex[] ansArrayc1r, ansArrayc1i, ansArrayc2r, ansArrayc2i, ansArrayc3, ansArrayc4; // answers
                                                                                                 // to
                                                                                                 // range
                                                                                                 // extraction
                                                                                                 // methods
    static double[] ansArrayd1r, ansArrayd2r, ansArrayd1i, ansArrayd2i, ansArraydi1, ansArraydi2;
    static float[] ansArrayf1r, ansArrayf2r, ansArrayf1i, ansArrayf2i, ansArrayfi1, ansArrayfi2;
    static String msg; // error message for AssertEquals
    static Complex[][] c2d, cr2d, ci2d; // for 2d methods
    static Complex[][][] c3d, cr3d, ci3d; // for 3d methods
    static double[][] d2d, di2d, sr2d, si2d;
    static double[][][] d3d, di3d, sr3d, si3d;
    static float[][] f2d, fi2d, sfr2d, sfi2d;
    static float[][][] f3d, fi3d, sfr3d, sfi3d;

    private static void setArrays() { // initial setup method
<span class="fc" id="L77">        c = new Complex[10];</span>
<span class="fc" id="L78">        cr = new Complex[10];</span>
<span class="fc" id="L79">        ci = new Complex[10];</span>
<span class="fc" id="L80">        d = new double[10];</span>
<span class="fc" id="L81">        f = new float[10];</span>
<span class="fc" id="L82">        di = new double[20];</span>
<span class="fc" id="L83">        fi = new float[20];</span>
<span class="fc" id="L84">        sr = new double[10];</span>
<span class="fc" id="L85">        si = new double[10];</span>
<span class="fc" id="L86">        sfr = new float[10];</span>
<span class="fc" id="L87">        sfi = new float[10];</span>
<span class="fc" id="L88">        c2d = new Complex[10][10];</span>
<span class="fc" id="L89">        cr2d = new Complex[10][10];</span>
<span class="fc" id="L90">        ci2d = new Complex[10][10];</span>
<span class="fc" id="L91">        c3d = new Complex[10][10][10];</span>
<span class="fc" id="L92">        cr3d = new Complex[10][10][10];</span>
<span class="fc" id="L93">        ci3d = new Complex[10][10][10];</span>
<span class="fc" id="L94">        d2d = new double[10][10];</span>
<span class="fc" id="L95">        d3d = new double[10][10][10];</span>
<span class="fc" id="L96">        f2d = new float[10][10];</span>
<span class="fc" id="L97">        f3d = new float[10][10][10];</span>
<span class="fc" id="L98">        sr2d = new double[10][10];</span>
<span class="fc" id="L99">        sr3d = new double[10][10][10];</span>
<span class="fc" id="L100">        si2d = new double[10][10];</span>
<span class="fc" id="L101">        si3d = new double[10][10][10];</span>
<span class="fc" id="L102">        sfr2d = new float[10][10];</span>
<span class="fc" id="L103">        sfr3d = new float[10][10][10];</span>
<span class="fc" id="L104">        sfi2d = new float[10][10];</span>
<span class="fc" id="L105">        sfi3d = new float[10][10][10];</span>
<span class="fc" id="L106">        di2d = new double[10][20];</span>
<span class="fc" id="L107">        di3d = new double[10][10][20];</span>
<span class="fc" id="L108">        fi2d = new float[10][20];</span>
<span class="fc" id="L109">        fi3d = new float[10][10][20];</span>
<span class="fc" id="L110">        range1 = IntegerSequence.range(3, 7);</span>
<span class="fc" id="L111">        range2 = IntegerSequence.range(3, 7, 2);</span>
<span class="fc bfc" id="L112" title="All 2 branches covered.">        for (int i = 0; i &lt; 20; i += 2) {</span>
<span class="fc" id="L113">            d[i / 2] = i / 2;</span>
<span class="fc" id="L114">            f[i / 2] = i / 2;</span>
<span class="fc" id="L115">            di[i] = i;</span>
<span class="fc" id="L116">            di[i + 1] = i + 1;</span>
<span class="fc" id="L117">            fi[i] = i;</span>
<span class="fc" id="L118">            fi[i + 1] = i + 1;</span>
<span class="fc" id="L119">            c[i / 2] = Complex.ofCartesian(i, i + 1);</span>
<span class="fc" id="L120">            cr[i / 2] = Complex.ofReal(i / 2);</span>
<span class="fc" id="L121">            ci[i / 2] = Complex.ofCartesian(0, i / 2);</span>
<span class="fc" id="L122">            sr[i / 2] = i;</span>
<span class="fc" id="L123">            si[i / 2] = i + 1;</span>
<span class="fc" id="L124">            sfr[i / 2] = i;</span>
<span class="fc" id="L125">            sfi[i / 2] = i + 1;</span>
        }
<span class="fc bfc" id="L127" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L128" title="All 2 branches covered.">            for (int j = 0; j &lt; 20; j += 2) {</span>
<span class="fc" id="L129">                d2d[i][j / 2] = 10 * i + j / 2;</span>
<span class="fc" id="L130">                f2d[i][j / 2] = 10 * i + j / 2;</span>
<span class="fc" id="L131">                sr2d[i][j / 2] = 10 * i + j;</span>
<span class="fc" id="L132">                si2d[i][j / 2] = 10 * i + j + 1;</span>
<span class="fc" id="L133">                sfr2d[i][j / 2] = 10 * i + j;</span>
<span class="fc" id="L134">                sfi2d[i][j / 2] = 10 * i + j + 1;</span>
<span class="fc" id="L135">                di2d[i][j] = 10 * i + j;</span>
<span class="fc" id="L136">                di2d[i][j + 1] = 10 * i + j + 1;</span>
<span class="fc" id="L137">                fi2d[i][j] = 10 * i + j;</span>
<span class="fc" id="L138">                fi2d[i][j + 1] = 10 * i + j + 1;</span>
<span class="fc" id="L139">                c2d[i][j / 2] = Complex.ofCartesian(10 * i + j, 10 * i + j + 1);</span>
<span class="fc" id="L140">                cr2d[i][j / 2] = Complex.ofReal(10 * i + j / 2);</span>
<span class="fc" id="L141">                ci2d[i][j / 2] = Complex.ofCartesian(0, 10 * i + j / 2);</span>
            }
        }
<span class="fc bfc" id="L144" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L145" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">                for (int k = 0; k &lt; 20; k += 2) {</span>
<span class="fc" id="L147">                    d3d[i][j][k / 2] = 100 * i + 10 * j + k / 2;</span>
<span class="fc" id="L148">                    f3d[i][j][k / 2] = 100 * i + 10 * j + k / 2;</span>
<span class="fc" id="L149">                    sr3d[i][j][k / 2] = 100 * i + 10 * j + k;</span>
<span class="fc" id="L150">                    si3d[i][j][k / 2] = 100 * i + 10 * j + k + 1;</span>
<span class="fc" id="L151">                    sfr3d[i][j][k / 2] = 100 * i + 10 * j + k;</span>
<span class="fc" id="L152">                    sfi3d[i][j][k / 2] = 100 * i + 10 * j + k + 1;</span>
<span class="fc" id="L153">                    di3d[i][j][k] = 100 * i + 10 * j + k;</span>
<span class="fc" id="L154">                    di3d[i][j][k + 1] = 100 * i + 10 * j + k + 1;</span>
<span class="fc" id="L155">                    fi3d[i][j][k] = 100 * i + 10 * j + k;</span>
<span class="fc" id="L156">                    fi3d[i][j][k + 1] = 100 * i + 10 * j + k + 1;</span>
<span class="fc" id="L157">                    c3d[i][j][k / 2] = Complex.ofCartesian(100 * i + 10 * j + k, 100 * i + 10 * j + k + 1);</span>
<span class="fc" id="L158">                    cr3d[i][j][k / 2] = Complex.ofReal(100 * i + 10 * j + k / 2);</span>
<span class="fc" id="L159">                    ci3d[i][j][k / 2] = Complex.ofCartesian(0, 100 * i + 10 * j + k / 2);</span>
                }
            }
        }
<span class="fc" id="L163">        ansArrayc1r = new Complex[] { Complex.ofReal(3), Complex.ofReal(4), Complex.ofReal(5), Complex.ofReal(6), Complex.ofReal(7) };</span>
<span class="fc" id="L164">        ansArrayc2r = new Complex[] { Complex.ofReal(3), Complex.ofReal(5), Complex.ofReal(7) };</span>
<span class="fc" id="L165">        ansArrayc1i = new Complex[] { Complex.ofCartesian(0, 3), Complex.ofCartesian(0, 4), Complex.ofCartesian(0, 5), Complex.ofCartesian(0, 6),</span>
<span class="fc" id="L166">                Complex.ofCartesian(0, 7) };</span>
<span class="fc" id="L167">        ansArrayc2i = new Complex[] { Complex.ofCartesian(0, 3), Complex.ofCartesian(0, 5), Complex.ofCartesian(0, 7) };</span>
<span class="fc" id="L168">        ansArrayc3 = new Complex[] { Complex.ofCartesian(6, 7), Complex.ofCartesian(8, 9), Complex.ofCartesian(10, 11), Complex.ofCartesian(12, 13),</span>
<span class="fc" id="L169">                Complex.ofCartesian(14, 15) };</span>
<span class="fc" id="L170">        ansArrayc4 = new Complex[] { Complex.ofCartesian(6, 7), Complex.ofCartesian(10, 11), Complex.ofCartesian(14, 15) };</span>
<span class="fc" id="L171">        ansArrayd1r = new double[] { 6, 8, 10, 12, 14 };</span>
<span class="fc" id="L172">        ansArrayd1i = new double[] { 7, 9, 11, 13, 15 };</span>
<span class="fc" id="L173">        ansArrayd2r = new double[] { 6, 10, 14 };</span>
<span class="fc" id="L174">        ansArrayd2i = new double[] { 7, 11, 15 };</span>
<span class="fc" id="L175">        ansArrayf1r = new float[] { 6, 8, 10, 12, 14 };</span>
<span class="fc" id="L176">        ansArrayf1i = new float[] { 7, 9, 11, 13, 15 };</span>
<span class="fc" id="L177">        ansArrayf2r = new float[] { 6, 10, 14 };</span>
<span class="fc" id="L178">        ansArrayf2i = new float[] { 7, 11, 15 };</span>
<span class="fc" id="L179">        ansArraydi1 = new double[] { 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 };</span>
<span class="fc" id="L180">        ansArrayfi1 = new float[] { 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 };</span>
<span class="fc" id="L181">        ansArraydi2 = new double[] { 6, 7, 10, 11, 14, 15 };</span>
<span class="fc" id="L182">        ansArrayfi2 = new float[] { 6, 7, 10, 11, 14, 15 };</span>
<span class="fc" id="L183">        msg = &quot;&quot;;</span>
<span class="fc" id="L184">    }</span>

    @Test
    public void testPolar2Complex() {
<span class="fc" id="L188">        TestUtils.assertEquals(Complex.ONE, ComplexUtils.polar2Complex(1, 0), 10e-12);</span>
<span class="fc" id="L189">        TestUtils.assertEquals(Complex.ZERO, ComplexUtils.polar2Complex(0, 1), 10e-12);</span>
<span class="fc" id="L190">        TestUtils.assertEquals(Complex.ZERO, ComplexUtils.polar2Complex(0, -1), 10e-12);</span>
<span class="fc" id="L191">        TestUtils.assertEquals(Complex.I, ComplexUtils.polar2Complex(1, pi / 2), 10e-12);</span>
<span class="fc" id="L192">        TestUtils.assertEquals(Complex.I.negate(), ComplexUtils.polar2Complex(1, -pi / 2), 10e-12);</span>
<span class="fc" id="L193">        double r = 0;</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">        for (int i = 0; i &lt; 5; i++) {</span>
<span class="fc" id="L195">            r += i;</span>
<span class="fc" id="L196">            double theta = 0;</span>
<span class="fc bfc" id="L197" title="All 2 branches covered.">            for (int j = 0; j &lt; 20; j++) {</span>
<span class="fc" id="L198">                theta += pi / 6;</span>
<span class="fc" id="L199">                TestUtils.assertEquals(altPolar(r, theta), ComplexUtils.polar2Complex(r, theta), 10e-12);</span>
            }
<span class="fc" id="L201">            theta = -2 * pi;</span>
<span class="fc bfc" id="L202" title="All 2 branches covered.">            for (int j = 0; j &lt; 20; j++) {</span>
<span class="fc" id="L203">                theta -= pi / 6;</span>
<span class="fc" id="L204">                TestUtils.assertEquals(altPolar(r, theta), ComplexUtils.polar2Complex(r, theta), 10e-12);</span>
            }
        }
<span class="fc" id="L207">    }</span>

    protected Complex altPolar(double r, double theta) {
<span class="fc" id="L210">        return Complex.I.multiply(Complex.ofCartesian(theta, 0)).exp().multiply(Complex.ofCartesian(r, 0));</span>
    }

    @Test(expected = MathIllegalArgumentException.class)
    public void testPolar2ComplexIllegalModulus() {
<span class="nc" id="L215">        ComplexUtils.polar2Complex(-1, 0);</span>
<span class="nc" id="L216">    }</span>

    @Test
    public void testPolar2ComplexNaN() {
<span class="fc" id="L220">        Assert.assertTrue(ComplexUtils.polar2Complex(nan, 1).isNaN());</span>
<span class="fc" id="L221">        Assert.assertTrue(ComplexUtils.polar2Complex(1, nan).isNaN());</span>
<span class="fc" id="L222">        Assert.assertTrue(ComplexUtils.polar2Complex(nan, nan).isNaN());</span>
<span class="fc" id="L223">    }</span>

    @Test
    public void testPolar2ComplexInf() {
<span class="fc" id="L227">        Assert.assertTrue(ComplexUtils.polar2Complex(1, inf).isNaN());</span>
<span class="fc" id="L228">        Assert.assertTrue(ComplexUtils.polar2Complex(1, negInf).isNaN());</span>
<span class="fc" id="L229">        Assert.assertTrue(ComplexUtils.polar2Complex(inf, inf).isNaN());</span>
<span class="fc" id="L230">        Assert.assertTrue(ComplexUtils.polar2Complex(inf, negInf).isNaN());</span>
<span class="fc" id="L231">        TestUtils.assertSame(infInf, ComplexUtils.polar2Complex(inf, pi / 4));</span>
<span class="fc" id="L232">        TestUtils.assertSame(infNaN, ComplexUtils.polar2Complex(inf, 0));</span>
<span class="fc" id="L233">        TestUtils.assertSame(infNegInf, ComplexUtils.polar2Complex(inf, -pi / 4));</span>
<span class="fc" id="L234">        TestUtils.assertSame(negInfInf, ComplexUtils.polar2Complex(inf, 3 * pi / 4));</span>
<span class="fc" id="L235">        TestUtils.assertSame(negInfNegInf, ComplexUtils.polar2Complex(inf, 5 * pi / 4));</span>
<span class="fc" id="L236">    }</span>

    @Test
    public void testCExtract() {
<span class="fc" id="L240">        final double[] real = new double[] { negInf, -123.45, 0, 1, 234.56, pi, inf };</span>
<span class="fc" id="L241">        final Complex[] complex = ComplexUtils.real2Complex(real);</span>

<span class="fc bfc" id="L243" title="All 2 branches covered.">        for (int i = 0; i &lt; real.length; i++) {</span>
<span class="fc" id="L244">            Assert.assertEquals(real[i], complex[i].getReal(), 0d);</span>
        }
<span class="fc" id="L246">    }</span>

    // EXTRACTION METHODS

    @Test
    public void testExtractionMethods() {
<span class="fc" id="L252">        setArrays();</span>
        // Extract complex from real double array, index 3
<span class="fc" id="L254">        TestUtils.assertSame(Complex.ofReal(3), ComplexUtils.extractComplexFromRealArray(d, 3));</span>
        // Extract complex from real float array, index 3
<span class="fc" id="L256">        TestUtils.assertSame(Complex.ofReal(3), ComplexUtils.extractComplexFromRealArray(f, 3));</span>
        // Extract real double from complex array, index 3
<span class="fc" id="L258">        TestUtils.assertSame(6, ComplexUtils.extractRealFromComplexArray(c, 3));</span>
        // Extract real float from complex array, index 3
<span class="fc" id="L260">        TestUtils.assertSame(6, ComplexUtils.extractRealFloatFromComplexArray(c, 3));</span>
        // Extract complex from interleaved double array, index 3
<span class="fc" id="L262">        TestUtils.assertSame(Complex.ofCartesian(6, 7), ComplexUtils.extractComplexFromInterleavedArray(d, 3));</span>
        // Extract complex from interleaved float array, index 3
<span class="fc" id="L264">        TestUtils.assertSame(Complex.ofCartesian(6, 7), ComplexUtils.extractComplexFromInterleavedArray(f, 3));</span>
        // Extract interleaved double from complex array, index 3
<span class="fc" id="L266">        TestUtils.assertEquals(msg, new double[] { 6, 7 }, ComplexUtils.extractInterleavedFromComplexArray(c, 3),</span>
<span class="fc" id="L267">                Math.ulp(1));</span>
        // Extract interleaved float from complex array, index 3
<span class="fc" id="L269">        TestUtils.assertEquals(msg, new double[] { 6, 7 }, ComplexUtils.extractInterleavedFromComplexArray(c, 3),</span>
<span class="fc" id="L270">                Math.ulp(1));</span>
<span class="pc bpc" id="L271" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L272">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L274">    }</span>
    // REAL &lt;-&gt; COMPLEX

    @Test
    public void testRealToComplex() {
<span class="fc" id="L279">        setArrays();</span>
        // Real double to complex, range 3-7, increment 1, entered as ints
<span class="fc" id="L281">        TestUtils.assertEquals(msg, ansArrayc1r, ComplexUtils.real2Complex(d, 3, 7),0);</span>
        // Real float to complex, range 3-7, increment 1, entered as ints
<span class="fc" id="L283">        TestUtils.assertEquals(msg, ansArrayc1r, ComplexUtils.real2Complex(f, 3, 7),0);</span>
        // Real double to complex, range 3-7, increment 2, entered as ints
<span class="fc" id="L285">        TestUtils.assertEquals(msg, ansArrayc2r, ComplexUtils.real2Complex(d, 3, 7, 2),0);</span>
        // Real float to complex, range 3-7, increment 2, entered as ints
<span class="fc" id="L287">        TestUtils.assertEquals(msg, ansArrayc2r, ComplexUtils.real2Complex(f, 3, 7, 2),0);</span>
        // Real double to complex, range 3-7, increment 1, using IntegerSequence
<span class="fc" id="L289">        TestUtils.assertEquals(msg, ansArrayc1r, ComplexUtils.real2Complex(d, range1),0);</span>
        // Real float to complex, range 3-7, increment 1, using IntegerSequence
<span class="fc" id="L291">        TestUtils.assertEquals(msg, ansArrayc1r, ComplexUtils.real2Complex(f, range1),0);</span>
        // Real double to complex, range 3-7, increment 2, using IntegerSequence
<span class="fc" id="L293">        TestUtils.assertEquals(msg, ansArrayc2r, ComplexUtils.real2Complex(d, 3, 7, 2),0);</span>
        // Real float to complex, range 3-7, increment 2, using IntegerSequence
<span class="fc" id="L295">        TestUtils.assertEquals(msg, ansArrayc2r, ComplexUtils.real2Complex(f, 3, 7, 2),0);</span>
        // Real double to complex, whole array
<span class="fc" id="L297">        TestUtils.assertEquals(msg, cr, ComplexUtils.real2Complex(d),0);</span>
        // Real float to complex, whole array
<span class="fc" id="L299">        TestUtils.assertEquals(msg, cr, ComplexUtils.real2Complex(f),0);</span>
        // 2d
<span class="fc bfc" id="L301" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Real double to complex, 2d
<span class="fc" id="L303">            TestUtils.assertEquals(msg, cr2d[i], ComplexUtils.real2Complex(d2d[i]),0);</span>
            // Real float to complex, 2d
<span class="fc" id="L305">            TestUtils.assertEquals(msg, cr2d[i], ComplexUtils.real2Complex(f2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L308" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L309" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Real double to complex, 3d
<span class="fc" id="L311">                TestUtils.assertEquals(msg, cr3d[i][j], ComplexUtils.real2Complex(d3d[i][j]),0);</span>
                // Real float to complex, 3d
<span class="fc" id="L313">                TestUtils.assertEquals(msg, cr3d[i][j], ComplexUtils.real2Complex(f3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L316" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L317">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L319">    }</span>

    @Test
    public void testComplexToReal() {
<span class="fc" id="L323">        setArrays();</span>
        // Real complex to double, range 3-7, increment 1, entered as ints
<span class="fc" id="L325">        TestUtils.assertEquals(msg, ansArrayd1r, ComplexUtils.complex2Real(c, 3, 7),0);</span>
        // Real complex to float, range 3-7, increment 1, entered as ints
<span class="fc" id="L327">        TestUtils.assertEquals(msg, ansArrayf1r, ComplexUtils.complex2RealFloat(c, 3, 7),0);</span>
        // Real complex to double, range 3-7, increment 2, entered as ints
<span class="fc" id="L329">        TestUtils.assertEquals(msg, ansArrayd2r, ComplexUtils.complex2Real(c, 3, 7, 2),0);</span>
        // Real complex to float, range 3-7, increment 2, entered as ints
<span class="fc" id="L331">        TestUtils.assertEquals(msg, ansArrayf2r, ComplexUtils.complex2RealFloat(c, 3, 7, 2),0);</span>
        // Real complex to double, range 3-7, increment 1, using IntegerSequence
<span class="fc" id="L333">        TestUtils.assertEquals(msg, ansArrayd1r, ComplexUtils.complex2Real(c, range1),0);</span>
        // Real complex to float, range 3-7, increment 1, using IntegerSequence
<span class="fc" id="L335">        TestUtils.assertEquals(msg, ansArrayf1r, ComplexUtils.complex2RealFloat(c, range1),0);</span>
        // Real complex to double, range 3-7, increment 2, using IntegerSequence
<span class="fc" id="L337">        TestUtils.assertEquals(msg, ansArrayd2r, ComplexUtils.complex2Real(c, 3, 7, 2),0);</span>
        // Real complex to float, range 3-7, increment 2, using IntegerSequence
<span class="fc" id="L339">        TestUtils.assertEquals(msg, ansArrayf2r, ComplexUtils.complex2RealFloat(c, 3, 7, 2),0);</span>
        // Real complex to double, whole array
<span class="fc" id="L341">        TestUtils.assertEquals(msg, sr, ComplexUtils.complex2Real(c),0);</span>
        // Real complex to float, whole array
<span class="fc" id="L343">        TestUtils.assertEquals(msg, sfr, ComplexUtils.complex2RealFloat(c),0);</span>
        // 2d
<span class="fc bfc" id="L345" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Real complex to double, 2d
<span class="fc" id="L347">            TestUtils.assertEquals(msg, sr2d[i], ComplexUtils.complex2Real(c2d[i]),0);</span>
            // Real complex to float, 2d
<span class="fc" id="L349">            TestUtils.assertEquals(msg, sfr2d[i], ComplexUtils.complex2RealFloat(c2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L352" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L353" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Real complex to double, 3d
<span class="fc" id="L355">                TestUtils.assertEquals(msg, sr3d[i][j], ComplexUtils.complex2Real(c3d[i][j]),0);</span>
                // Real complex to float, 3d
<span class="fc" id="L357">                TestUtils.assertEquals(msg, sfr3d[i][j], ComplexUtils.complex2RealFloat(c3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L360" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L361">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L363">    }</span>

    // IMAGINARY &lt;-&gt; COMPLEX

    @Test
    public void testImaginaryToComplex() {
<span class="fc" id="L369">        setArrays();</span>
        // Imaginary double to complex, range 3-7, increment 1, entered as ints
<span class="fc" id="L371">        TestUtils.assertEquals(msg, ansArrayc1i, ComplexUtils.imaginary2Complex(d, 3, 7),0);</span>
        // Imaginary float to complex, range 3-7, increment 1, entered as ints
<span class="fc" id="L373">        TestUtils.assertEquals(msg, ansArrayc1i, ComplexUtils.imaginary2Complex(f, 3, 7),0);</span>
        // Imaginary double to complex, range 3-7, increment 2, entered as ints
<span class="fc" id="L375">        TestUtils.assertEquals(msg, ansArrayc2i, ComplexUtils.imaginary2Complex(d, 3, 7, 2),0);</span>
        // Imaginary float to complex, range 3-7, increment 2, entered as ints
<span class="fc" id="L377">        TestUtils.assertEquals(msg, ansArrayc2i, ComplexUtils.imaginary2Complex(f, 3, 7, 2),0);</span>
        // Imaginary double to complex, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L380">        TestUtils.assertEquals(msg, ansArrayc1i, ComplexUtils.imaginary2Complex(d, range1),0);</span>
        // Imaginary float to complex, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L383">        TestUtils.assertEquals(msg, ansArrayc1i, ComplexUtils.imaginary2Complex(f, range1),0);</span>
        // Imaginary double to complex, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L386">        TestUtils.assertEquals(msg, ansArrayc2i, ComplexUtils.imaginary2Complex(d, 3, 7, 2),0);</span>
        // Imaginary float to complex, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L389">        TestUtils.assertEquals(msg, ansArrayc2i, ComplexUtils.imaginary2Complex(f, 3, 7, 2),0);</span>
        // Imaginary double to complex, whole array
<span class="fc" id="L391">        TestUtils.assertEquals(msg, ci, ComplexUtils.imaginary2Complex(d),0);</span>
        // Imaginary float to complex, whole array
<span class="fc" id="L393">        TestUtils.assertEquals(msg, ci, ComplexUtils.imaginary2Complex(f),0);</span>
        // 2d
<span class="fc bfc" id="L395" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Imaginary double to complex, 2d
<span class="fc" id="L397">            TestUtils.assertEquals(msg, ci2d[i], ComplexUtils.imaginary2Complex(d2d[i]),0);</span>
            // Imaginary float to complex, 2d
<span class="fc" id="L399">            TestUtils.assertEquals(msg, ci2d[i], ComplexUtils.imaginary2Complex(f2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L402" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L403" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Imaginary double to complex, 3d
<span class="fc" id="L405">                TestUtils.assertEquals(msg, ci3d[i][j], ComplexUtils.imaginary2Complex(d3d[i][j]),0);</span>
                // Imaginary float to complex, 3d
<span class="fc" id="L407">                TestUtils.assertEquals(msg, ci3d[i][j], ComplexUtils.imaginary2Complex(f3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L410" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L411">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L413">    }</span>

    @Test
    public void testComplexToImaginary() {
<span class="fc" id="L417">        setArrays();</span>
        // Imaginary complex to double, range 3-7, increment 1, entered as ints
<span class="fc" id="L419">        TestUtils.assertEquals(msg, ansArrayd1i, ComplexUtils.complex2Imaginary(c, 3, 7),0);</span>
        // Imaginary complex to float, range 3-7, increment 1, entered as ints
<span class="fc" id="L421">        TestUtils.assertEquals(msg, ansArrayf1i, ComplexUtils.complex2ImaginaryFloat(c, 3, 7),0);</span>
        // Imaginary complex to double, range 3-7, increment 2, entered as ints
<span class="fc" id="L423">        TestUtils.assertEquals(msg, ansArrayd2i, ComplexUtils.complex2Imaginary(c, 3, 7, 2),0);</span>
        // Imaginary complex to float, range 3-7, increment 2, entered as ints
<span class="fc" id="L425">        TestUtils.assertEquals(msg, ansArrayf2i, ComplexUtils.complex2ImaginaryFloat(c, 3, 7, 2),0);</span>
        // Imaginary complex to double, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L428">        TestUtils.assertEquals(msg, ansArrayd1i, ComplexUtils.complex2Imaginary(c, range1),0);</span>
        // Imaginary complex to float, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L431">        TestUtils.assertEquals(msg, ansArrayf1i, ComplexUtils.complex2ImaginaryFloat(c, range1),0);</span>
        // Imaginary complex to double, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L434">        TestUtils.assertEquals(msg, ansArrayd2i, ComplexUtils.complex2Imaginary(c, 3, 7, 2),0);</span>
        // Imaginary complex to float, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L437">        TestUtils.assertEquals(msg, ansArrayf2i, ComplexUtils.complex2ImaginaryFloat(c, 3, 7, 2),0);</span>
        // Imaginary complex to double, whole array
<span class="fc" id="L439">        TestUtils.assertEquals(msg, si, ComplexUtils.complex2Imaginary(c),0);</span>
        // Imaginary complex to float, whole array
<span class="fc" id="L441">        TestUtils.assertEquals(msg, sfi, ComplexUtils.complex2ImaginaryFloat(c),0);</span>
        // 2d
<span class="fc bfc" id="L443" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Imaginary complex to double, 2d
<span class="fc" id="L445">            TestUtils.assertEquals(msg, si2d[i], ComplexUtils.complex2Imaginary(c2d[i]),0);</span>
            // Imaginary complex to float, 2d
<span class="fc" id="L447">            TestUtils.assertEquals(msg, sfi2d[i], ComplexUtils.complex2ImaginaryFloat(c2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L450" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L451" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Imaginary complex to double, 3d
<span class="fc" id="L453">                TestUtils.assertEquals(msg, si3d[i][j], ComplexUtils.complex2Imaginary(c3d[i][j]),0);</span>
                // Imaginary complex to float, 3d
<span class="fc" id="L455">                TestUtils.assertEquals(msg, sfi3d[i][j], ComplexUtils.complex2ImaginaryFloat(c3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L458" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L459">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L461">    }</span>

    // INTERLEAVED &lt;-&gt; COMPLEX

    @Test
    public void testInterleavedToComplex() {
<span class="fc" id="L467">        setArrays();</span>
        // Interleaved double to complex, range 3-7, increment 1, entered as
        // ints
<span class="fc" id="L470">        TestUtils.assertEquals(msg, ansArrayc3, ComplexUtils.interleaved2Complex(di, 3, 7),0);</span>
        // Interleaved float to complex, range 3-7, increment 1, entered as ints
<span class="fc" id="L472">        TestUtils.assertEquals(msg, ansArrayc3, ComplexUtils.interleaved2Complex(fi, 3, 7),0);</span>
        // Interleaved double to complex, range 3-7, increment 2, entered as
        // ints
<span class="fc" id="L475">        TestUtils.assertEquals(msg, ansArrayc4, ComplexUtils.interleaved2Complex(di, 3, 7, 2),0);</span>
        // Interleaved float to complex, range 3-7, increment 2, entered as ints
<span class="fc" id="L477">        TestUtils.assertEquals(msg, ansArrayc4, ComplexUtils.interleaved2Complex(fi, 3, 7, 2),0);</span>
        // Interleaved double to complex, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L480">        TestUtils.assertEquals(msg, ansArrayc3, ComplexUtils.interleaved2Complex(di, range1),0);</span>
        // Interleaved float to complex, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L483">        TestUtils.assertEquals(msg, ansArrayc3, ComplexUtils.interleaved2Complex(fi, range1),0);</span>
        // Interleaved double to complex, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L486">        TestUtils.assertEquals(msg, ansArrayc4, ComplexUtils.interleaved2Complex(di, 3, 7, 2),0);</span>
        // Interleaved float to complex, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L489">        TestUtils.assertEquals(msg, ansArrayc4, ComplexUtils.interleaved2Complex(fi, 3, 7, 2),0);</span>
        // Interleaved double to complex, whole array
<span class="fc" id="L491">        TestUtils.assertEquals(msg, c, ComplexUtils.interleaved2Complex(di),0);</span>
        // Interleaved float to complex, whole array
<span class="fc" id="L493">        TestUtils.assertEquals(msg, c, ComplexUtils.interleaved2Complex(fi),0);</span>
        // 2d
<span class="fc bfc" id="L495" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Interleaved double to complex, 2d
<span class="fc" id="L497">            TestUtils.assertEquals(msg, c2d[i], ComplexUtils.interleaved2Complex(di2d[i]),0);</span>
            // Interleaved float to complex, 2d
<span class="fc" id="L499">            TestUtils.assertEquals(msg, c2d[i], ComplexUtils.interleaved2Complex(fi2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L502" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L503" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Interleaved double to complex, 3d
<span class="fc" id="L505">                TestUtils.assertEquals(msg, c3d[i][j], ComplexUtils.interleaved2Complex(di3d[i][j]),0);</span>
                // Interleaved float to complex, 3d
<span class="fc" id="L507">                TestUtils.assertEquals(msg, c3d[i][j], ComplexUtils.interleaved2Complex(fi3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L510" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L511">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L513">    }</span>

    @Test
    public void testComplexToInterleaved() {
<span class="fc" id="L517">        setArrays();</span>
        // Interleaved complex to double, range 3-7, increment 1, entered as
        // ints
<span class="fc" id="L520">        TestUtils.assertEquals(msg, ansArraydi1, ComplexUtils.complex2Interleaved(c, 3, 7),0);</span>
        // Interleaved complex to float, range 3-7, increment 1, entered as ints
<span class="fc" id="L522">        TestUtils.assertEquals(msg, ansArrayfi1, ComplexUtils.complex2InterleavedFloat(c, 3, 7),0);</span>
        // Interleaved complex to double, range 3-7, increment 2, entered as
        // ints
<span class="fc" id="L525">        TestUtils.assertEquals(msg, ansArraydi2, ComplexUtils.complex2Interleaved(c, 3, 7, 2),0);</span>
        // Interleaved complex to float, range 3-7, increment 2, entered as ints
<span class="fc" id="L527">        TestUtils.assertEquals(msg, ansArrayfi2, ComplexUtils.complex2InterleavedFloat(c, 3, 7, 2),0);</span>
        // Interleaved complex to double, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L530">        TestUtils.assertEquals(msg, ansArraydi1, ComplexUtils.complex2Interleaved(c, range1),0);</span>
        // Interleaved complex to float, range 3-7, increment 1, using
        // IntegerSequence
<span class="fc" id="L533">        TestUtils.assertEquals(msg, ansArrayfi1, ComplexUtils.complex2InterleavedFloat(c, range1),0);</span>
        // Interleaved complex to double, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L536">        TestUtils.assertEquals(msg, ansArraydi2, ComplexUtils.complex2Interleaved(c, 3, 7, 2),0);</span>
        // Interleaved complex to float, range 3-7, increment 2, using
        // IntegerSequence
<span class="fc" id="L539">        TestUtils.assertEquals(msg, ansArrayfi2, ComplexUtils.complex2InterleavedFloat(c, 3, 7, 2),0);</span>
        // Interleaved complex to double, whole array
<span class="fc" id="L541">        TestUtils.assertEquals(msg, di, ComplexUtils.complex2Interleaved(c),0);</span>
        // Interleaved complex to float, whole array
<span class="fc" id="L543">        TestUtils.assertEquals(msg, fi, ComplexUtils.complex2InterleavedFloat(c),0);</span>
        // 2d
<span class="fc bfc" id="L545" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Interleaved complex to double, 2d
<span class="fc" id="L547">            TestUtils.assertEquals(msg, di2d[i], ComplexUtils.complex2Interleaved(c2d[i]),0);</span>
            // Interleaved complex to float, 2d
<span class="fc" id="L549">            TestUtils.assertEquals(msg, fi2d[i], ComplexUtils.complex2InterleavedFloat(c2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L552" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L553" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Interleaved complex to double, 3d
<span class="fc" id="L555">                TestUtils.assertEquals(msg, di3d[i][j], ComplexUtils.complex2Interleaved(c3d[i][j]),0);</span>
                // Interleaved complex to float, 3d
<span class="fc" id="L557">                TestUtils.assertEquals(msg, fi3d[i][j], ComplexUtils.complex2InterleavedFloat(c3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L560" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L561">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L563">    }</span>

    // SPLIT TO COMPLEX
    @Test
    public void testSplit2Complex() {
<span class="fc" id="L568">        setArrays();</span>
        // Split double to complex, whole array
<span class="fc" id="L570">        TestUtils.assertEquals(msg, c, ComplexUtils.split2Complex(sr, si),0);</span>

        // 2d
<span class="fc bfc" id="L573" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
            // Split double to complex, 2d
<span class="fc" id="L575">            TestUtils.assertEquals(msg, c2d[i], ComplexUtils.split2Complex(sr2d[i], si2d[i]),0);</span>
        }
        // 3d
<span class="fc bfc" id="L578" title="All 2 branches covered.">        for (int i = 0; i &lt; 10; i++) {</span>
<span class="fc bfc" id="L579" title="All 2 branches covered.">            for (int j = 0; j &lt; 10; j++) {</span>
                // Split double to complex, 3d
<span class="fc" id="L581">                TestUtils.assertEquals(msg, c3d[i][j], ComplexUtils.split2Complex(sr3d[i][j], si3d[i][j]),0);</span>
            }
        }
<span class="pc bpc" id="L584" title="1 of 2 branches missed.">        if (!msg.equals(&quot;&quot;)) {</span>
<span class="nc" id="L585">            throw new RuntimeException(msg);</span>
        }
<span class="fc" id="L587">    }</span>

    // INITIALIZATION METHODS

    @Test
    public void testInitialize() {
<span class="fc" id="L593">        Complex[] c = new Complex[10];</span>
<span class="fc" id="L594">        ComplexUtils.initialize(c);</span>
<span class="fc bfc" id="L595" title="All 2 branches covered.">        for (Complex cc : c) {</span>
<span class="fc" id="L596">            TestUtils.assertEquals(Complex.ofCartesian(0, 0), cc, 0);</span>
        }
<span class="fc" id="L598">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>