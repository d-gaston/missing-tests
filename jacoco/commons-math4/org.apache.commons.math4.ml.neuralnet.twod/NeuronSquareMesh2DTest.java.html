<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NeuronSquareMesh2DTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_math4$All_in_commons_math4.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math4.ml.neuralnet.twod</a> &gt; <span class="el_source">NeuronSquareMesh2DTest.java</span></div><h1>NeuronSquareMesh2DTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.commons.math4.ml.neuralnet.twod;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Collection;
import java.util.Set;
import java.util.HashSet;

import org.apache.commons.math4.exception.NumberIsTooSmallException;
import org.apache.commons.math4.exception.OutOfRangeException;
import org.apache.commons.math4.ml.neuralnet.FeatureInitializer;
import org.apache.commons.math4.ml.neuralnet.FeatureInitializerFactory;
import org.apache.commons.math4.ml.neuralnet.Network;
import org.apache.commons.math4.ml.neuralnet.Neuron;
import org.apache.commons.math4.ml.neuralnet.SquareNeighbourhood;
import org.apache.commons.math4.ml.neuralnet.twod.NeuronSquareMesh2D;
import org.junit.Assert;
import org.junit.Test;

/**
 * Tests for {@link NeuronSquareMesh2D} and {@link Network} functionality for
 * a two-dimensional network.
 */
<span class="fc" id="L44">public class NeuronSquareMesh2DTest {</span>
<span class="fc" id="L45">    final FeatureInitializer init = FeatureInitializerFactory.uniform(0, 2);</span>

    @Test(expected=NumberIsTooSmallException.class)
    public void testMinimalNetworkSize1() {
<span class="fc" id="L49">        final FeatureInitializer[] initArray = { init };</span>

<span class="nc" id="L51">        new NeuronSquareMesh2D(1, false,</span>
                               2, false,
                               SquareNeighbourhood.VON_NEUMANN,
                               initArray);
<span class="nc" id="L55">    }</span>

    @Test(expected=NumberIsTooSmallException.class)
    public void testMinimalNetworkSize2() {
<span class="fc" id="L59">        final FeatureInitializer[] initArray = { init };</span>

<span class="nc" id="L61">        new NeuronSquareMesh2D(2, false,</span>
                               0, false,
                               SquareNeighbourhood.VON_NEUMANN,
                               initArray);
<span class="nc" id="L65">    }</span>

    @Test
    public void testGetFeaturesSize() {
<span class="fc" id="L69">        final FeatureInitializer[] initArray = { init, init, init };</span>

<span class="fc" id="L71">        final Network net = new NeuronSquareMesh2D(2, false,</span>
                                                   2, false,
                                                   SquareNeighbourhood.VON_NEUMANN,
<span class="fc" id="L74">                                                   initArray).getNetwork();</span>
<span class="fc" id="L75">        Assert.assertEquals(3, net.getFeaturesSize());</span>
<span class="fc" id="L76">    }</span>


    /*
     * Test assumes that the network is
     *
     *  0-----1
     *  |     |
     *  |     |
     *  2-----3
     */
    @Test
    public void test2x2Network() {
<span class="fc" id="L89">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L90">        final Network net = new NeuronSquareMesh2D(2, false,</span>
                                                   2, false,
                                                   SquareNeighbourhood.VON_NEUMANN,
<span class="fc" id="L93">                                                   initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // Neurons 0 and 3.
<span class="fc bfc" id="L97" title="All 2 branches covered.">        for (long id : new long[] { 0, 3 }) {</span>
<span class="fc" id="L98">            neighbours = net.getNeighbours(net.getNeuron(id));</span>
<span class="fc bfc" id="L99" title="All 2 branches covered.">            for (long nId : new long[] { 1, 2 }) {</span>
<span class="fc" id="L100">                Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
            }
            // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L103">            Assert.assertEquals(2, neighbours.size());</span>
        }

        // Neurons 1 and 2.
<span class="fc bfc" id="L107" title="All 2 branches covered.">        for (long id : new long[] { 1, 2 }) {</span>
<span class="fc" id="L108">            neighbours = net.getNeighbours(net.getNeuron(id));</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">            for (long nId : new long[] { 0, 3 }) {</span>
<span class="fc" id="L110">                Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
            }
            // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L113">            Assert.assertEquals(2, neighbours.size());</span>
        }
<span class="fc" id="L115">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1
     *  |     |
     *  |     |
     *  2-----3
     */
    @Test
    public void test2x2Network2() {
<span class="fc" id="L127">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L128">        final Network net = new NeuronSquareMesh2D(2, false,</span>
                                                   2, false,
                                                   SquareNeighbourhood.MOORE,
<span class="fc" id="L131">                                                   initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // All neurons
<span class="fc bfc" id="L135" title="All 2 branches covered.">        for (long id : new long[] { 0, 1, 2, 3 }) {</span>
<span class="fc" id="L136">            neighbours = net.getNeighbours(net.getNeuron(id));</span>
<span class="fc bfc" id="L137" title="All 2 branches covered.">            for (long nId : new long[] { 0, 1, 2, 3 }) {</span>
<span class="fc bfc" id="L138" title="All 2 branches covered.">                if (id != nId) {</span>
<span class="fc" id="L139">                    Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
                }
            }
        }
<span class="fc" id="L143">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     */
    @Test
    public void test3x2CylinderNetwork() {
<span class="fc" id="L155">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L156">        final Network net = new NeuronSquareMesh2D(2, false,</span>
                                                   3, true,
                                                   SquareNeighbourhood.VON_NEUMANN,
<span class="fc" id="L159">                                                   initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // Neuron 0.
<span class="fc" id="L163">        neighbours = net.getNeighbours(net.getNeuron(0));</span>
<span class="fc bfc" id="L164" title="All 2 branches covered.">        for (long nId : new long[] { 1, 2, 3 }) {</span>
<span class="fc" id="L165">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L168">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 1.
<span class="fc" id="L171">        neighbours = net.getNeighbours(net.getNeuron(1));</span>
<span class="fc bfc" id="L172" title="All 2 branches covered.">        for (long nId : new long[] { 0, 2, 4 }) {</span>
<span class="fc" id="L173">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L176">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 2.
<span class="fc" id="L179">        neighbours = net.getNeighbours(net.getNeuron(2));</span>
<span class="fc bfc" id="L180" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 5 }) {</span>
<span class="fc" id="L181">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L184">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 3.
<span class="fc" id="L187">        neighbours = net.getNeighbours(net.getNeuron(3));</span>
<span class="fc bfc" id="L188" title="All 2 branches covered.">        for (long nId : new long[] { 0, 4, 5 }) {</span>
<span class="fc" id="L189">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L192">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 4.
<span class="fc" id="L195">        neighbours = net.getNeighbours(net.getNeuron(4));</span>
<span class="fc bfc" id="L196" title="All 2 branches covered.">        for (long nId : new long[] { 1, 3, 5 }) {</span>
<span class="fc" id="L197">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L200">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 5.
<span class="fc" id="L203">        neighbours = net.getNeighbours(net.getNeuron(5));</span>
<span class="fc bfc" id="L204" title="All 2 branches covered.">        for (long nId : new long[] { 2, 3, 4 }) {</span>
<span class="fc" id="L205">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L208">        Assert.assertEquals(3, neighbours.size());</span>
<span class="fc" id="L209">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     */
    @Test
    public void test3x2CylinderNetwork2() {
<span class="fc" id="L221">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L222">        final Network net = new NeuronSquareMesh2D(2, false,</span>
                                             3, true,
                                             SquareNeighbourhood.MOORE,
<span class="fc" id="L225">                                             initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // All neurons.
<span class="fc bfc" id="L229" title="All 2 branches covered.">        for (long id : new long[] { 0, 1, 2, 3, 4, 5 }) {</span>
<span class="fc" id="L230">            neighbours = net.getNeighbours(net.getNeuron(id));</span>
<span class="fc bfc" id="L231" title="All 2 branches covered.">            for (long nId : new long[] { 0, 1, 2, 3, 4, 5 }) {</span>
<span class="fc bfc" id="L232" title="All 2 branches covered.">                if (id != nId) {</span>
<span class="fc" id="L233">                    Assert.assertTrue(&quot;id=&quot; + id + &quot; nId=&quot; + nId,</span>
<span class="fc" id="L234">                                      neighbours.contains(net.getNeuron(nId)));</span>
                }
            }
        }
<span class="fc" id="L238">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     *  |     |     |
     *  |     |     |
     *  6-----7-----8
     */
    @Test
    public void test3x3TorusNetwork() {
<span class="fc" id="L253">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L254">        final Network net = new NeuronSquareMesh2D(3, true,</span>
                                                   3, true,
                                                   SquareNeighbourhood.VON_NEUMANN,
<span class="fc" id="L257">                                                   initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // Neuron 0.
<span class="fc" id="L261">        neighbours = net.getNeighbours(net.getNeuron(0));</span>
<span class="fc bfc" id="L262" title="All 2 branches covered.">        for (long nId : new long[] { 1, 2, 3, 6 }) {</span>
<span class="fc" id="L263">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L266">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 1.
<span class="fc" id="L269">        neighbours = net.getNeighbours(net.getNeuron(1));</span>
<span class="fc bfc" id="L270" title="All 2 branches covered.">        for (long nId : new long[] { 0, 2, 4, 7 }) {</span>
<span class="fc" id="L271">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L274">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 2.
<span class="fc" id="L277">        neighbours = net.getNeighbours(net.getNeuron(2));</span>
<span class="fc bfc" id="L278" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 5, 8 }) {</span>
<span class="fc" id="L279">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L282">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 3.
<span class="fc" id="L285">        neighbours = net.getNeighbours(net.getNeuron(3));</span>
<span class="fc bfc" id="L286" title="All 2 branches covered.">        for (long nId : new long[] { 0, 4, 5, 6 }) {</span>
<span class="fc" id="L287">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L290">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 4.
<span class="fc" id="L293">        neighbours = net.getNeighbours(net.getNeuron(4));</span>
<span class="fc bfc" id="L294" title="All 2 branches covered.">        for (long nId : new long[] { 1, 3, 5, 7 }) {</span>
<span class="fc" id="L295">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L298">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 5.
<span class="fc" id="L301">        neighbours = net.getNeighbours(net.getNeuron(5));</span>
<span class="fc bfc" id="L302" title="All 2 branches covered.">        for (long nId : new long[] { 2, 3, 4, 8 }) {</span>
<span class="fc" id="L303">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L306">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 6.
<span class="fc" id="L309">        neighbours = net.getNeighbours(net.getNeuron(6));</span>
<span class="fc bfc" id="L310" title="All 2 branches covered.">        for (long nId : new long[] { 0, 3, 7, 8 }) {</span>
<span class="fc" id="L311">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L314">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 7.
<span class="fc" id="L317">        neighbours = net.getNeighbours(net.getNeuron(7));</span>
<span class="fc bfc" id="L318" title="All 2 branches covered.">        for (long nId : new long[] { 1, 4, 6, 8 }) {</span>
<span class="fc" id="L319">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L322">        Assert.assertEquals(4, neighbours.size());</span>

        // Neuron 8.
<span class="fc" id="L325">        neighbours = net.getNeighbours(net.getNeuron(8));</span>
<span class="fc bfc" id="L326" title="All 2 branches covered.">        for (long nId : new long[] { 2, 5, 6, 7 }) {</span>
<span class="fc" id="L327">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L330">        Assert.assertEquals(4, neighbours.size());</span>
<span class="fc" id="L331">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     *  |     |     |
     *  |     |     |
     *  6-----7-----8
     */
    @Test
    public void test3x3TorusNetwork2() {
<span class="fc" id="L346">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L347">        final Network net = new NeuronSquareMesh2D(3, true,</span>
                                             3, true,
                                             SquareNeighbourhood.MOORE,
<span class="fc" id="L350">                                             initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // All neurons.
<span class="fc bfc" id="L354" title="All 2 branches covered.">        for (long id : new long[] { 0, 1, 2, 3, 4, 5, 6, 7, 8 }) {</span>
<span class="fc" id="L355">            neighbours = net.getNeighbours(net.getNeuron(id));</span>
<span class="fc bfc" id="L356" title="All 2 branches covered.">            for (long nId : new long[] { 0, 1, 2, 3, 4, 5, 6, 7, 8 }) {</span>
<span class="fc bfc" id="L357" title="All 2 branches covered.">                if (id != nId) {</span>
<span class="fc" id="L358">                    Assert.assertTrue(&quot;id=&quot; + id + &quot; nId=&quot; + nId,</span>
<span class="fc" id="L359">                                      neighbours.contains(net.getNeuron(nId)));</span>
                }
            }
        }
<span class="fc" id="L363">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     *  |     |     |
     *  |     |     |
     *  6-----7-----8
     */
    @Test
    public void test3x3CylinderNetwork() {
<span class="fc" id="L378">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L379">        final Network net = new NeuronSquareMesh2D(3, false,</span>
                                                   3, true,
                                                   SquareNeighbourhood.MOORE,
<span class="fc" id="L382">                                                   initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // Neuron 0.
<span class="fc" id="L386">        neighbours = net.getNeighbours(net.getNeuron(0));</span>
<span class="fc bfc" id="L387" title="All 2 branches covered.">        for (long nId : new long[] { 1, 2, 3, 4, 5}) {</span>
<span class="fc" id="L388">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L391">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 1.
<span class="fc" id="L394">        neighbours = net.getNeighbours(net.getNeuron(1));</span>
<span class="fc bfc" id="L395" title="All 2 branches covered.">        for (long nId : new long[] { 0, 2, 3, 4, 5 }) {</span>
<span class="fc" id="L396">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L399">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 2.
<span class="fc" id="L402">        neighbours = net.getNeighbours(net.getNeuron(2));</span>
<span class="fc bfc" id="L403" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 3, 4, 5 }) {</span>
<span class="fc" id="L404">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L407">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 3.
<span class="fc" id="L410">        neighbours = net.getNeighbours(net.getNeuron(3));</span>
<span class="fc bfc" id="L411" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 2, 4, 5, 6, 7, 8 }) {</span>
<span class="fc" id="L412">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L415">        Assert.assertEquals(8, neighbours.size());</span>

        // Neuron 4.
<span class="fc" id="L418">        neighbours = net.getNeighbours(net.getNeuron(4));</span>
<span class="fc bfc" id="L419" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 2, 3, 5, 6, 7, 8 }) {</span>
<span class="fc" id="L420">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L423">        Assert.assertEquals(8, neighbours.size());</span>

        // Neuron 5.
<span class="fc" id="L426">        neighbours = net.getNeighbours(net.getNeuron(5));</span>
<span class="fc bfc" id="L427" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 2, 3, 4, 6, 7, 8 }) {</span>
<span class="fc" id="L428">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L431">        Assert.assertEquals(8, neighbours.size());</span>

        // Neuron 6.
<span class="fc" id="L434">        neighbours = net.getNeighbours(net.getNeuron(6));</span>
<span class="fc bfc" id="L435" title="All 2 branches covered.">        for (long nId : new long[] { 3, 4, 5, 7, 8 }) {</span>
<span class="fc" id="L436">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L439">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 7.
<span class="fc" id="L442">        neighbours = net.getNeighbours(net.getNeuron(7));</span>
<span class="fc bfc" id="L443" title="All 2 branches covered.">        for (long nId : new long[] { 3, 4, 5, 6, 8 }) {</span>
<span class="fc" id="L444">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L447">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 8.
<span class="fc" id="L450">        neighbours = net.getNeighbours(net.getNeuron(8));</span>
<span class="fc bfc" id="L451" title="All 2 branches covered.">        for (long nId : new long[] { 3, 4, 5, 6, 7 }) {</span>
<span class="fc" id="L452">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L455">        Assert.assertEquals(5, neighbours.size());</span>
<span class="fc" id="L456">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     *  |     |     |
     *  |     |     |
     *  6-----7-----8
     */
    @Test
    public void test3x3CylinderNetwork2() {
<span class="fc" id="L471">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L472">        final Network net = new NeuronSquareMesh2D(3, false,</span>
                                                   3, false,
                                                   SquareNeighbourhood.MOORE,
<span class="fc" id="L475">                                                   initArray).getNetwork();</span>
        Collection&lt;Neuron&gt; neighbours;

        // Neuron 0.
<span class="fc" id="L479">        neighbours = net.getNeighbours(net.getNeuron(0));</span>
<span class="fc bfc" id="L480" title="All 2 branches covered.">        for (long nId : new long[] { 1, 3, 4}) {</span>
<span class="fc" id="L481">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L484">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 1.
<span class="fc" id="L487">        neighbours = net.getNeighbours(net.getNeuron(1));</span>
<span class="fc bfc" id="L488" title="All 2 branches covered.">        for (long nId : new long[] { 0, 2, 3, 4, 5 }) {</span>
<span class="fc" id="L489">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L492">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 2.
<span class="fc" id="L495">        neighbours = net.getNeighbours(net.getNeuron(2));</span>
<span class="fc bfc" id="L496" title="All 2 branches covered.">        for (long nId : new long[] { 1, 4, 5 }) {</span>
<span class="fc" id="L497">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L500">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 3.
<span class="fc" id="L503">        neighbours = net.getNeighbours(net.getNeuron(3));</span>
<span class="fc bfc" id="L504" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 4, 6, 7 }) {</span>
<span class="fc" id="L505">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L508">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 4.
<span class="fc" id="L511">        neighbours = net.getNeighbours(net.getNeuron(4));</span>
<span class="fc bfc" id="L512" title="All 2 branches covered.">        for (long nId : new long[] { 0, 1, 2, 3, 5, 6, 7, 8 }) {</span>
<span class="fc" id="L513">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L516">        Assert.assertEquals(8, neighbours.size());</span>

        // Neuron 5.
<span class="fc" id="L519">        neighbours = net.getNeighbours(net.getNeuron(5));</span>
<span class="fc bfc" id="L520" title="All 2 branches covered.">        for (long nId : new long[] { 1, 2, 4, 7, 8 }) {</span>
<span class="fc" id="L521">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L524">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 6.
<span class="fc" id="L527">        neighbours = net.getNeighbours(net.getNeuron(6));</span>
<span class="fc bfc" id="L528" title="All 2 branches covered.">        for (long nId : new long[] { 3, 4, 7 }) {</span>
<span class="fc" id="L529">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L532">        Assert.assertEquals(3, neighbours.size());</span>

        // Neuron 7.
<span class="fc" id="L535">        neighbours = net.getNeighbours(net.getNeuron(7));</span>
<span class="fc bfc" id="L536" title="All 2 branches covered.">        for (long nId : new long[] { 3, 4, 5, 6, 8 }) {</span>
<span class="fc" id="L537">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L540">        Assert.assertEquals(5, neighbours.size());</span>

        // Neuron 8.
<span class="fc" id="L543">        neighbours = net.getNeighbours(net.getNeuron(8));</span>
<span class="fc bfc" id="L544" title="All 2 branches covered.">        for (long nId : new long[] { 4, 5, 7 }) {</span>
<span class="fc" id="L545">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L548">        Assert.assertEquals(3, neighbours.size());</span>
<span class="fc" id="L549">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2-----3-----4
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  5-----6-----7-----8-----9
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  10----11----12----13---14
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  15----16----17----18---19
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  20----21----22----23---24
     */
    @Test
    public void testConcentricNeighbourhood() {
<span class="fc" id="L570">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L571">        final Network net = new NeuronSquareMesh2D(5, true,</span>
                                             5, true,
                                             SquareNeighbourhood.VON_NEUMANN,
<span class="fc" id="L574">                                             initArray).getNetwork();</span>

        Collection&lt;Neuron&gt; neighbours;
<span class="fc" id="L577">        Collection&lt;Neuron&gt; exclude = new HashSet&lt;&gt;();</span>

        // Level-1 neighbourhood.
<span class="fc" id="L580">        neighbours = net.getNeighbours(net.getNeuron(12));</span>
<span class="fc bfc" id="L581" title="All 2 branches covered.">        for (long nId : new long[] { 7, 11, 13, 17 }) {</span>
<span class="fc" id="L582">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L585">        Assert.assertEquals(4, neighbours.size());</span>

        // 1. Add the neuron to the &quot;exclude&quot; list.
<span class="fc" id="L588">        exclude.add(net.getNeuron(12));</span>
        // 2. Add all neurons from level-1 neighbourhood.
<span class="fc" id="L590">        exclude.addAll(neighbours);</span>
        // 3. Retrieve level-2 neighbourhood.
<span class="fc" id="L592">        neighbours = net.getNeighbours(neighbours, exclude);</span>
<span class="fc bfc" id="L593" title="All 2 branches covered.">        for (long nId : new long[] { 6, 8, 16, 18, 2, 10, 14, 22 }) {</span>
<span class="fc" id="L594">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L597">        Assert.assertEquals(8, neighbours.size());</span>
<span class="fc" id="L598">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2-----3-----4
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  5-----6-----7-----8-----9
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  10----11----12----13---14
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  15----16----17----18---19
     *  |     |     |     |     |
     *  |     |     |     |     |
     *  20----21----22----23---24
     */
    @Test
    public void testConcentricNeighbourhood2() {
<span class="fc" id="L619">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L620">        final Network net = new NeuronSquareMesh2D(5, true,</span>
                                                   5, true,
                                                   SquareNeighbourhood.MOORE,
<span class="fc" id="L623">                                                   initArray).getNetwork();</span>

        Collection&lt;Neuron&gt; neighbours;
<span class="fc" id="L626">        Collection&lt;Neuron&gt; exclude = new HashSet&lt;&gt;();</span>

        // Level-1 neighbourhood.
<span class="fc" id="L629">        neighbours = net.getNeighbours(net.getNeuron(8));</span>
<span class="fc bfc" id="L630" title="All 2 branches covered.">        for (long nId : new long[] { 2, 3, 4, 7, 9, 12, 13, 14 }) {</span>
<span class="fc" id="L631">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L634">        Assert.assertEquals(8, neighbours.size());</span>

        // 1. Add the neuron to the &quot;exclude&quot; list.
<span class="fc" id="L637">        exclude.add(net.getNeuron(8));</span>
        // 2. Add all neurons from level-1 neighbourhood.
<span class="fc" id="L639">        exclude.addAll(neighbours);</span>
        // 3. Retrieve level-2 neighbourhood.
<span class="fc" id="L641">        neighbours = net.getNeighbours(neighbours, exclude);</span>
<span class="fc bfc" id="L642" title="All 2 branches covered.">        for (long nId : new long[] { 1, 6, 11, 16, 17, 18, 19, 15, 10, 5, 0, 20, 24, 23, 22, 21 }) {</span>
<span class="fc" id="L643">            Assert.assertTrue(neighbours.contains(net.getNeuron(nId)));</span>
        }
        // Ensures that no other neurons is in the neihbourhood set.
<span class="fc" id="L646">        Assert.assertEquals(16, neighbours.size());</span>
<span class="fc" id="L647">    }</span>

    @Test
    public void testSerialize()
        throws IOException,
               ClassNotFoundException {
<span class="fc" id="L653">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L654">        final NeuronSquareMesh2D out = new NeuronSquareMesh2D(4, false,</span>
                                                              3, true,
                                                              SquareNeighbourhood.VON_NEUMANN,
                                                              initArray);

<span class="fc" id="L659">        final ByteArrayOutputStream bos = new ByteArrayOutputStream();</span>
<span class="fc" id="L660">        final ObjectOutputStream oos = new ObjectOutputStream(bos);</span>
<span class="fc" id="L661">        oos.writeObject(out);</span>

<span class="fc" id="L663">        final ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());</span>
<span class="fc" id="L664">        final ObjectInputStream ois = new ObjectInputStream(bis);</span>
<span class="fc" id="L665">        final NeuronSquareMesh2D in = (NeuronSquareMesh2D) ois.readObject();</span>

<span class="fc bfc" id="L667" title="All 2 branches covered.">        for (Neuron nOut : out.getNetwork()) {</span>
<span class="fc" id="L668">            final Neuron nIn = in.getNetwork().getNeuron(nOut.getIdentifier());</span>

            // Same values.
<span class="fc" id="L671">            final double[] outF = nOut.getFeatures();</span>
<span class="fc" id="L672">            final double[] inF = nIn.getFeatures();</span>
<span class="fc" id="L673">            Assert.assertEquals(outF.length, inF.length);</span>
<span class="fc bfc" id="L674" title="All 2 branches covered.">            for (int i = 0; i &lt; outF.length; i++) {</span>
<span class="fc" id="L675">                Assert.assertEquals(outF[i], inF[i], 0d);</span>
            }

            // Same neighbours.
<span class="fc" id="L679">            final Collection&lt;Neuron&gt; outNeighbours = out.getNetwork().getNeighbours(nOut);</span>
<span class="fc" id="L680">            final Collection&lt;Neuron&gt; inNeighbours = in.getNetwork().getNeighbours(nIn);</span>
<span class="fc" id="L681">            Assert.assertEquals(outNeighbours.size(), inNeighbours.size());</span>
<span class="fc bfc" id="L682" title="All 2 branches covered.">            for (Neuron oN : outNeighbours) {</span>
<span class="fc" id="L683">                Assert.assertTrue(inNeighbours.contains(in.getNetwork().getNeuron(oN.getIdentifier())));</span>
<span class="fc" id="L684">            }</span>
<span class="fc" id="L685">        }</span>
<span class="fc" id="L686">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1
     *  |     |
     *  |     |
     *  2-----3
     */
    @Test
    public void testGetNeuron() {
<span class="fc" id="L698">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L699">        final NeuronSquareMesh2D net = new NeuronSquareMesh2D(2, false,</span>
                                                              2, true,
                                                              SquareNeighbourhood.VON_NEUMANN,
                                                              initArray);
<span class="fc" id="L703">        Assert.assertEquals(0, net.getNeuron(0, 0).getIdentifier());</span>
<span class="fc" id="L704">        Assert.assertEquals(1, net.getNeuron(0, 1).getIdentifier());</span>
<span class="fc" id="L705">        Assert.assertEquals(2, net.getNeuron(1, 0).getIdentifier());</span>
<span class="fc" id="L706">        Assert.assertEquals(3, net.getNeuron(1, 1).getIdentifier());</span>

        try {
<span class="nc" id="L709">            net.getNeuron(2, 0);</span>
<span class="nc" id="L710">            Assert.fail(&quot;exception expected&quot;);</span>
<span class="fc" id="L711">        } catch (OutOfRangeException e) {</span>
            // Expected.
<span class="nc" id="L713">        }</span>
        try {
<span class="nc" id="L715">            net.getNeuron(0, 2);</span>
<span class="nc" id="L716">            Assert.fail(&quot;exception expected&quot;);</span>
<span class="fc" id="L717">        } catch (OutOfRangeException e) {</span>
            // Expected.
<span class="nc" id="L719">        }</span>
        try {
<span class="nc" id="L721">            net.getNeuron(-1, 0);</span>
<span class="nc" id="L722">            Assert.fail(&quot;exception expected&quot;);</span>
<span class="fc" id="L723">        } catch (OutOfRangeException e) {</span>
            // Expected.
<span class="nc" id="L725">        }</span>
        try {
<span class="nc" id="L727">            net.getNeuron(0, -1);</span>
<span class="nc" id="L728">            Assert.fail(&quot;exception expected&quot;);</span>
<span class="fc" id="L729">        } catch (OutOfRangeException e) {</span>
            // Expected.
<span class="nc" id="L731">        }</span>
<span class="fc" id="L732">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     *  |     |     |
     *  |     |     |
     *  6-----7-----8
     */
    @Test
    public void testGetNeuronAlongDirection() {
<span class="fc" id="L747">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L748">        final NeuronSquareMesh2D net = new NeuronSquareMesh2D(3, false,</span>
                                                              3, false,
                                                              SquareNeighbourhood.VON_NEUMANN,
                                                              initArray);
<span class="fc" id="L752">        Assert.assertEquals(0, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L754">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L755">        Assert.assertEquals(1, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.CENTER,
<span class="fc" id="L757">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L758">        Assert.assertEquals(2, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L760">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L761">        Assert.assertEquals(3, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L763">                                             NeuronSquareMesh2D.VerticalDirection.CENTER).getIdentifier());</span>
<span class="fc" id="L764">        Assert.assertEquals(4, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.CENTER,
<span class="fc" id="L766">                                             NeuronSquareMesh2D.VerticalDirection.CENTER).getIdentifier());</span>
<span class="fc" id="L767">        Assert.assertEquals(5, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L769">                                             NeuronSquareMesh2D.VerticalDirection.CENTER).getIdentifier());</span>
<span class="fc" id="L770">        Assert.assertEquals(6, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L772">                                             NeuronSquareMesh2D.VerticalDirection.DOWN).getIdentifier());</span>
<span class="fc" id="L773">        Assert.assertEquals(7, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.CENTER,
<span class="fc" id="L775">                                             NeuronSquareMesh2D.VerticalDirection.DOWN).getIdentifier());</span>
<span class="fc" id="L776">        Assert.assertEquals(8, net.getNeuron(1, 1,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L778">                                             NeuronSquareMesh2D.VerticalDirection.DOWN).getIdentifier());</span>

        // Locations not in map.
<span class="fc" id="L781">        Assert.assertNull(net.getNeuron(0, 1,</span>
                                        NeuronSquareMesh2D.HorizontalDirection.CENTER,
                                        NeuronSquareMesh2D.VerticalDirection.UP));
<span class="fc" id="L784">        Assert.assertNull(net.getNeuron(1, 0,</span>
                                        NeuronSquareMesh2D.HorizontalDirection.LEFT,
                                        NeuronSquareMesh2D.VerticalDirection.CENTER));
<span class="fc" id="L787">        Assert.assertNull(net.getNeuron(2, 1,</span>
                                        NeuronSquareMesh2D.HorizontalDirection.CENTER,
                                        NeuronSquareMesh2D.VerticalDirection.DOWN));
<span class="fc" id="L790">        Assert.assertNull(net.getNeuron(1, 2,</span>
                                        NeuronSquareMesh2D.HorizontalDirection.RIGHT,
                                        NeuronSquareMesh2D.VerticalDirection.CENTER));
<span class="fc" id="L793">    }</span>

    /*
     * Test assumes that the network is
     *
     *  0-----1-----2
     *  |     |     |
     *  |     |     |
     *  3-----4-----5
     *  |     |     |
     *  |     |     |
     *  6-----7-----8
     */
    @Test
    public void testGetNeuronAlongDirectionWrappedMap() {
<span class="fc" id="L808">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L809">        final NeuronSquareMesh2D net = new NeuronSquareMesh2D(3, true,</span>
                                                              3, true,
                                                              SquareNeighbourhood.VON_NEUMANN,
                                                              initArray);
        // No wrapping.
<span class="fc" id="L814">        Assert.assertEquals(3, net.getNeuron(0, 0,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.CENTER,
<span class="fc" id="L816">                                             NeuronSquareMesh2D.VerticalDirection.DOWN).getIdentifier());</span>
        // With wrapping.
<span class="fc" id="L818">        Assert.assertEquals(2, net.getNeuron(0, 0,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L820">                                             NeuronSquareMesh2D.VerticalDirection.CENTER).getIdentifier());</span>
<span class="fc" id="L821">        Assert.assertEquals(7, net.getNeuron(0, 0,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L823">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L824">        Assert.assertEquals(8, net.getNeuron(0, 0,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L826">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L827">        Assert.assertEquals(6, net.getNeuron(0, 0,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.CENTER,
<span class="fc" id="L829">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L830">        Assert.assertEquals(5, net.getNeuron(0, 0,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L832">                                             NeuronSquareMesh2D.VerticalDirection.DOWN).getIdentifier());</span>

        // No wrapping.
<span class="fc" id="L835">        Assert.assertEquals(1, net.getNeuron(1, 2,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.LEFT,
<span class="fc" id="L837">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
        // With wrapping.
<span class="fc" id="L839">        Assert.assertEquals(0, net.getNeuron(1, 2,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L841">                                             NeuronSquareMesh2D.VerticalDirection.UP).getIdentifier());</span>
<span class="fc" id="L842">        Assert.assertEquals(3, net.getNeuron(1, 2,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L844">                                             NeuronSquareMesh2D.VerticalDirection.CENTER).getIdentifier());</span>
<span class="fc" id="L845">        Assert.assertEquals(6, net.getNeuron(1, 2,</span>
                                             NeuronSquareMesh2D.HorizontalDirection.RIGHT,
<span class="fc" id="L847">                                             NeuronSquareMesh2D.VerticalDirection.DOWN).getIdentifier());</span>
<span class="fc" id="L848">    }</span>

    @Test
    public void testIterator() {
<span class="fc" id="L852">        final FeatureInitializer[] initArray = { init };</span>
<span class="fc" id="L853">        final NeuronSquareMesh2D map = new NeuronSquareMesh2D(3, true,</span>
                                                              3, true,
                                                              SquareNeighbourhood.VON_NEUMANN,
                                                              initArray);
<span class="fc" id="L857">        final Set&lt;Neuron&gt; fromMap = new HashSet&lt;&gt;();</span>
<span class="fc bfc" id="L858" title="All 2 branches covered.">        for (Neuron n : map) {</span>
<span class="fc" id="L859">            fromMap.add(n);</span>
<span class="fc" id="L860">        }</span>

<span class="fc" id="L862">        final Network net = map.getNetwork();</span>
<span class="fc" id="L863">        final Set&lt;Neuron&gt; fromNet = new HashSet&lt;&gt;();</span>
<span class="fc bfc" id="L864" title="All 2 branches covered.">        for (Neuron n : net) {</span>
<span class="fc" id="L865">            fromNet.add(n);</span>
<span class="fc" id="L866">        }</span>

<span class="fc bfc" id="L868" title="All 2 branches covered.">        for (Neuron n : fromMap) {</span>
<span class="fc" id="L869">            Assert.assertTrue(fromNet.contains(n));</span>
<span class="fc" id="L870">        }</span>
<span class="fc bfc" id="L871" title="All 2 branches covered.">        for (Neuron n : fromNet) {</span>
<span class="fc" id="L872">            Assert.assertTrue(fromMap.contains(n));</span>
<span class="fc" id="L873">        }</span>
<span class="fc" id="L874">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>