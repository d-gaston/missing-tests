<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>InputEqualsAvoidNull.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">checkstyle$java_in_checkstyle.exec</a> &gt; <a href="index.source.html" class="el_package">com.puppycrawl.tools.checkstyle.checks.coding.equalsavoidnull</a> &gt; <span class="el_source">InputEqualsAvoidNull.java</span></div><h1>InputEqualsAvoidNull.java</h1><pre class="source lang-java linenums">package com.puppycrawl.tools.checkstyle.checks.coding.equalsavoidnull;
import java.util.Map;
<span class="nc" id="L3">public class InputEqualsAvoidNull {</span>

    public boolean equals(Object o) {
<span class="nc" id="L6">    return false;</span>
    }
    // another comment
    /**
     * methods that should get flagged
     * @return
     */
    public void flagForEquals() {

<span class="nc" id="L15">        Object o = new Object();</span>
<span class="nc" id="L16">        String s = &quot;pizza&quot;;</span>

<span class="nc" id="L18">        o.equals(&quot;hot pizza&quot;)/*comment test*/;</span>

<span class="nc" id="L20">        o.equals(s = &quot;cold pizza&quot;);</span>

<span class="nc" id="L22">        o.equals(((s = &quot;cold pizza&quot;)));</span>

<span class="nc" id="L24">        o.equals(&quot;cheese&quot; + &quot;ham&quot; + &quot;sauce&quot;);</span>

<span class="nc" id="L26">        o.equals((&quot;cheese&quot; + &quot;ham&quot;) + &quot;sauce&quot;);</span>

<span class="nc" id="L28">        o.equals(((&quot;cheese&quot; + &quot;ham&quot;)) + &quot;sauce&quot;);</span>
<span class="nc" id="L29">    }</span>

    /**
     * methods that should get flagged
     */
    public void flagForEqualsIgnoreCase() {
<span class="nc" id="L35">        String s = &quot;pizza&quot;;</span>

<span class="nc" id="L37">        s.equalsIgnoreCase(&quot;hot pizza&quot;);</span>

<span class="nc" id="L39">        s.equalsIgnoreCase(s = &quot;cold pizza&quot;);</span>

<span class="nc" id="L41">        s.equalsIgnoreCase(((s = &quot;cold pizza&quot;)));</span>

<span class="nc" id="L43">        s.equalsIgnoreCase(&quot;cheese&quot; + &quot;ham&quot; + &quot;sauce&quot;);</span>

<span class="nc" id="L45">        s.equalsIgnoreCase((&quot;cheese&quot; + &quot;ham&quot;) + &quot;sauce&quot;);</span>

<span class="nc" id="L47">        s.equalsIgnoreCase(((&quot;cheese&quot; + &quot;ham&quot;)) + &quot;sauce&quot;);</span>
<span class="nc" id="L48">    }</span>

    /**
     * methods that should get flagged
     */
    public void flagForBoth() {
<span class="nc" id="L54">        Object o = new Object();</span>
<span class="nc" id="L55">        String s = &quot;pizza&quot;;</span>

<span class="nc" id="L57">        o.equals(&quot;hot pizza&quot;);</span>

<span class="nc" id="L59">        o.equals(s = &quot;cold pizza&quot;);</span>

<span class="nc" id="L61">        o.equals(((s = &quot;cold pizza&quot;)));</span>

<span class="nc" id="L63">        o.equals(&quot;cheese&quot; + &quot;ham&quot; + &quot;sauce&quot;);</span>

<span class="nc" id="L65">        o.equals((&quot;cheese&quot; + &quot;ham&quot;) + &quot;sauce&quot;);</span>

<span class="nc" id="L67">        o.equals(((&quot;cheese&quot; + &quot;ham&quot;)) + &quot;sauce&quot;);</span>

<span class="nc" id="L69">        s.equalsIgnoreCase(&quot;hot pizza&quot;);</span>

<span class="nc" id="L71">        s.equalsIgnoreCase(s = &quot;cold pizza&quot;);</span>

<span class="nc" id="L73">        s.equalsIgnoreCase(((s = &quot;cold pizza&quot;)));</span>

<span class="nc" id="L75">        s.equalsIgnoreCase(&quot;cheese&quot; + &quot;ham&quot; + &quot;sauce&quot;);</span>

<span class="nc" id="L77">        s.equalsIgnoreCase((&quot;cheese&quot; + &quot;ham&quot;) + &quot;sauce&quot;);</span>

<span class="nc" id="L79">        s.equalsIgnoreCase(((&quot;cheese&quot; + &quot;ham&quot;)) + &quot;sauce&quot;);</span>
<span class="nc" id="L80">    }</span>


    /**
     * methods that should not get flagged
     *
     * @return
     */
    public void noFlagForEquals() {
<span class="nc" id="L89">        Object o = new Object();</span>
<span class="nc" id="L90">        String s = &quot;peperoni&quot;;</span>

<span class="nc" id="L92">        o.equals(s += &quot;mushrooms&quot;);</span>

<span class="nc" id="L94">        (s = &quot;thin crust&quot;).equals(&quot;thick crust&quot;);</span>

<span class="nc" id="L96">        (s += &quot;garlic&quot;).equals(&quot;basil&quot;);</span>

<span class="nc" id="L98">        (&quot;Chicago Style&quot; + &quot;NY Style&quot;).equals(&quot;California Style&quot; + &quot;Any Style&quot;);</span>

<span class="nc" id="L100">        equals(&quot;peppers&quot;);</span>

<span class="nc" id="L102">        &quot;onions&quot;.equals(o);</span>

<span class="nc" id="L104">        o.equals(new Object());</span>

<span class="nc" id="L106">        o.equals(equals(o));</span>

<span class="nc" id="L108">        equals(&quot;yummy&quot;);</span>

<span class="nc" id="L110">        new Object().equals(&quot;more cheese&quot;);</span>

<span class="nc" id="L112">        InputEqualsAvoidNullOutter outter = new InputEqualsAvoidNullOutter();</span>

<span class="nc" id="L114">        outter.new InputEqualsAvoidNullInner().equals(&quot;eat pizza and enjoy inner classes&quot;);</span>
<span class="nc" id="L115">    }</span>

    /**
     * methods that should not get flagged
     */
    public void noFlagForEqualsIgnoreCase() {
<span class="nc" id="L121">        String s = &quot;peperoni&quot;;</span>
<span class="nc" id="L122">        String s1 = &quot;tasty&quot;;</span>

<span class="nc" id="L124">        s.equalsIgnoreCase(s += &quot;mushrooms&quot;);</span>

<span class="nc" id="L126">        s1.equalsIgnoreCase(s += &quot;mushrooms&quot;);</span>

<span class="nc" id="L128">        (s = &quot;thin crust&quot;).equalsIgnoreCase(&quot;thick crust&quot;);</span>

<span class="nc" id="L130">        (s += &quot;garlic&quot;).equalsIgnoreCase(&quot;basil&quot;);</span>

<span class="nc" id="L132">        (&quot;Chicago Style&quot; + &quot;NY Style&quot;).equalsIgnoreCase(&quot;California Style&quot; + &quot;Any Style&quot;);</span>

<span class="nc" id="L134">        &quot;onions&quot;.equalsIgnoreCase(s);</span>

<span class="nc" id="L136">        s.equalsIgnoreCase(new String());</span>

<span class="nc" id="L138">        s.equals(s1);</span>

<span class="nc" id="L140">        new String().equalsIgnoreCase(&quot;more cheese&quot;);</span>

<span class="nc" id="L142">    }</span>

    public void noFlagForBoth() {
<span class="nc" id="L145">        Object o = new Object();</span>
<span class="nc" id="L146">        String s = &quot;peperoni&quot;;</span>
<span class="nc" id="L147">        String s1 = &quot;tasty&quot;;</span>

<span class="nc" id="L149">        o.equals(s += &quot;mushrooms&quot;);</span>

<span class="nc" id="L151">        (s = &quot;thin crust&quot;).equals(&quot;thick crust&quot;);</span>

<span class="nc" id="L153">        (s += &quot;garlic&quot;).equals(&quot;basil&quot;);</span>

<span class="nc" id="L155">        (&quot;Chicago Style&quot; + &quot;NY Style&quot;).equals(&quot;California Style&quot; + &quot;Any Style&quot;);</span>

<span class="nc" id="L157">        equals(&quot;peppers&quot;);</span>

<span class="nc" id="L159">        &quot;onions&quot;.equals(o);</span>

<span class="nc" id="L161">        o.equals(new Object());</span>

<span class="nc" id="L163">        o.equals(equals(o));</span>

<span class="nc" id="L165">        equals(&quot;yummy&quot;);</span>

<span class="nc" id="L167">        new Object().equals(&quot;more cheese&quot;);</span>

<span class="nc" id="L169">        InputEqualsAvoidNullOutter outter = new InputEqualsAvoidNullOutter();</span>

<span class="nc" id="L171">        outter.new InputEqualsAvoidNullInner().equals(&quot;eat pizza and enjoy inner classes&quot;);</span>

<span class="nc" id="L173">        s.equalsIgnoreCase(s += &quot;mushrooms&quot;);</span>

<span class="nc" id="L175">        s1.equalsIgnoreCase(s += &quot;mushrooms&quot;);</span>

<span class="nc" id="L177">        (s = &quot;thin crust&quot;).equalsIgnoreCase(&quot;thick crust&quot;);</span>

<span class="nc" id="L179">        (s += &quot;garlic&quot;).equalsIgnoreCase(&quot;basil&quot;);</span>

<span class="nc" id="L181">        (&quot;Chicago Style&quot; + &quot;NY Style&quot;).equalsIgnoreCase(&quot;California Style&quot; + &quot;Any Style&quot;);</span>

<span class="nc" id="L183">        &quot;onions&quot;.equalsIgnoreCase(s);</span>

<span class="nc" id="L185">        s.equalsIgnoreCase(new String());</span>

<span class="nc" id="L187">        s.equals(s1);</span>

<span class="nc" id="L189">        new String().equalsIgnoreCase(&quot;more cheese&quot;);</span>

<span class="nc" id="L191">    }</span>

}

<span class="nc" id="L195">class InputEqualsAvoidNullOutter {</span>
<span class="nc" id="L196">    public class InputEqualsAvoidNullInner {</span>
            public boolean equals(Object o) {
<span class="nc" id="L198">                return true;</span>
            }
    }
}

<span class="nc" id="L203">class MyString {</span>
    public boolean equals() {
<span class="nc" id="L205">        return true;</span>
    }

    public boolean equals(String s1) {
<span class="nc" id="L209">        return true;</span>
    }

    public boolean equalsIgnoreCase() {
<span class="nc" id="L213">        return true;</span>
    }

    public boolean equalsIgnoreCase(String s1) {
<span class="nc" id="L217">        return true;</span>
    }

    private String pizza;

    public void main() {
<span class="nc" id="L223">        MyString myString = new MyString();</span>
<span class="nc" id="L224">        myString.equals();</span>
<span class="nc" id="L225">        myString.equals(&quot;what&quot;);</span>
<span class="nc" id="L226">        myString.equalsIgnoreCase();</span>
<span class="nc" id="L227">        myString.equalsIgnoreCase(&quot;what&quot;);</span>
<span class="nc" id="L228">        myString.equals(this.pizza = &quot;cold pizza&quot;);</span>
<span class="nc" id="L229">    }</span>
}

class NewTest {
    static String classVar;
    String instanceVar;
<span class="nc" id="L235">    NewTest testObj = new NewTest(&quot;&quot;);</span>

<span class="nc" id="L237">    NewTest(String param) {</span>
<span class="nc" id="L238">        param.equals(&quot;&quot;);</span>
<span class="nc" id="L239">    }</span>

    public void method(String param) {
<span class="nc" id="L242">        final String localVar = &quot;&quot;;</span>

<span class="nc" id="L244">        localVar.equals(&quot;&quot;);</span>
<span class="nc" id="L245">        param.equals(&quot;&quot;);</span>

<span class="nc" id="L247">        classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L248">        instanceVar.equals(&quot;&quot;);</span>
<span class="nc" id="L249">        NewTest.classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L250">        this.classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L251">        this.instanceVar.equals(&quot;&quot;);</span>

<span class="nc" id="L253">        NewTest testObj = new NewTest(&quot;&quot;);</span>
<span class="nc" id="L254">        this.testObj.instanceVar.equals(&quot;&quot;); // not violated, too confusing</span>
<span class="nc" id="L255">        testObj.classVar.equals(&quot;&quot;); // not violated</span>

<span class="nc bnc" id="L257" title="All 2 branches missed.">        for (Nested instanceVar = new Nested(); instanceVar != null; ) {</span>
<span class="nc" id="L258">            instanceVar.equals(1);</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">            if (instanceVar.equals(&quot;&quot;)) {</span>
<span class="nc" id="L260">                instanceVar.equals(&quot;&quot;);</span>
            }
        }

<span class="nc" id="L264">        class Inner {</span>
            String instanceVarInner;

            public void main() {
<span class="nc" id="L268">                classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L269">                instanceVar.equals(&quot;&quot;);</span>
<span class="nc" id="L270">                NewTest.classVar.equals(&quot;&quot;);</span>

<span class="nc" id="L272">                instanceVarInner.equals(&quot;&quot;);</span>
<span class="nc" id="L273">                this.instanceVarInner.equals(&quot;&quot;);</span>
<span class="nc" id="L274">                localVar.equals(&quot;&quot;);</span>

<span class="nc" id="L276">                NewTest testObj = new NewTest(&quot;&quot;);</span>
<span class="nc" id="L277">                testObj.instanceVar.equals(&quot;&quot;); // not violated</span>
<span class="nc" id="L278">                testObj.classVar.equals(&quot;&quot;); // not violated</span>

<span class="nc" id="L280">                Inner testInnerObj = new Inner();</span>
<span class="nc" id="L281">                testInnerObj.instanceVarInner.equals(&quot;&quot;); // not violated</span>
<span class="nc" id="L282">            }</span>
        }

<span class="nc" id="L285">        Inner testInnerObj = new Inner();</span>
<span class="nc" id="L286">        testInnerObj.instanceVarInner.equals(&quot;&quot;); // not violated</span>

<span class="nc" id="L288">        Nested.nestedClassVar.equals(&quot;&quot;); // not violated, because the equals call is not</span>
<span class="nc" id="L289">        Nested Nested = new Nested(); // embedded in class Nested, what can lead to really</span>
<span class="nc" id="L290">        Nested.nestedInstanceVar.equals(&quot;&quot;); // confusing constructions. But could be improved.</span>
<span class="nc" id="L291">        Nested.nestedClassVar.equals(&quot;&quot;);</span>
<span class="nc" id="L292">    }</span>
    static {
<span class="nc" id="L294">        final String s = &quot;&quot;;</span>
<span class="nc" id="L295">        s.equals(&quot;&quot;);</span>
        {
<span class="nc" id="L297">            final String x = &quot;&quot;;</span>
<span class="nc" id="L298">            class A {</span>
                void foo() {
<span class="nc" id="L300">                    s.equals(&quot;&quot;);</span>
<span class="nc" id="L301">                    x.equals(&quot;&quot;);</span>
<span class="nc" id="L302">                }</span>
            }
        }
<span class="nc" id="L305">    }</span>
    void foo(String param) {
        try {
<span class="nc" id="L308">            param.equals(&quot;&quot;);</span>
            do {
<span class="nc" id="L310">                String s = &quot;&quot;;</span>
<span class="nc" id="L311">                s.equals(&quot;&quot;);</span>
<span class="nc bnc" id="L312" title="All 2 branches missed.">            } while (param.equals(&quot;&quot;));</span>
<span class="nc" id="L313">        } catch (Exception e) {</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">            while (param.equals(&quot;&quot;)) {</span>
<span class="nc bnc" id="L315" title="All 2 branches missed.">                for (String s = &quot;&quot;; s.equals(&quot;&quot;); ){</span>
<span class="nc bnc" id="L316" title="All 2 branches missed.">                    if (s.equals(&quot;&quot;)) {</span>
<span class="nc" id="L317">                        synchronized (this) {</span>
<span class="nc bnc" id="L318" title="All 4 branches missed.">                            switch (s) {</span>
<span class="nc" id="L319">                                case &quot;1&quot;: String str = &quot;&quot;; str.equals(&quot;&quot;);</span>
<span class="nc" id="L320">                                case &quot;2&quot;: s.equals(&quot;&quot;); str = &quot;&quot;; str.equals(&quot;&quot;);</span>
<span class="nc" id="L321">                                case &quot;3&quot;: param.equals(&quot;&quot;);</span>
                                    break;
                            }
<span class="nc" id="L324">                        }</span>
                    }
                }
            }
<span class="nc" id="L328">        }</span>
<span class="nc" id="L329">    }</span>

<span class="nc" id="L331">    static class Nested {</span>
        static String nestedClassVar;
        String nestedInstanceVar;
        public void method() {
<span class="nc" id="L335">            classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L336">            NewTest.classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L337">            this.nestedInstanceVar.equals(&quot;&quot;);</span>
<span class="nc" id="L338">            nestedClassVar.equals(&quot;&quot;);</span>
<span class="nc" id="L339">            nestedInstanceVar.equals(&quot;&quot;);</span>

<span class="nc" id="L341">            class Inner {</span>
                public void method() {
<span class="nc" id="L343">                    classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L344">                    NewTest.classVar.equals(&quot;&quot;);</span>
<span class="nc" id="L345">                    nestedClassVar.equals(&quot;&quot;);</span>
<span class="nc" id="L346">                    nestedInstanceVar.equals(&quot;&quot;);</span>
<span class="nc" id="L347">                }</span>
            }
<span class="nc" id="L349">        }</span>
    }
<span class="nc" id="L351">    enum EmbeddedEnum {</span>
<span class="nc" id="L352">        A(129),</span>
<span class="nc" id="L353">        B(283),</span>
<span class="nc" id="L354">        C(1212) {</span>
            String constDefVar;
            public void doSomething() {
<span class="nc" id="L357">                constDefVar.equals(&quot;&quot;);</span>
<span class="nc" id="L358">            }</span>
        };

        Map.Entry&lt;String,Long&gt; enumInstance;

<span class="nc" id="L363">        EmbeddedEnum(int i) {</span>
<span class="nc" id="L364">            enumInstance.equals(&quot;&quot;);</span>
<span class="nc" id="L365">        }</span>

        public static void doSomethingStatic() {
<span class="nc" id="L368">            enumStatic.equals(&quot;&quot;);</span>
<span class="nc" id="L369">            enumStatic.equals(null);</span>
<span class="nc" id="L370">        }</span>
        static String enumStatic;
    }

<span class="nc" id="L374">    private String foo() {return &quot;&quot;;}</span>
<span class="nc" id="L375">    private Object foo(int i) {return i;}</span>

<span class="nc" id="L377">    Object o2 = new Object();</span>
<span class="nc" id="L378">    Object o3 = new Object();</span>
    private void bar() {
<span class="nc" id="L380">        foo().equals(&quot;&quot;); // methods are not checked</span>
<span class="nc" id="L381">        foo(0).equals(&quot;&quot;);</span>
<span class="nc" id="L382">        this.foo().equals(&quot;&quot;);</span>
<span class="nc" id="L383">        Object o1 = new Object(); o1.equals(&quot;&quot;);</span>
<span class="nc" id="L384">        o2.equals(&quot;&quot;); String o2 = &quot;&quot;;</span>
<span class="nc" id="L385">        o3.equals(&quot;&quot;);</span>
<span class="nc" id="L386">String o3 = &quot;&quot;;</span>
<span class="nc" id="L387">    }</span>
}
<span class="nc" id="L389">class Anonymous {</span>
    public static void main(String[] args) {
<span class="nc" id="L391">        Runnable anonym = new Runnable() {</span>
<span class="nc" id="L392">            String nullableStr = null;</span>
            public void run() {
<span class="nc" id="L394">                nullableStr.equals(&quot;Null&quot;);</span>
<span class="nc" id="L395">            };</span>
        };
<span class="nc" id="L397">        Object nullableStr = new Object();</span>
<span class="nc" id="L398">        nullableStr.equals(&quot;&quot;);</span>
<span class="nc" id="L399">    }</span>
<span class="nc" id="L400">    {}</span>
}

<span class="nc" id="L403">enum TestEnum {</span>
<span class="nc" id="L404">    ONE;</span>
    public void foo() {
<span class="nc" id="L406">        TestEnum.ONE.equals(this);</span>
<span class="nc" id="L407">        this.ONE.equals(this);</span>
<span class="nc" id="L408">    }</span>
}

<span class="nc" id="L411">class TestConcatenations {</span>
<span class="nc" id="L412">    String s = null;</span>

    void foo() {
<span class="nc" id="L415">        s.equals(s + s);</span>
<span class="nc" id="L416">        s.equals(&quot;a&quot; + &quot;b&quot;);</span>
<span class="nc" id="L417">        s.equals(getInt() + s);</span>
<span class="nc" id="L418">        s.equals(getInt() + getInt());</span>
<span class="nc" id="L419">        s.endsWith(&quot;a&quot;);</span>
<span class="nc" id="L420">        String s = &quot;&quot;;</span>
<span class="nc bnc" id="L421" title="All 2 branches missed.">        if (!s.equals(&quot;Hello[EOL]&quot; + System.getProperty(&quot;line.separator&quot;)))</span>
<span class="nc" id="L422">            foo();</span>
<span class="nc" id="L423">    }</span>

    int getInt() {
<span class="nc" id="L426">        return (Integer) null;</span>
    }
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>