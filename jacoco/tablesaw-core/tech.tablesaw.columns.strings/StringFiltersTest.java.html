<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StringFiltersTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tablesaw_core$All_in_tablesaw_core.exec</a> &gt; <a href="index.source.html" class="el_package">tech.tablesaw.columns.strings</a> &gt; <span class="el_source">StringFiltersTest.java</span></div><h1>StringFiltersTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package tech.tablesaw.columns.strings;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

import com.google.common.collect.Lists;
import java.util.List;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import tech.tablesaw.api.DoubleColumn;
import tech.tablesaw.api.StringColumn;
import tech.tablesaw.api.Table;

<span class="fc" id="L29">public class StringFiltersTest {</span>

<span class="fc" id="L31">  private StringColumn sc1 = StringColumn.create(&quot;sc1&quot;);</span>

<span class="fc" id="L33">  private StringColumn sc2 = StringColumn.create(&quot;sc2&quot;);</span>

<span class="fc" id="L35">  private Table table = Table.create(&quot;T&quot;);</span>

  @BeforeEach
  public void setUp() {
<span class="fc" id="L39">    sc1.append(&quot;apple&quot;); // 0</span>
<span class="fc" id="L40">    sc1.append(&quot;Banana&quot;); // 1</span>
<span class="fc" id="L41">    sc1.append(&quot;cherry&quot;);</span>
<span class="fc" id="L42">    sc1.append(&quot;diamond&quot;); // 3</span>
<span class="fc" id="L43">    sc1.append(&quot;elephant&quot;);</span>
<span class="fc" id="L44">    sc1.append(&quot;fiscal&quot;); // 5</span>
<span class="fc" id="L45">    sc1.append(&quot;fish&quot;);</span>
<span class="fc" id="L46">    sc1.append(&quot;apple wine&quot;); // 7</span>
<span class="fc" id="L47">    sc1.append(&quot;Santana&quot;);</span>
<span class="fc" id="L48">    sc1.append(&quot;dog&quot;); // 9</span>
<span class="fc" id="L49">    sc1.append(&quot;dogmatic&quot;);</span>
<span class="fc" id="L50">    sc1.append(&quot;1001&quot;); // 11</span>
<span class="fc" id="L51">    sc1.append(&quot;10&quot;);</span>
<span class="fc" id="L52">    sc1.append(&quot;10 days ago&quot;); // 13</span>
<span class="fc" id="L53">    sc1.append(&quot;cran apple&quot;);</span>
<span class="fc" id="L54">    sc1.append(&quot;8 * five&quot;); // 15</span>
<span class="fc" id="L55">    sc1.append(&quot;101ers&quot;);</span>
<span class="fc" id="L56">    sc1.append(&quot;UPPERCASE&quot;); // 17</span>
<span class="fc" id="L57">    sc1.append(&quot;&quot;);</span>

<span class="fc" id="L59">    sc2.append(&quot;APPLE&quot;); // 0</span>
<span class="fc" id="L60">    sc2.append(&quot;Banana&quot;); // 1</span>
<span class="fc" id="L61">    sc2.append(&quot;cheesecake&quot;);</span>
<span class="fc" id="L62">    sc2.append(&quot;diamond&quot;); // 3</span>
<span class="fc" id="L63">    sc2.append(&quot;elephant&quot;);</span>
<span class="fc" id="L64">    sc2.append(&quot;fiscal&quot;); // 5</span>
<span class="fc" id="L65">    sc2.append(&quot;wish&quot;);</span>
<span class="fc" id="L66">    sc2.append(&quot;apple wine&quot;); // 7</span>
<span class="fc" id="L67">    sc2.append(&quot;Santana&quot;);</span>
<span class="fc" id="L68">    sc2.append(&quot;dog&quot;); // 9</span>
<span class="fc" id="L69">    sc2.append(&quot;atic&quot;);</span>
<span class="fc" id="L70">    sc2.append(&quot;1001&quot;); // 11</span>
<span class="fc" id="L71">    sc2.append(&quot;10&quot;);</span>
<span class="fc" id="L72">    sc2.append(&quot;10 days ago&quot;); // 13</span>
<span class="fc" id="L73">    sc2.append(&quot;cran apple&quot;);</span>
<span class="fc" id="L74">    sc2.append(&quot;8 * five&quot;); // 15</span>
<span class="fc" id="L75">    sc2.append(&quot;101ers&quot;);</span>
<span class="fc" id="L76">    sc2.append(&quot;UPPERCASE&quot;); // 17</span>
<span class="fc" id="L77">    sc2.append(&quot;&quot;);</span>

<span class="fc" id="L79">    table.addColumns(sc1);</span>
<span class="fc" id="L80">    table.addColumns(sc2);</span>
<span class="fc" id="L81">  }</span>

  @Test
  public void testLength() {
<span class="fc" id="L85">    assertEquals(5, sc1.length().get(0), 0.000001);</span>
<span class="fc" id="L86">  }</span>

  @Test
  public void testUniqueTokens() {
<span class="fc" id="L90">    String[] values = {&quot;a&quot;, &quot;a b&quot;, &quot;c d 3&quot;, &quot;b 4&quot;};</span>
<span class="fc" id="L91">    StringColumn column1 = StringColumn.create(&quot;1&quot;, values);</span>
<span class="fc" id="L92">    StringColumn tokens = column1.tokens(&quot; &quot;);</span>
<span class="fc" id="L93">    assertEquals(8, tokens.size(), 0.0001);</span>
<span class="fc" id="L94">    StringColumn uniqueTokens = column1.uniqueTokens(&quot; &quot;);</span>
<span class="fc" id="L95">    assertEquals(6, uniqueTokens.size(), 0.000001);</span>
<span class="fc" id="L96">  }</span>

  @Test
  public void testCountOccurrences() {
<span class="fc" id="L100">    String[] values = {&quot;a&quot;, &quot;a b&quot;, &quot;c d 3&quot;, &quot;b 4&quot;, &quot;a&quot;};</span>
<span class="fc" id="L101">    StringColumn column1 = StringColumn.create(&quot;1&quot;, values);</span>
<span class="fc" id="L102">    assertEquals(0, column1.countOccurrences(&quot;v&quot;), 0.000001);</span>
<span class="fc" id="L103">    assertEquals(1, column1.countOccurrences(&quot;b 4&quot;), 0.000001);</span>
<span class="fc" id="L104">    assertEquals(2, column1.countOccurrences(&quot;a&quot;), 0.000001);</span>
<span class="fc" id="L105">  }</span>

  @Test
  public void testEqualsIgnoreCase() {
<span class="fc" id="L109">    assertTrue(sc1.equalsIgnoreCase(&quot;APPLE&quot;).contains(0));</span>

<span class="fc" id="L111">    assertTrue(sc1.equalsIgnoreCase(sc2).contains(0));</span>
<span class="fc" id="L112">  }</span>

  @Test
  public void testStartsWith() {
    // test column filtering
<span class="fc" id="L117">    assertTrue(sc1.startsWith(&quot;dog&quot;).contains(9));</span>
<span class="fc" id="L118">    assertTrue(sc1.startsWith(&quot;dog&quot;).contains(10));</span>
<span class="fc" id="L119">  }</span>

  @Test
  public void testEndsWith() {
<span class="fc" id="L123">    assertTrue(sc1.endsWith(&quot;dog&quot;).contains(9));</span>
<span class="fc" id="L124">    assertFalse(sc1.endsWith(&quot;dog&quot;).contains(10));</span>
<span class="fc" id="L125">  }</span>

  @Test
  public void testContainsString() {
<span class="fc" id="L129">    assertTrue(sc1.containsString(&quot;eph&quot;).contains(4));</span>
<span class="fc" id="L130">    assertFalse(sc1.containsString(&quot;eph&quot;).contains(10));</span>
<span class="fc" id="L131">  }</span>

  @Test
  public void testMatchesRegex() {
<span class="fc" id="L135">    assertTrue(sc1.matchesRegex(&quot;^apple&quot;).contains(0));</span>
<span class="fc" id="L136">    assertFalse(sc1.matchesRegex(&quot;^apple&quot;).contains(7));</span>
<span class="fc" id="L137">    assertFalse(sc1.matchesRegex(&quot;^apple&quot;).contains(10));</span>
<span class="fc" id="L138">    assertFalse(sc1.matchesRegex(&quot;^apple&quot;).contains(14));</span>
<span class="fc" id="L139">  }</span>

  @Test
  public void testIsAlpha() {
<span class="fc" id="L143">    assertTrue(sc1.isAlpha().contains(4));</span>
<span class="fc" id="L144">    assertFalse(sc1.isAlpha().contains(11));</span>
<span class="fc" id="L145">    assertFalse(sc1.isAlpha().contains(13));</span>
<span class="fc" id="L146">  }</span>

  @Test
  public void testIsNumeric() {
<span class="fc" id="L150">    assertFalse(sc1.isNumeric().contains(4));</span>
<span class="fc" id="L151">    assertTrue(sc1.isNumeric().contains(11));</span>
<span class="fc" id="L152">    assertFalse(sc1.isNumeric().contains(13));</span>
<span class="fc" id="L153">  }</span>

  @Test
  public void testIsAlphaNumeric() {
<span class="fc" id="L157">    assertTrue(sc1.isAlphaNumeric().contains(4));</span>
<span class="fc" id="L158">    assertTrue(sc1.isAlphaNumeric().contains(11));</span>
<span class="fc" id="L159">    assertFalse(sc1.isAlphaNumeric().contains(13));</span>
<span class="fc" id="L160">    assertFalse(sc1.isAlphaNumeric().contains(15));</span>
<span class="fc" id="L161">    assertTrue(sc1.isAlphaNumeric().contains(16));</span>
<span class="fc" id="L162">  }</span>

  @Test
  public void testIsUpperCase() {
<span class="fc" id="L166">    assertFalse(sc1.isUpperCase().contains(4));</span>
<span class="fc" id="L167">    assertFalse(sc1.isUpperCase().contains(13));</span>
<span class="fc" id="L168">    assertTrue(sc1.isUpperCase().contains(17));</span>
<span class="fc" id="L169">  }</span>

  @Test
  public void testIsLowerCase() {
<span class="fc" id="L173">    assertTrue(sc1.isLowerCase().contains(4));</span>
<span class="fc" id="L174">    assertFalse(sc1.isLowerCase().contains(17));</span>
<span class="fc" id="L175">  }</span>

  @Test
  public void testLengthEquals() {
<span class="fc" id="L179">    assertTrue(sc1.lengthEquals(5).contains(0));</span>
<span class="fc" id="L180">    assertFalse(sc1.lengthEquals(5).contains(8));</span>
<span class="fc" id="L181">  }</span>

  @Test
  public void testIsShorterThan() {
<span class="fc" id="L185">    assertTrue(sc1.isShorterThan(5).contains(6));</span>
<span class="fc" id="L186">    assertFalse(sc1.isShorterThan(5).contains(0));</span>
<span class="fc" id="L187">  }</span>

  @Test
  public void testIsLongerThan() {
<span class="fc" id="L191">    assertTrue(sc1.isLongerThan(5).contains(1));</span>
<span class="fc" id="L192">    assertFalse(sc1.isLongerThan(5).contains(0));</span>
<span class="fc" id="L193">  }</span>

  @Test
  public void testIsIn() {
<span class="fc" id="L197">    List&lt;String&gt; candidates = Lists.newArrayList(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;);</span>

<span class="fc" id="L199">    assertTrue(sc1.isIn(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;).contains(3));</span>
<span class="fc" id="L200">    assertFalse(sc1.isIn(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;).contains(8));</span>
<span class="fc" id="L201">    assertTrue(sc1.isIn(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;).contains(9));</span>

<span class="fc" id="L203">    assertTrue(sc1.isIn(candidates).contains(3));</span>
<span class="fc" id="L204">    assertFalse(sc1.isIn(candidates).contains(8));</span>
<span class="fc" id="L205">    assertTrue(sc1.isIn(candidates).contains(9));</span>
<span class="fc" id="L206">  }</span>

  @Test
  public void testIsNotIn() {
<span class="fc" id="L210">    List&lt;String&gt; candidates = Lists.newArrayList(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;);</span>

<span class="fc" id="L212">    assertFalse(sc1.isNotIn(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;).contains(3));</span>
<span class="fc" id="L213">    assertTrue(sc1.isNotIn(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;).contains(8));</span>
<span class="fc" id="L214">    assertFalse(sc1.isNotIn(&quot;diamond&quot;, &quot;dog&quot;, &quot;canary&quot;).contains(9));</span>

<span class="fc" id="L216">    assertFalse(sc1.isNotIn(candidates).contains(3));</span>
<span class="fc" id="L217">    assertTrue(sc1.isNotIn(candidates).contains(8));</span>
<span class="fc" id="L218">    assertFalse(sc1.isNotIn(candidates).contains(9));</span>
<span class="fc" id="L219">  }</span>

  @Test
  public void testIsMissing() {
<span class="fc" id="L223">    assertFalse(sc1.isMissing().contains(3));</span>
<span class="fc" id="L224">    assertTrue(sc1.isMissing().contains(18));</span>
<span class="fc" id="L225">  }</span>

  @Test
  public void testIsEmptyString() {
<span class="fc" id="L229">    assertFalse(sc1.isEmptyString().contains(3));</span>
<span class="fc" id="L230">    assertTrue(sc1.isEmptyString().contains(18));</span>
<span class="fc" id="L231">  }</span>

  @Test
  public void testIsNotMissing() {
<span class="fc" id="L235">    assertTrue(sc1.isNotMissing().contains(3));</span>
<span class="fc" id="L236">    assertFalse(sc1.isNotMissing().contains(18));</span>
<span class="fc" id="L237">  }</span>

  @Test
  public void testIsEqualTo() {
<span class="fc" id="L241">    assertTrue(sc1.isEqualTo(&quot;10&quot;).contains(12));</span>
<span class="fc" id="L242">    assertFalse(sc1.isEqualTo(&quot;10&quot;).contains(13));</span>

<span class="fc" id="L244">    assertTrue(sc1.isEqualTo(sc2).contains(9));</span>
<span class="fc" id="L245">    assertFalse(sc1.isEqualTo(sc2).contains(0));</span>
<span class="fc" id="L246">  }</span>

  @Test
  public void testIsNotEqualTo() {
<span class="fc" id="L250">    assertFalse(sc1.isNotEqualTo(&quot;10&quot;).contains(12));</span>
<span class="fc" id="L251">    assertTrue(sc1.isNotEqualTo(&quot;10&quot;).contains(13));</span>

<span class="fc" id="L253">    assertFalse(sc1.isNotEqualTo(sc2).contains(9));</span>
<span class="fc" id="L254">    assertTrue(sc1.isNotEqualTo(sc2).contains(0));</span>
<span class="fc" id="L255">  }</span>

  @Test
  public void testCountWords() {
<span class="fc" id="L259">    final String[] words1 = {&quot;one&quot;, &quot;two words&quot;};</span>
<span class="fc" id="L260">    final StringColumn stringColumn1 = StringColumn.create(&quot;words&quot;, words1);</span>
<span class="fc" id="L261">    DoubleColumn nc = stringColumn1.countTokens(&quot; &quot;);</span>
<span class="fc" id="L262">    assertEquals(3, nc.sum(), 0.00001);</span>
<span class="fc" id="L263">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>