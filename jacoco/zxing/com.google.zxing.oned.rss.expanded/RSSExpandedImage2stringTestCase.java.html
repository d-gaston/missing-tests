<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RSSExpandedImage2stringTestCase.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core$All_in_core.exec</a> &gt; <a href="index.source.html" class="el_package">com.google.zxing.oned.rss.expanded</a> &gt; <span class="el_source">RSSExpandedImage2stringTestCase.java</span></div><h1>RSSExpandedImage2stringTestCase.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2010 ZXing authors
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * These authors would like to acknowledge the Spanish Ministry of Industry,
 * Tourism and Trade, for the support in the project TSI020301-2008-2
 * &quot;PIRAmIDE: Personalizable Interactions with Resources on AmI-enabled
 * Mobile Dynamic Environments&quot;, led by Treelogic
 * ( http://www.treelogic.com/ ):
 *
 *   http://www.piramidepse.com/
 */

package com.google.zxing.oned.rss.expanded;

import java.awt.image.BufferedImage;
import java.io.IOException;
import java.nio.file.Path;

import javax.imageio.ImageIO;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.BinaryBitmap;
import com.google.zxing.BufferedImageLuminanceSource;
import com.google.zxing.NotFoundException;
import com.google.zxing.ReaderException;
import com.google.zxing.Result;
import com.google.zxing.common.AbstractBlackBoxTestCase;
import com.google.zxing.common.BitArray;
import com.google.zxing.common.GlobalHistogramBinarizer;
import org.junit.Assert;
import org.junit.Test;

/**
 * @author Pablo Ordu√±a, University of Deusto (pablo.orduna@deusto.es)
 * @author Eduardo Castillejo, University of Deusto (eduardo.castillejo@deusto.es)
 */
<span class="fc" id="L51">public final class RSSExpandedImage2stringTestCase extends Assert {</span>

  @Test
  public void testDecodeRow2string1() throws Exception {
<span class="fc" id="L55">    assertCorrectImage2string(&quot;1.png&quot;, &quot;(11)100224(17)110224(3102)000100&quot;);</span>
<span class="fc" id="L56">  }</span>

  @Test
  public void testDecodeRow2string2() throws Exception {
<span class="fc" id="L60">    assertCorrectImage2string(&quot;2.png&quot;, &quot;(01)90012345678908(3103)001750&quot;);</span>
<span class="fc" id="L61">  }</span>

  @Test
  public void testDecodeRow2string3() throws Exception {
<span class="fc" id="L65">    assertCorrectImage2string(&quot;3.png&quot;, &quot;(10)12A&quot;);</span>
<span class="fc" id="L66">  }</span>

  @Test
  public void testDecodeRow2string4() throws Exception {
<span class="fc" id="L70">    assertCorrectImage2string(&quot;4.png&quot;, &quot;(01)98898765432106(3202)012345(15)991231&quot;);</span>
<span class="fc" id="L71">  }</span>

  @Test
  public void testDecodeRow2string5() throws Exception {
<span class="fc" id="L75">    assertCorrectImage2string(&quot;5.png&quot;, &quot;(01)90614141000015(3202)000150&quot;);</span>
<span class="fc" id="L76">  }</span>

  @Test
  public void testDecodeRow2string7() throws Exception {
<span class="fc" id="L80">    assertCorrectImage2string(&quot;7.png&quot;, &quot;(10)567(11)010101&quot;);</span>
<span class="fc" id="L81">  }</span>

  @Test
  public void testDecodeRow2string10() throws Exception {
<span class="fc" id="L85">    String expected = &quot;(01)98898765432106(15)991231(3103)001750(10)12A(422)123(21)123456(423)012345678901&quot;;</span>
<span class="fc" id="L86">    assertCorrectImage2string(&quot;10.png&quot;, expected);</span>
<span class="fc" id="L87">  }</span>

  @Test
  public void testDecodeRow2string11() throws Exception {
<span class="fc" id="L91">    assertCorrectImage2string(&quot;11.png&quot;, &quot;(01)98898765432106(15)991231(3103)001750(10)12A(422)123(21)123456&quot;);</span>
<span class="fc" id="L92">  }</span>

  @Test
  public void testDecodeRow2string12() throws Exception {
<span class="fc" id="L96">    assertCorrectImage2string(&quot;12.png&quot;, &quot;(01)98898765432106(3103)001750&quot;);</span>
<span class="fc" id="L97">  }</span>

  @Test
  public void testDecodeRow2string13() throws Exception {
<span class="fc" id="L101">    assertCorrectImage2string(&quot;13.png&quot;, &quot;(01)90012345678908(3922)795&quot;);</span>
<span class="fc" id="L102">  }</span>

  @Test
  public void testDecodeRow2string14() throws Exception {
<span class="fc" id="L106">    assertCorrectImage2string(&quot;14.png&quot;, &quot;(01)90012345678908(3932)0401234&quot;);</span>
<span class="fc" id="L107">  }</span>

  @Test
  public void testDecodeRow2string15() throws Exception {
<span class="fc" id="L111">    assertCorrectImage2string(&quot;15.png&quot;, &quot;(01)90012345678908(3102)001750(11)100312&quot;);</span>
<span class="fc" id="L112">  }</span>

  @Test
  public void testDecodeRow2string16() throws Exception {
<span class="fc" id="L116">    assertCorrectImage2string(&quot;16.png&quot;, &quot;(01)90012345678908(3202)001750(11)100312&quot;);</span>
<span class="fc" id="L117">  }</span>

  @Test
  public void testDecodeRow2string17() throws Exception {
<span class="fc" id="L121">    assertCorrectImage2string(&quot;17.png&quot;, &quot;(01)90012345678908(3102)001750(13)100312&quot;);</span>
<span class="fc" id="L122">  }</span>

  @Test
  public void testDecodeRow2string18() throws Exception {
<span class="fc" id="L126">    assertCorrectImage2string(&quot;18.png&quot;, &quot;(01)90012345678908(3202)001750(13)100312&quot;);</span>
<span class="fc" id="L127">  }</span>

  @Test
  public void testDecodeRow2string19() throws Exception {
<span class="fc" id="L131">    assertCorrectImage2string(&quot;19.png&quot;, &quot;(01)90012345678908(3102)001750(15)100312&quot;);</span>
<span class="fc" id="L132">  }</span>

  @Test
  public void testDecodeRow2string20() throws Exception {
<span class="fc" id="L136">    assertCorrectImage2string(&quot;20.png&quot;, &quot;(01)90012345678908(3202)001750(15)100312&quot;);</span>
<span class="fc" id="L137">  }</span>

  @Test
  public void testDecodeRow2string21() throws Exception {
<span class="fc" id="L141">    assertCorrectImage2string(&quot;21.png&quot;, &quot;(01)90012345678908(3102)001750(17)100312&quot;);</span>
<span class="fc" id="L142">  }</span>

  @Test
  public void testDecodeRow2string22() throws Exception {
<span class="fc" id="L146">    assertCorrectImage2string(&quot;22.png&quot;, &quot;(01)90012345678908(3202)001750(17)100312&quot;);</span>
<span class="fc" id="L147">  }</span>

  @Test
  public void testDecodeRow2string25() throws Exception {
<span class="fc" id="L151">    assertCorrectImage2string(&quot;25.png&quot;, &quot;(10)123&quot;);</span>
<span class="fc" id="L152">  }</span>

  @Test
  public void testDecodeRow2string26() throws Exception {
<span class="fc" id="L156">    assertCorrectImage2string(&quot;26.png&quot;, &quot;(10)5678(11)010101&quot;);</span>
<span class="fc" id="L157">  }</span>

  @Test
  public void testDecodeRow2string27() throws Exception {
<span class="fc" id="L161">    assertCorrectImage2string(&quot;27.png&quot;, &quot;(10)1098-1234&quot;);</span>
<span class="fc" id="L162">  }</span>

  @Test
  public void testDecodeRow2string28() throws Exception {
<span class="fc" id="L166">    assertCorrectImage2string(&quot;28.png&quot;, &quot;(10)1098/1234&quot;);</span>
<span class="fc" id="L167">  }</span>

  @Test
  public void testDecodeRow2string29() throws Exception {
<span class="fc" id="L171">    assertCorrectImage2string(&quot;29.png&quot;, &quot;(10)1098.1234&quot;);</span>
<span class="fc" id="L172">  }</span>

  @Test
  public void testDecodeRow2string30() throws Exception {
<span class="fc" id="L176">    assertCorrectImage2string(&quot;30.png&quot;, &quot;(10)1098*1234&quot;);</span>
<span class="fc" id="L177">  }</span>

  @Test
  public void testDecodeRow2string31() throws Exception {
<span class="fc" id="L181">    assertCorrectImage2string(&quot;31.png&quot;, &quot;(10)1098,1234&quot;);</span>
<span class="fc" id="L182">  }</span>

  @Test
  public void testDecodeRow2string32() throws Exception {
<span class="fc" id="L186">    assertCorrectImage2string(&quot;32.png&quot;, &quot;(15)991231(3103)001750(10)12A(422)123(21)123456(423)0123456789012&quot;);</span>
<span class="fc" id="L187">  }</span>

  private static void assertCorrectImage2string(String fileName, String expected)
      throws IOException, NotFoundException {
<span class="fc" id="L191">    Path path = AbstractBlackBoxTestCase.buildTestBase(&quot;src/test/resources/blackbox/rssexpanded-1/&quot;).resolve(fileName);</span>

<span class="fc" id="L193">    BufferedImage image = ImageIO.read(path.toFile());</span>
<span class="fc" id="L194">    BinaryBitmap binaryMap =</span>
        new BinaryBitmap(new GlobalHistogramBinarizer(new BufferedImageLuminanceSource(image)));
<span class="fc" id="L196">    int rowNumber = binaryMap.getHeight() / 2;</span>
<span class="fc" id="L197">    BitArray row = binaryMap.getBlackRow(rowNumber, null);</span>

    Result result;
    try {
<span class="fc" id="L201">      RSSExpandedReader rssExpandedReader = new RSSExpandedReader();</span>
<span class="fc" id="L202">      result = rssExpandedReader.decodeRow(rowNumber, row, null);</span>
<span class="nc" id="L203">    } catch (ReaderException re) {</span>
<span class="nc" id="L204">      fail(re.toString());</span>
<span class="nc" id="L205">      return;</span>
<span class="fc" id="L206">    }</span>

<span class="fc" id="L208">    assertSame(BarcodeFormat.RSS_EXPANDED, result.getBarcodeFormat());</span>
<span class="fc" id="L209">    assertEquals(expected, result.getText());</span>
<span class="fc" id="L210">  }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>